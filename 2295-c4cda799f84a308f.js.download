"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2295],{54126:function(e,n,t){var s=t(85893);n.Z=function(){return(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}},22295:function(e,n,t){var s=t(47568),a=t(26042),l=t(69396),i=t(97582),o=t(85893),r=t(11355),c=t(69737),u=t(67294),d=t(3732),h=t(66261),m=t(52077),g=t(51121),v=t(80360),b=t(50246),p=t(24999),y=t(50899),f=t(4519),x=t(95350),w=t(11163),j=t(11215),N=t(54126),C=t(92265);n.Z=function(e){var n=e.open,t=e.setOpen,k=e.businessTarget,S=(0,u.useState)(""),Z=S[0],I=S[1],F=(0,u.useState)(""),T=F[0],L=F[1],_=(0,u.useState)(""),B=_[0],E=_[1],R=(0,u.useState)(""),A=R[0],O=R[1],P=(0,u.useState)(""),V=P[0],z=P[1],W=(0,u.useState)((0,d.tl)("supported-languages")||[]),M=W[0],U=W[1],q=(0,u.useState)(!1),G=q[0],H=q[1],X=(0,u.useState)(null),Y=X[0],D=X[1],J=(0,u.useState)([]),K=J[0],Q=J[1],$=(0,u.useState)(!1),ee=$[0],ne=$[1],te=(0,f.Z)(),se=te.get,ae=te.post,le=(0,b.Z)().data,ie=(0,j.Z)(),oe=ie.current,re=ie.set,ce=ie.reloadBusinesses,ue=(0,C.Z)().getAiSettings,de=(0,w.useRouter)(),he=(0,u.useRef)(null),me="regenerate new website",ge=(0,y.Z)({askUserLocation:!0}),ve=ge.data,be=ge.set,pe=ge.getLocation,ye=ge.getCountries,fe=function(){ee||t(!1)},xe=function(){var e=(0,s.Z)((function(){var e,n,t,s,o,r;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=K,n=null,t=null!==ve&&void 0!==ve?ve:{},""===A.trim()?[3,4]:A===(null===ve||void 0===ve?void 0:ve.inline)&&n?[2,{countryId:n,city:t.city,state:t.state,country:t.country,cords:t.cords}]:[4,pe({address:A})];case 1:return(t=i.sent())?(be((0,l.Z)((0,a.Z)({},t),{inline:A})).catch((function(){})),s=t.countryCode,o=t.country,s&&o?0!==K.length?[3,3]:[4,ye()]:[3,4]):[3,4];case 2:e=i.sent(),Q(e),i.label=3;case 3:return(r=e.find((function(e){return e.code===s.toLowerCase()})))||(r=e.find((function(e){return e.country.toLowerCase().includes(o.toLowerCase())}))),n=null===r||void 0===r?void 0:r.id,D(n),[2,{countryId:n,city:t.city,state:t.state,country:t.country,cords:t.cords}];case 4:return[2,null]}}))}));return function(){return e.apply(this,arguments)}}(),we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",n="";switch(e){case"name":(!Z||""===(null===Z||void 0===Z?void 0:Z.trim())||Z.length<5||Z.length>60)&&(n="Please enter a valid business name from 5 to 60 characters. If you don't have a name yet, just enter your name."),"business"===(null===Z||void 0===Z?void 0:Z.toLowerCase())&&(n="This business name is not allowed.");break;case"type":(null===T||void 0===T?void 0:T.name)||(n="Please select a business type.");break;case"location":Y||(n="We couldn't detect your country, please check if you entered a valid location.");break;case"language":(null===B||void 0===B?void 0:B.code)||(n="Please select a website language.");break;case"confirm":V!==me&&(n="You must type '".concat(me,"' to proceed."));break;case"all":n=!(!(!Z||""===(null===Z||void 0===Z?void 0:Z.trim())||Z.length<5||Z.length>60||"business"===(null===Z||void 0===Z?void 0:Z.toLowerCase()))&&(null===T||void 0===T?void 0:T.name)&&(null===B||void 0===B?void 0:B.code)&&V===me)}return n},je=function(){var e=(0,s.Z)((function(){var e,n,t,s,a,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return ne(!0),[4,xe()];case 1:return e=i.sent(),H(!0),ve&&(null===e||void 0===e?void 0:e.countryId)&&!we("all")?(n=k||oe,[4,ae("/business/regenerate-business",{name:Z,type:T,language:B,location:A,countryId:e.countryId,idBusiness:null===n||void 0===n?void 0:n._id},!1,!1)]):(ne(!1),[2]);case 2:return(t=i.sent())&&!0===(null===t||void 0===t?void 0:t.status)?((0,d.IT)("website"),s="/website/builder",de.pathname!==s?[3,3]:(null===window||void 0===window||null===(a=window.location)||void 0===a||a.reload(),[3,7])):[3,9];case 3:return k?[4,re(k,!0,s)]:[3,5];case 4:return i.sent(),[3,7];case 5:return[4,ue()];case 6:i.sent(),de.push(s).catch((function(){})),i.label=7;case 7:return[4,ce()];case 8:return i.sent(),[3,10];case 9:x.Z.error((null===t||void 0===t||null===(l=t.content)||void 0===l?void 0:l.error)||"Invalid request"),ne(!1),i.label=10;case 10:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=k||oe;if(null===e||void 0===e?void 0:e.type){var n=le.find((function(n){var t,s;return n.id===(null===(t=e.type.Type)||void 0===t?void 0:t._id)||n.name.toLowerCase()===(null===(s=e.type.name)||void 0===s?void 0:s.toLowerCase())}))||"";""===n&&e.type.name&&(n={id:le.length,name:e.type.name}),L(n)}},Ce=function(){var e=k||oe;if(null===e||void 0===e?void 0:e.language){var n=M.find((function(n){return n.code===e.language}));E(n)}};return(0,u.useEffect)((function(){Ne()}),[le]),(0,u.useEffect)((function(){Ce()}),[M]),(0,u.useEffect)((function(){!function(){var e=k||oe;(null===e||void 0===e?void 0:e.name)&&I(e.name)}(),Ce(),Ne()}),[k,oe]),(0,u.useEffect)((function(){M.length>0||se("/website/languages-supported",{}).then((function(e){if(!0===(null===e||void 0===e?void 0:e.status)){var n=((null===e||void 0===e?void 0:e.content)||[]).map((function(e){return e.id=null===e||void 0===e?void 0:e._id,e}));U(n),(0,d.Fs)("supported-languages",n)}}))}),[]),(0,o.jsx)(r.u,{show:n,as:u.Fragment,children:(0,o.jsx)(c.V,{as:"div",className:"fixed inset-0 z-100 overflow-hidden",initialFocus:he,onClose:fe,children:(0,o.jsxs)("div",{className:"flex items-end md:items-center justify-center h-full",children:[(0,o.jsx)(r.u.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,o.jsx)(c.V.Overlay,{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"})}),(0,o.jsx)(r.u.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",enterTo:"opacity-100 translate-y-0 md:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 md:scale-100",leaveTo:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",children:(0,o.jsxs)("div",{className:"relative flex flex-col h-full md:h-auto w-full md:max-w-120 bg-white md:rounded-md md:shadow-xl",children:[ee&&(0,o.jsx)("div",{className:"absolute inset-0 bg-gray-50 bg-opacity-50 z-100 flex justify-center items-center",children:(0,o.jsx)(N.Z,{})}),(0,o.jsxs)("div",{className:"flex items-center justify-between gap-4 border-b border-gray-300 pl-6 pr-4 py-3",children:[(0,o.jsx)(c.V.Title,{className:"font-semibold",children:"Regenerate entire website"}),(0,o.jsx)("button",{className:"light icon transparent",onClick:fe,children:(0,o.jsx)(h.Z,{icon:"XIcon",className:"w-5 h-5"})})]}),(0,o.jsxs)("div",{ref:he,className:"flex-1 p-6 overflow-y-auto max-h-[calc(100dvh-136px)]",children:[(0,o.jsxs)("div",{className:"block w-full mb-6",children:[(0,o.jsx)("label",{className:"text-label mb-1 text-gray-900 font-normal select-none",htmlFor:"regen-website-input-business-name",children:"Business name"}),(0,o.jsx)(g.Z,{id:"regen-website-input-business-name",icon:"BriefcaseIcon",iconClassName:"w-6 h-6 !bg-white",iconStyle:{color:"#6B7280",width:"20px",height:"20px"},value:Z,onChange:I,placeholder:"Please enter your business name",error:G?we("name"):"",disabled:ee})]}),(0,o.jsxs)("div",{className:"block w-full mb-6",children:[(0,o.jsx)("label",{className:"text-label mb-1 text-gray-900 font-normal select-none",htmlFor:"regen-website-input-business-type",children:"Business type"}),(0,o.jsx)(v.Z,{inputId:"regen-website-input-business-type",values:le,value:T,autocomplete:!0,showSuggestions:!0,allowUnlistedValues:!0,icon:"SearchIcon",iconClassName:"!bg-white",iconStyle:{color:"#6B7280",width:"20px",height:"20px"},placeholder:"Please select your industry",onChange:L,showNoResults:!1,showSelectorIcon:!1,showTypingAsOption:!0,error:G?we("type"):"",disabled:ee})]}),(0,o.jsxs)("div",{className:"block w-full mb-6",children:[(0,o.jsx)("label",{className:"text-label mb-1 text-gray-900 font-normal select-none",htmlFor:"location",children:"Location"}),ve?(0,o.jsx)(p.Z,{icon:"LocationMarkerIcon",iconClassName:"!bg-white",iconStyle:{color:"#6B7280",width:"20px",height:"20px"},inlineAddress:null===ve||void 0===ve?void 0:ve.inline,onChange:function(e){return O(e)},error:G?we("location"):"",disabled:ee}):(0,o.jsx)("div",{className:"input",children:"Getting your location..."})]}),(0,o.jsxs)("div",{className:"block w-full mb-6",children:[(0,o.jsx)("label",{className:"text-label mb-1 text-gray-900 font-normal select-none",htmlFor:"regen-website-input-business-language",children:"Website language"}),(0,o.jsx)(v.Z,{inputId:"regen-website-input-business-language",icon:"TranslateIcon",iconClassName:"!bg-white",iconStyle:{color:"#6B7280",width:"20px",height:"20px"},values:M,value:B,autocomplete:!0,showSuggestions:!0,placeholder:"Select your website language",onChange:E,showNoResults:!1,showSelectorIcon:!1,showTypingAsOption:!1,error:G?we("language"):"",disabled:ee})]}),(0,o.jsxs)("div",{className:"alert danger mt-6",children:[(0,o.jsx)(h.Z,{icon:"ExclamationIcon"}),(0,o.jsxs)("p",{children:["Clicking ","'Regenerate'"," will delete and replace your ",(0,o.jsx)("strong",{children:"entire"})," website. Only your blog will remain unchanged.",(0,o.jsx)("strong",{children:" This action is irreversible."})]})]}),(0,o.jsxs)("div",{className:"block w-full mt-6",children:[(0,o.jsxs)("label",{className:"text-label mb-6 text-gray-900 font-normal select-none",htmlFor:"regen-website-input-confirm",children:["Type ",(0,o.jsx)("strong",{children:"'".concat(me,"'")})," to proceed."]}),(0,o.jsx)(g.Z,{id:"regen-website-input-confirm",value:V,onChange:z,placeholder:"",error:G?we("confirm"):"",disabled:ee})]})]}),(0,o.jsxs)("div",{className:"flex justify-end gap-4 px-6 p-4 border-t border-gray-300",children:[(0,o.jsx)("button",{className:"light",disabled:ee,onClick:fe,children:"Cancel"}),(0,o.jsx)(m.Z,{className:"primary",loading:ee,onClick:je,children:"Regenerate"})]})]})})]})})})}}}]);