(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5188],{76078:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var i=n(26042),r=n(69396),o=n(10253),s=n(85893),a=n(67294),l=n(46440),c=n(72510),u=n(2740),d=n(11355),m=n(69737),f=n(3732),p=n(66261),v=n(66605),h=function(e,t){var n=(0,a.useState)(t),i=n[0],r=n[1];return(0,a.useEffect)((function(){var t,n=function(t){var n=Array.isArray(e)?e:[e],i=!0;n.forEach((function(e){null!==e.current&&e.current.contains(t.target)&&(i=!1)})),i&&r(!1)};i&&(window.addEventListener("click",n),window.top.addEventListener("click",n),null===(t=window.preview)||void 0===t||t.addEventListener("click",n));return function(){var e;window.removeEventListener("click",n),window.top.removeEventListener("click",n),null===(e=window.preview)||void 0===e||e.removeEventListener("click",n)}}),[i,e]),[i,r]};function x(e){var t=e.className,n=e.icon,x=e.iconClassName,y=e.button,g=e.buttonClassName,b=e.openClassName,w=e.iconOpenClassName,j=e.children,N=e.inline,k=e.itemsContainerClass,I=e.mobileContent,C=e.mobileTitle,S=e.tooltip,R=e.disabled,T=e.placementAlign,Z=void 0===T?"end":T,P=e.onOpen,E=e.onButtonClick,_=e.closeOnSelect,O=e.show,F=void 0===O||O,M=e.portal,A=void 0===M||M,D=e.dataTour,L=e.onClose,z=e.showCloseButton,V=void 0===z||z,K=(0,f.ac)("(min-width: 1024px)"),U=(0,a.useState)(null),Y=U[0],Q=U[1],B=(0,a.useState)(null),W=B[0],G=B[1],J=(0,a.useRef)(null),$=(0,a.useRef)(null),q=(0,o.Z)(h(J,!1),2),X=q[0],H=q[1],ee=(0,l.D)(Y,W,{placement:"bottom-".concat(Z),modifiers:[{name:"flip",options:{allowedAutoPlacements:["top-start","bottom-start","top-end","bottom-end"]}},{name:"offset",options:{offset:[0,8]}}]}),te=ee.styles,ne=ee.attributes,ie=function(e){e.stopPropagation(),H(!X);var t=new Event("click",{bubbles:!0});document.dispatchEvent(t),"function"===typeof E&&E(e)},re=function(){X&&(H(!1),"function"===typeof L&&L())},oe=function(){return(0,s.jsx)(c.v.Button,{ref:Q,className:(0,f.AK)(g,X?b:"","z-5"),disabled:R,onClick:ie,children:y||(0,s.jsx)(p.Z,{icon:n||"DotsVerticalIcon",className:(0,f.AK)(x,"h-5 w-5",X?w||"text-indigo-500":!x&&"text-gray-500")})})};(0,a.useEffect)((function(){return"function"===typeof P&&P(X),window.top.addEventListener("dropdown-open",re),window.top.addEventListener("close-dropdown",re),function(){window.top.removeEventListener("dropdown-open",re),window.top.removeEventListener("close-dropdown",re)}}),[X]);var se=A?u.h:a.Fragment;return(0,a.useEffect)((function(){!1===X&&"function"===typeof L&&L()}),[X]),(0,s.jsx)(c.v,{"data-tour":D,ref:J,as:"div",className:(0,f.AK)("relative inline-block text-left",t),onClick:function(e){return e.stopPropagation()},children:function(e){e.open;return(0,s.jsxs)(s.Fragment,{children:[S?(0,s.jsx)(v.Z,{alt:S,disabled:R,children:oe()}):oe(),(0,s.jsx)(se,{children:K?(0,s.jsx)("div",(0,r.Z)((0,i.Z)({className:(0,f.AK)("z-100 transition-opacity",F?"opacity-100":"opacity-0"),ref:$,style:te.popper},ne.popper),{children:(0,s.jsx)(d.u,{show:X,as:a.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",beforeEnter:function(){return G($.current)},afterLeave:function(){return G(null)},children:(0,s.jsx)(c.v.Items,{static:!0,className:(0,f.AK)(N?"static":"absolute","origin-top-right z-10 right-0 mt-1 w-full min-w-50 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none overflow-hidden",k),onClick:function(){return _&&H(!1)},children:j})})})):(0,s.jsx)(d.u.Root,{show:X,as:a.Fragment,children:(0,s.jsx)(m.V,{as:"div",className:"fixed z-100 inset-0 overflow-y-auto",onClose:function(){return H(!1)},children:(0,s.jsxs)("div",{className:"flex items-end justify-center h-full text-center",children:[(0,s.jsx)(d.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity",onClick:function(){return H(!1)}})}),(0,s.jsx)(d.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4",enterTo:"opacity-100 translate-y-0",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-4",children:(0,s.jsxs)("div",{className:(0,f.AK)("w-full bg-white pt-2 text-left overflow-hidden shadow-xl transform transition-all",I?"flex flex-col h-full":"block rounded-t-lg",!V&&"pb-6"),children:[I&&(0,s.jsx)("div",{className:"flex-1 flex justify-center items-center p-10",children:I}),C&&(0,s.jsxs)("div",{className:"flex md:hidden items-center justify-between gap-3 pl-4 pr-2 pt-1 pb-2 border-b",children:[(0,s.jsx)("p",{className:"font-semibold py-2",children:C}),(0,s.jsx)("button",{className:"light icon transparent",onClick:function(){return H(!1)},children:(0,s.jsx)(p.Z,{icon:"XIcon",className:"w-5 h-5"})})]}),(0,s.jsx)("div",{className:(0,f.AK)("flex flex-col overflow-hidden",k),children:(0,s.jsx)(c.v.Items,{onClick:function(){return _&&H(!1)},children:j})}),V&&(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("button",{className:"light lg w-full",onClick:function(){return H(!1)},children:"Close"})})]})})]})})})})]})}})}},10726:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var i=n(47568),r=n(10253),o=n(97582),s=n(85893),a=n(3732),l=n(66261),c=n(52077),u=n(4519),d=n(11163),m=n(33299),f=n(15564),p=n(67294),v=n(61437);function h(e){var t,n,h,x=e.className,y=(0,p.useState)(!1),g=y[0],b=y[1],w=(0,r.Z)((0,v.Z)("layout.paywall"),2),j=(w[0],w[1]),N=(0,u.Z)(),k=N.get,I=N.post,C=(0,d.useRouter)(),S=(0,m.useSession)().data,R=function(){var e=(0,i.Z)((function(){var e,t,n;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return b(!0),[4,I("/user/verify-identity",{invoicePage:!0})];case 1:return(e=i.sent())&&!0===e.status&&e.content?"verified"!==(null===(t=e.content)||void 0===t?void 0:t.status)?[3,3]:(a.Z9.success("Identity verified!"),[4,T()]):[3,6];case 2:return i.sent(),[3,5];case 3:return(null===e||void 0===e||null===(n=e.content)||void 0===n?void 0:n.url)?[4,C.push(e.content.url)]:[3,5];case 4:i.sent(),i.label=5;case 5:return[3,7];case 6:a.Z9.error(e.message),i.label=7;case 7:return b(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,i.Z)((function(){var e,t;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return b(!0),[4,k("/user/get-verification-session")];case 1:return(e=n.sent())&&!0===e.status?"processing"===(null===(t=e.content)||void 0===t?void 0:t.status)?E():(_(),(0,f.k)(S)):a.Z9.error(e.message),b(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=(0,i.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,I("/stripe/ack-onboarding-complete")];case 1:return(e=t.sent())&&!0===e.status&&(0,f.k)(S),[2]}}))}));return function(){return e.apply(this,arguments)}}(),P=null,E=function(){P||(P=setInterval((function(){T()}),5e3))},_=function(){P&&(P=clearInterval(P))},O=function(){var e=(0,i.Z)((function(){var e;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return b(!0),[4,I("/stripe/get-onboarding-url",{withMoney:!1})];case 1:return(e=t.sent())&&!0===e.status&&e.content.url?(0,f.k)(S,{callbackUrl:"/my-business/settings"},!1).then(function(){var t=(0,i.Z)((function(t){return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return[4,C.push(e.content.url)];case 1:return t.sent(),b(!1),[2]}}))}));return function(e){return t.apply(this,arguments)}}()).catch(console.log):(a.Z9.error(e.message),b(!1)),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,p.useEffect)((function(){T()}),[]),(0,s.jsx)("div",{className:x,children:(null===S||void 0===S||null===(t=S.user)||void 0===t?void 0:t.ccPaymentEnabled)&&!(null===S||void 0===S||null===(n=S.user)||void 0===n||null===(h=n.onboarding)||void 0===h?void 0:h.ackCcPayementOnboardingComplete)&&function(){var e,t,n,i,r,o,u,d,m,f,p,v;return"verified"===(null===S||void 0===S||null===(e=S.user)||void 0===e?void 0:e.identityStatus)&&"complete"===(null===S||void 0===S||null===(t=S.user)||void 0===t?void 0:t.stripeOnboardingStatus)?(0,s.jsx)("div",{className:"flex flex-col md:flex-row gap-2 justify-between md:items-center rounded-xl p-4 bg-green-50 shadow",children:(0,s.jsxs)("div",{className:"w-full flex gap-3 justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,s.jsx)(l.Z,{icon:"CheckCircleSolidIcon",className:"h-6 w-6 flex-shrink-0 text-green-900 hidden md:block","aria-hidden":"true"}),(0,s.jsx)("p",{className:"text-green-800",children:"Your onboarding process is complete, now you are able to use credit card payments."})]}),(0,s.jsx)(l.Z,{icon:"XIcon",onClick:Z,className:"h-6 w-6 flex-shrink-0 cursor-pointer text-green-900 ","aria-hidden":"true"})]})}):"verified"!==(null===S||void 0===S||null===(n=S.user)||void 0===n?void 0:n.identityStatus)&&"complete"===(null===S||void 0===S||null===(i=S.user)||void 0===i?void 0:i.stripeOnboardingStatus)?(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 justify-between md:items-center rounded-xl p-4 bg-blue-50 shadow",children:[(0,s.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,s.jsx)(l.Z,{icon:"InformationCircleIcon",from:"heroicons",className:"h-6 w-6 flex-shrink-0 text-blue-900 hidden md:block","aria-hidden":"true"}),(0,s.jsx)("p",{className:"text-blue-800",children:"Apply for credit card payments"})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-2",children:["processing"===(null===S||void 0===S||null===(f=S.user)||void 0===f?void 0:f.identityStatus)?(0,s.jsx)(c.Z,{className:"light flex gap-2 items-center",disabled:!0,loading:g,onClick:R,children:"Processing your identity"}):(0,s.jsxs)(c.Z,{className:"light flex gap-2 items-center",disabled:"verified"===(null===S||void 0===S||null===(p=S.user)||void 0===p?void 0:p.identityStatus),loading:g,onClick:R,children:[(0,s.jsx)(l.Z,{icon:"CheckCircleSolidIcon",className:(0,a.AK)("w-5 h-5","verified"===(null===S||void 0===S||null===(v=S.user)||void 0===v?void 0:v.identityStatus)?"block":"hidden")})," Verify your identity"]}),(0,s.jsxs)(c.Z,{className:"light flex gap-2 items-center",loading:g,disabled:!0,children:[(0,s.jsx)(l.Z,{icon:"CheckCircleSolidIcon",className:"w-5 h-5"}),"Tell us about your business "]})]})]}):"requires_input"===(null===S||void 0===S||null===(r=S.user)||void 0===r?void 0:r.identityStatus)?(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 justify-between md:items-center rounded-xl p-4 bg-yellow-50 shadow",children:[(0,s.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,s.jsx)(l.Z,{icon:"ClockIcon",from:"heroicons",className:"h-6 w-6 flex-shrink-0 text-yellow-900 hidden md:block","aria-hidden":"true"}),(0,s.jsx)("p",{className:"text-yellow-800",children:"We need more information from you to complete your identity process"})]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)(c.Z,{className:"link flex gap-2 items-center",loading:g,onClick:function(){R()},children:[" Check status ",(0,s.jsx)(l.Z,{icon:"ArrowRightIcon",from:"heroicons",className:"w-4 h-4"})," "]})})]}):"ccPayments_pending"===(null===S||void 0===S||null===(o=S.user)||void 0===o?void 0:o.stripeOnboardingStatus)?(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 justify-between md:items-center rounded-xl p-4 bg-yellow-50 shadow",children:[(0,s.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,s.jsx)(l.Z,{icon:"ClockIcon",from:"heroicons",className:"h-6 w-6 flex-shrink-0 text-yellow-900 hidden md:block","aria-hidden":"true"}),(0,s.jsx)("p",{className:"text-yellow-800",children:"Your application for credit card payments is being processed"})]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)(c.Z,{className:"link flex gap-2 items-center",loading:g,onClick:function(){var e,t,n;(null===S||void 0===S||null===(e=S.user)||void 0===e||null===(t=e.plan)||void 0===t||null===(n=t.features)||void 0===n?void 0:n.includes("cc_payments"))?O():j(!0)},children:[" Check status ",(0,s.jsx)(l.Z,{icon:"ArrowRightIcon",from:"heroicons",className:"w-4 h-4"})," "]})})]}):(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 justify-between md:items-center rounded-xl p-4 bg-blue-50 shadow",children:[(0,s.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,s.jsx)(l.Z,{icon:"InformationCircleIcon",from:"heroicons",className:"h-6 w-6 flex-shrink-0 text-blue-900 hidden md:block","aria-hidden":"true"}),(0,s.jsx)("p",{className:"text-blue-800",children:"Apply for credit card payments"})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-2",children:["processing"===(null===S||void 0===S||null===(u=S.user)||void 0===u?void 0:u.identityStatus)?(0,s.jsx)(c.Z,{className:"light flex gap-2 items-center",disabled:!0,loading:g,onClick:R,children:"Processing your identity"}):(0,s.jsxs)(c.Z,{className:"light flex gap-2 items-center",disabled:"verified"===(null===S||void 0===S||null===(d=S.user)||void 0===d?void 0:d.identityStatus),loading:g,onClick:R,children:[(0,s.jsx)(l.Z,{icon:"CheckCircleSolidIcon",className:(0,a.AK)("w-5 h-5","verified"===(null===S||void 0===S||null===(m=S.user)||void 0===m?void 0:m.identityStatus)?"block":"hidden")})," Verify your identity"]}),(0,s.jsx)(c.Z,{className:"light",loading:g,onClick:function(){var e,t,n,i,r,o;(null===S||void 0===S||null===(e=S.user)||void 0===e||null===(t=e.plan)||void 0===t||null===(n=t.features)||void 0===n?void 0:n.includes("money"))||(null===S||void 0===S||null===(i=S.user)||void 0===i||null===(r=i.plan)||void 0===r||null===(o=r.features)||void 0===o?void 0:o.includes("cc_payments"))?O():j(!0)},children:" Tell us about your business "})]})]})}()})}},59578:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var i=n(47568),r=n(97582),o=n(85893),s=n(67294),a=n(11355),l=n(69737),c=n(10124),u=n(11163),d=n(3732),m=n(9198),f=n.n(m),p=n(14441),v=(n(39828),n(60728)),h=n(30120),x=n(4519),y=n(80360),g=n(52077);function b(e){var t=e.idInvoice,n=e.open,m=e.setOpen,b=(0,s.useState)(new Date),w=b[0],j=b[1],N=(0,s.useState)(!1),k=N[0],I=N[1],C=(0,s.useState)((0,d.tl)("invoice-payment-methods")),S=C[0],R=C[1],T=(0,s.useState)(null),Z=T[0],P=T[1],E=(0,u.useRouter)(),_=(0,x.Z)(),O=_.get,F=_.post,M=(0,v.Z)(),A=M.confirm,D=M.ConfirmDialog,L=function(){var e=(0,i.Z)((function(){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return I(!0),[4,F("invoice/pay",{idInvoice:t,date:w,paymentMethod:null===Z||void 0===Z?void 0:Z.id}).catch(console.log)];case 1:return(e=n.sent())&&!0===e.status?d.Z9.success("Invoice marked as paid!"):d.Z9.error(e.message),m(!1),E.reload(),I(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),z=function(){var e=(0,i.Z)((function(){var e,t,n;return(0,r.__generator)(this,(function(i){switch(i.label){case 0:return[4,O("invoice/get-payment-methods").catch(console.log)];case 1:return(e=i.sent())&&!0===e.status&&e.content&&(n=null===(t=e.content.filter((function(e){return e.active})))||void 0===t?void 0:t.map((function(e){return{name:e.name,id:e.code}})),(0,d.Fs)("invoice-payment-methods",n),R(n)),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){n?z():P(null)}),[n]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(a.u.Root,{show:n,as:s.Fragment,children:(0,o.jsx)(l.V,{as:"div",className:"fixed z-100 inset-0 overflow-y-auto",onClose:m,static:k,children:(0,o.jsxs)("div",{className:"flex items-end lg:items-center justify-center h-full lg:pt-4 lg:px-4 lg:pb-20 text-center sm:block sm:p-0",children:[(0,o.jsx)(a.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,o.jsx)(l.V.Overlay,{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"})}),(0,o.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,o.jsx)(a.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,o.jsxs)("div",{className:"inline-block align-bottom w-full bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-visible shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:p-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:(0,o.jsx)(c.Z,{className:"h-6 w-6 text-green-600","aria-hidden":"true"})}),(0,o.jsxs)("div",{className:"mt-3 sm:mt-5",children:[(0,o.jsx)(l.V.Title,{as:"h3",className:"text-lg text-center leading-6 font-medium text-gray-900",children:"Mark invoice as paid"}),(0,o.jsx)("div",{className:"mt-8",children:(0,o.jsxs)("div",{className:"flex flex-col w-full",children:[(0,o.jsx)("label",{className:"mb-1",children:"Payment date"}),(0,o.jsx)(f(),{className:"w-full flex-1",selected:w,onChange:function(e){return j(e)},dateFormat:"MMM dd, yyyy",calendarClassName:"tailwind-calendar",customInput:(0,o.jsx)(p.Z,{}),portalId:"root-portal"})]})}),(0,o.jsx)("div",{className:"mt-8",children:(0,o.jsx)(y.Z,{label:"Payment method",placeholder:"Select",values:S,value:Z,onChange:P})})]})]}),(0,o.jsx)("div",{className:"mt-5 sm:mt-6",children:(0,o.jsx)(g.Z,{type:"button",className:"primary w-full",onClick:function(){return A("Are you sure?","You are going to mark this invoice as paid on ".concat(h.ou.fromJSDate(w).toFormat("DD")," and it can't be reverted."),(function(){return L()}),null)},loading:k,children:"Mark as paid"})})]})}),(0,o.jsx)(D,{confirmText:"Mark as paid"}),(0,o.jsx)("div",{id:"root-portal"})]})})})})}},12015:function(e,t,n){"use strict";var i=n(47568),r=n(97582),o=n(85893),s=n(67294),a=n(11355),l=n(69737),c=n(3732),u=n(42238),d=n.n(u),m=n(4519),f=n(66261),p=n(52077);t.Z=function(e){var t=e.invoice,n=e.open,u=e.setOpen,v=e.onClose,h=(0,s.useState)(!1),x=h[0],y=h[1],g=(0,s.useState)(null),b=g[0],w=g[1],j=(0,s.useState)(""),N=j[0],k=j[1],I=(0,m.Z)().post,C=(0,s.useState)(!1),S=C[0],R=C[1],T=(0,s.useState)(null),Z=T[0],P=T[1],E=function(){var e=(0,i.Z)((function(){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return y(!0),R(!1),[4,I("/invoice/send-to-customer",{idInvoice:t._id}).catch(console.log)];case 1:return 429===(null===(e=n.sent())||void 0===e?void 0:e.code)&&R(!0),e&&!0===e.status?w(!0):w(!1),y(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),_=function(){"function"===typeof v&&v(b),u(!1)};(0,s.useEffect)((function(){var e=new(d());P(e.getResult())}),[]),(0,s.useEffect)((function(){n&&y(null)}),[n]),(0,s.useEffect)((function(){var e,n,i="this customer",r=!1;if(Z){var o,s,a=null===Z||void 0===Z||null===(o=Z.device)||void 0===o?void 0:o.model,l=null===Z||void 0===Z||null===(s=Z.browser)||void 0===s?void 0:s.name;r="iphone"===(null===a||void 0===a?void 0:a.toLowerCase())&&"chrome"===(null===l||void 0===l?void 0:l.toLowerCase())}!r&&t&&((null===t||void 0===t?void 0:t.customer)||(null===t||void 0===t?void 0:t.Customer))&&(i=(null===t||void 0===t||null===(e=t.customer)||void 0===e?void 0:e.email)||(null===t||void 0===t||null===(n=t.Customer)||void 0===n?void 0:n.email));k(i)}),[t,Z]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(a.u.Root,{show:n,as:s.Fragment,children:(0,o.jsx)(l.V,{as:"div",className:"fixed z-100 inset-0 overflow-y-auto",onClose:_,static:x,children:(0,o.jsxs)("div",{className:"flex items-end lg:items-center justify-center h-full lg:pt-4 lg:px-4 lg:pb-20 text-center sm:block sm:p-0",children:[(0,o.jsx)(a.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,o.jsx)(l.V.Overlay,{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"})}),(0,o.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,o.jsx)(a.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,o.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-visible shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-sm sm:w-full",children:null===b?(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsx)("div",{className:"mx-auto mb-2 flex items-center justify-center h-12 w-12 rounded-full bg-indigo-100",children:(0,o.jsx)(f.Z,{icon:"ExclamationIcon",className:"h-6 w-6 text-indigo-600","aria-hidden":"true"})}),(0,o.jsxs)(l.V.Title,{as:"h3",className:"text-lg text-center leading-6 font-medium text-gray-900",children:["Would you like to send this invoice to ",N,"?"]}),(0,o.jsxs)("div",{className:"flex gap-4 mt-5 sm:mt-6",children:[(0,o.jsx)("button",{type:"button",className:"secondary w-full",onClick:function(){return u(!1)},disabled:x,children:"Cancel"}),(0,o.jsx)(p.Z,{type:"button",className:"primary w-full",onClick:function(){return E()},loading:x,children:"Send Invoice"})]})]}):(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsx)("div",{className:(0,c.AK)(b?"bg-green-100":"bg-red-100","mx-auto mb-2 flex items-center justify-center h-12 w-12 rounded-full"),children:(0,o.jsx)(f.Z,{icon:b?"CheckIcon":"XIcon",className:(0,c.AK)(b?"text-green-600":"text-red-600","h-6 w-6"),"aria-hidden":"true"})}),(0,o.jsx)(l.V.Title,{as:"h3",className:"text-lg text-center leading-6 font-medium text-gray-900",children:S?"You are sending too many invoices. Please, try again later.":b?"Awesome! You just sent an invoice to ".concat(N,"!"):"Something went wrong! Please, try to send the invoice again."}),(0,o.jsx)("div",{className:"text-center mt-5 sm:mt-6",children:(0,o.jsx)("button",{type:"button",className:"primary",onClick:function(){return _()},children:"Close"})})]})})})]})})})})}},92703:function(e,t,n){"use strict";var i=n(50414);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,s){if(s!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},45697:function(e,t,n){e.exports=n(92703)()},50414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},97326:function(e,t,n){"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return i}})},15671:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return i}})},43144:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(83997);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,i.Z)(r.key),r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},61120:function(e,t,n){"use strict";function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}n.d(t,{Z:function(){return i}})},32531:function(e,t,n){"use strict";function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}n.d(t,{Z:function(){return r}})},82963:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(71002),r=n(97326);function o(e,t){if(t&&("object"===(0,i.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,r.Z)(e)}},72510:function(e,t,n){"use strict";n.d(t,{v:function(){return z}});var i,r,o=n(67294),s=n(32984),a=n(12351),l=n(9362),c=n(94192),u=n(16723),d=n(23784),m=n(19946),f=n(61363),p=n(11497),v=n(64103),h=n(84575),x=n(39650),y=n(31591),g=n(16567),b=n(14157),w=n(51074),j=n(73781),N=n(40476),k=n(55918),I=((r=I||{})[r.Open=0]="Open",r[r.Closed=1]="Closed",r),C=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(C||{}),S=((i=S||{})[i.OpenMenu=0]="OpenMenu",i[i.CloseMenu=1]="CloseMenu",i[i.GoToItem=2]="GoToItem",i[i.Search=3]="Search",i[i.ClearSearch=4]="ClearSearch",i[i.RegisterItem=5]="RegisterItem",i[i.UnregisterItem=6]="UnregisterItem",i);function R(e,t=(e=>e)){let n=null!==e.activeItemIndex?e.items[e.activeItemIndex]:null,i=(0,h.z2)(t(e.items.slice()),(e=>e.dataRef.current.domRef.current)),r=n?i.indexOf(n):null;return-1===r&&(r=null),{items:i,activeItemIndex:r}}let T={1:e=>1===e.menuState?e:{...e,activeItemIndex:null,menuState:1},0:e=>0===e.menuState?e:{...e,__demoMode:!1,menuState:0},2:(e,t)=>{var n;let i=R(e),r=(0,p.d)(t,{resolveItems:()=>i.items,resolveActiveIndex:()=>i.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...e,...i,searchQuery:"",activeItemIndex:r,activationTrigger:null!=(n=t.trigger)?n:1}},3:(e,t)=>{let n=""!==e.searchQuery?0:1,i=e.searchQuery+t.value.toLowerCase(),r=(null!==e.activeItemIndex?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find((e=>{var t;return(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(i))&&!e.dataRef.current.disabled})),o=r?e.items.indexOf(r):-1;return-1===o||o===e.activeItemIndex?{...e,searchQuery:i}:{...e,searchQuery:i,activeItemIndex:o,activationTrigger:1}},4:e=>""===e.searchQuery?e:{...e,searchQuery:"",searchActiveItemIndex:null},5:(e,t)=>{let n=R(e,(e=>[...e,{id:t.id,dataRef:t.dataRef}]));return{...e,...n}},6:(e,t)=>{let n=R(e,(e=>{let n=e.findIndex((e=>e.id===t.id));return-1!==n&&e.splice(n,1),e}));return{...e,...n,activationTrigger:1}}},Z=(0,o.createContext)(null);function P(e){let t=(0,o.useContext)(Z);if(null===t){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,P),t}return t}function E(e,t){return(0,s.E)(t.type,T,e,t)}Z.displayName="MenuContext";let _=o.Fragment;let O=a.AN.RenderStrategy|a.AN.Static;let F=o.Fragment;let M=(0,a.yV)((function(e,t){let{__demoMode:n=!1,...i}=e,r=(0,o.useReducer)(E,{__demoMode:n,menuState:n?0:1,buttonRef:(0,o.createRef)(),itemsRef:(0,o.createRef)(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:l,itemsRef:c,buttonRef:u},m]=r,f=(0,d.T)(t);(0,x.O)([u,c],((e,t)=>{var n;m({type:1}),(0,h.sP)(t,h.tJ.Loose)||(e.preventDefault(),null==(n=u.current)||n.focus())}),0===l);let p=(0,j.z)((()=>{m({type:1})})),v=(0,o.useMemo)((()=>({open:0===l,close:p})),[l,p]),y={ref:f};return o.createElement(Z.Provider,{value:r},o.createElement(g.up,{value:(0,s.E)(l,{0:g.ZM.Open,1:g.ZM.Closed})},(0,a.sY)({ourProps:y,theirProps:i,slot:v,defaultTag:_,name:"Menu"})))})),A=(0,a.yV)((function(e,t){var n;let i=(0,m.M)(),{id:r=`headlessui-menu-button-${i}`,...s}=e,[l,u]=P("Menu.Button"),h=(0,d.T)(l.buttonRef,t),x=(0,c.G)(),y=(0,j.z)((e=>{switch(e.key){case f.R.Space:case f.R.Enter:case f.R.ArrowDown:e.preventDefault(),e.stopPropagation(),u({type:0}),x.nextFrame((()=>u({type:2,focus:p.T.First})));break;case f.R.ArrowUp:e.preventDefault(),e.stopPropagation(),u({type:0}),x.nextFrame((()=>u({type:2,focus:p.T.Last})))}})),g=(0,j.z)((e=>{if(e.key===f.R.Space)e.preventDefault()})),w=(0,j.z)((t=>{if((0,v.P)(t.currentTarget))return t.preventDefault();e.disabled||(0===l.menuState?(u({type:1}),x.nextFrame((()=>{var e;return null==(e=l.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(t.preventDefault(),u({type:0})))})),N=(0,o.useMemo)((()=>({open:0===l.menuState})),[l]),k={ref:h,id:r,type:(0,b.f)(e,l.buttonRef),"aria-haspopup":"menu","aria-controls":null==(n=l.itemsRef.current)?void 0:n.id,"aria-expanded":0===l.menuState,onKeyDown:y,onKeyUp:g,onClick:w};return(0,a.sY)({ourProps:k,theirProps:s,slot:N,defaultTag:"button",name:"Menu.Button"})})),D=(0,a.yV)((function(e,t){var n,i;let r=(0,m.M)(),{id:s=`headlessui-menu-items-${r}`,...u}=e,[v,x]=P("Menu.Items"),b=(0,d.T)(v.itemsRef,t),N=(0,w.i)(v.itemsRef),k=(0,c.G)(),I=(0,g.oJ)(),C=null!==I?(I&g.ZM.Open)===g.ZM.Open:0===v.menuState;(0,o.useEffect)((()=>{let e=v.itemsRef.current;e&&0===v.menuState&&e!==(null==N?void 0:N.activeElement)&&e.focus({preventScroll:!0})}),[v.menuState,v.itemsRef,N]),(0,y.B)({container:v.itemsRef.current,enabled:0===v.menuState,accept:e=>"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let S=(0,j.z)((e=>{var t,n;switch(k.dispose(),e.key){case f.R.Space:if(""!==v.searchQuery)return e.preventDefault(),e.stopPropagation(),x({type:3,value:e.key});case f.R.Enter:if(e.preventDefault(),e.stopPropagation(),x({type:1}),null!==v.activeItemIndex){let{dataRef:e}=v.items[v.activeItemIndex];null==(n=null==(t=e.current)?void 0:t.domRef.current)||n.click()}(0,h.wI)(v.buttonRef.current);break;case f.R.ArrowDown:return e.preventDefault(),e.stopPropagation(),x({type:2,focus:p.T.Next});case f.R.ArrowUp:return e.preventDefault(),e.stopPropagation(),x({type:2,focus:p.T.Previous});case f.R.Home:case f.R.PageUp:return e.preventDefault(),e.stopPropagation(),x({type:2,focus:p.T.First});case f.R.End:case f.R.PageDown:return e.preventDefault(),e.stopPropagation(),x({type:2,focus:p.T.Last});case f.R.Escape:e.preventDefault(),e.stopPropagation(),x({type:1}),(0,l.k)().nextFrame((()=>{var e;return null==(e=v.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));break;case f.R.Tab:e.preventDefault(),e.stopPropagation(),x({type:1}),(0,l.k)().nextFrame((()=>{(0,h.EO)(v.buttonRef.current,e.shiftKey?h.TO.Previous:h.TO.Next)}));break;default:1===e.key.length&&(x({type:3,value:e.key}),k.setTimeout((()=>x({type:4})),350))}})),R=(0,j.z)((e=>{if(e.key===f.R.Space)e.preventDefault()})),T=(0,o.useMemo)((()=>({open:0===v.menuState})),[v]),Z={"aria-activedescendant":null===v.activeItemIndex||null==(n=v.items[v.activeItemIndex])?void 0:n.id,"aria-labelledby":null==(i=v.buttonRef.current)?void 0:i.id,id:s,onKeyDown:S,onKeyUp:R,role:"menu",tabIndex:0,ref:b};return(0,a.sY)({ourProps:Z,theirProps:u,slot:T,defaultTag:"div",features:O,visible:C,name:"Menu.Items"})})),L=(0,a.yV)((function(e,t){let n=(0,m.M)(),{id:i=`headlessui-menu-item-${n}`,disabled:r=!1,...s}=e,[c,f]=P("Menu.Item"),v=null!==c.activeItemIndex&&c.items[c.activeItemIndex].id===i,x=(0,o.useRef)(null),y=(0,d.T)(t,x);(0,u.e)((()=>{if(c.__demoMode||0!==c.menuState||!v||0===c.activationTrigger)return;let e=(0,l.k)();return e.requestAnimationFrame((()=>{var e,t;null==(t=null==(e=x.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}),[c.__demoMode,x,v,c.menuState,c.activationTrigger,c.activeItemIndex]);let g=(0,k.x)(x),b=(0,o.useRef)({disabled:r,domRef:x,get textValue(){return g()}});(0,u.e)((()=>{b.current.disabled=r}),[b,r]),(0,u.e)((()=>(f({type:5,id:i,dataRef:b}),()=>f({type:6,id:i}))),[b,i]);let w=(0,j.z)((()=>{f({type:1})})),I=(0,j.z)((e=>{if(r)return e.preventDefault();f({type:1}),(0,h.wI)(c.buttonRef.current)})),C=(0,j.z)((()=>{if(r)return f({type:2,focus:p.T.Nothing});f({type:2,focus:p.T.Specific,id:i})})),S=(0,N.g)(),R=(0,j.z)((e=>S.update(e))),T=(0,j.z)((e=>{S.wasMoved(e)&&(r||v||f({type:2,focus:p.T.Specific,id:i,trigger:0}))})),Z=(0,j.z)((e=>{S.wasMoved(e)&&(r||v&&f({type:2,focus:p.T.Nothing}))})),E=(0,o.useMemo)((()=>({active:v,disabled:r,close:w})),[v,r,w]);return(0,a.sY)({ourProps:{id:i,ref:y,role:"menuitem",tabIndex:!0===r?void 0:-1,"aria-disabled":!0===r||void 0,disabled:void 0,onClick:I,onFocus:C,onPointerEnter:R,onMouseEnter:R,onPointerMove:T,onMouseMove:T,onPointerLeave:Z,onMouseLeave:Z},theirProps:s,slot:E,defaultTag:F,name:"Menu.Item"})})),z=Object.assign(M,{Button:A,Items:D,Item:L})}}]);