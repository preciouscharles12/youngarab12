(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8082],{2485:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/brand",function(){return t(48932)}])},48176:function(n,e,t){"use strict";var i=t(85893),r=t(25675),o=t.n(r);e.Z=function(n){var e=n.imgSrc,t=n.title,r=n.subtitle,a=n.cta;return(0,i.jsxs)("div",{className:"flex flex-col gap-5 items-center max-w-100",children:[e&&(0,i.jsx)("div",{className:"relative w-72 h-24 max-w-full",children:(0,i.jsx)(o(),{src:e,alt:t,layout:"fill",objectFit:"cover"})}),(0,i.jsxs)("div",{className:"flex flex-col gap-2 text-center",children:[(0,i.jsx)("p",{className:"body-lg font-bold text-black",children:t}),(0,i.jsx)("p",{className:"text-gray-500",children:r})]}),a]})}},67568:function(n,e,t){"use strict";t.d(e,{S:function(){return u},Z:function(){return c}});var i=t(10253),r=t(85893),o=t(61437),a=t(11355),l=t(67294),s=t(3732);function u(n){var e=n.children,t=n.text,i=n.dirty;n.className;return(0,r.jsx)(a.u,{as:l.Fragment,show:i,enter:"transition-opacity duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsxs)("div",{className:"sticky bottom-0 z-50 flex items-center justify-between gap-3 p-4 sm:px-6 bg-white border-t border-gray-100 lg:rounded-b-lg",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:null!==t&&void 0!==t?t:"Save changes?"}),(0,r.jsx)("div",{className:"flex items-center gap-3",children:e})]})})}function c(n){var e=n.children,t=n.dirty,a=n.className,l=n.fullBorder,u=void 0!==l&&l,c=(0,i.Z)((0,o.Z)("layout.sidebarOpen"),2),d=c[0];c[1];return(0,r.jsx)("div",{className:(0,s.AK)(t?"bottom-0 opacity-100":"-bottom-80 opacity-0","fixed left-0 right-0 z-90 lg:z-50 bg-gray-50 transition-all duration-300 lg:rounded-b-lg",d?"md:left-[15.5rem]":"md:left-24",u?"md:px-0":"md:px-6",a),children:(0,r.jsx)("div",{className:(0,s.AK)("flex items-center justify-between gap-3 py-4 px-6 border-t border-gray-300",u?"md:px-6":"md:px-0"),children:e})})}},68551:function(n,e,t){"use strict";var i=t(47568),r=t(97582),o=t(85893),a=t(67294),l=t(67568),s=t(52077),u=t(3732);e.Z=function(n){var e=n.data,t=n.loading,c=n.setData,d=n.onSave,v=n.onDiscard,f=n.dirty,g=n.isReady,p=void 0===g||g,b=function(){m(!1),c&&c(Z?(0,u.p$)(Z):null),v&&v(Z)},h=(0,a.useState)(!1),y=h[0],m=h[1],x=(0,a.useState)(e?(0,u.p$)(e):null),Z=x[0],_=x[1];function j(){return w.apply(this,arguments)}function w(){return(w=(0,i.Z)((function(){return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return _(e?(0,u.p$)(e):null),d?[4,d(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return m(!1),[2]}}))}))).apply(this,arguments)}return(0,a.useEffect)((function(){p&&(JSON.stringify(e)!==JSON.stringify(Z)?m(!0):m(!1))}),[e]),(0,a.useEffect)((function(){p&&(_(e?(0,u.p$)(e):null),m(!1))}),[p]),{DirtyBar:function(n){var e=n.className,i=n.sidePanel,r=void 0!==i&&i,a=n.label,u=void 0===a?"Unsaved":a,c=n.discardText,d=void 0===c?"Discard":c,v=n.saveText,g=void 0===v?"Save":v,p=n.fullBorder;return r?(0,o.jsx)(l.S,{dirty:y,children:(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)(s.Z,{className:"secondary",disabled:t,onClick:function(){return b()},children:"Discard"}),(0,o.jsx)(s.Z,{className:"primary",onClick:function(){return j()},loading:t,children:g})]})}):(0,o.jsxs)(l.Z,{dirty:null!==f&&void 0!==f?f:y,className:e,fullBorder:p,children:[(0,o.jsx)("p",{className:"text-sm font-medium",children:u}),(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)(s.Z,{className:"light",disabled:t,onClick:function(){return b()},children:d}),(0,o.jsx)(s.Z,{className:"primary",onClick:function(){return j()},loading:t,force:!0,children:g})]})]})},dirty:null!==f&&void 0!==f?f:y,discard:b,save:j,default:Z,setDefault:_,refresh:function(n){m(!1),_(e?(0,u.p$)(e):null),c&&c(n)}}}},48932:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return A}});var i=t(47568),r=t(99534),o=t(29815),a=t(97582),l=t(85893),s=t(67294),u=t(61437),c=t(42734),d=t(98828),v=t(84181),f=t(26042),g=t(69396),p=t(10253),b=t(11215),h=t(23810),y=t(51523),m=t(68551),x=t(47892),Z=t(40364),_=t(3732),j=t(60728),w=t(43714),N=t(92265),S=t(52699),B=t(66261);function T(n){var e=n.branding,t=n.loadingBrand,o=n.discardBrand,c=n.saveBrand,v=n.rebuildBranding,T=n.generateSection,C=n.sectionsBuilt,k=n.setSectionsBuilt,E=n.updateBranding,O=n.mood,A=(0,s.useState)(!1),D=A[0],F=A[1],P=(0,s.useState)(!0),L=P[0],I=P[1],J=(0,s.useState)(!1),R=J[0],V=J[1],$=(0,s.useState)(null),z=$[0],W=$[1],Y=(0,s.useState)(!1),G=Y[0],K=Y[1],Q=(0,w.Z)().track,U=(0,p.Z)((0,u.Z)("branding.oldStructure",null),2),X=U[0],q=U[1],H=(0,b.Z)().current,M=(0,N.Z)(),nn=M.aiSettings,en=M.setAiSettings,tn=M.saveAiSettings,rn=M.loadingAiSettings,on=(0,S.Z)(),an=on.config,ln=on.setConfig,sn=on.loading,un=on.saveConfig,cn=(0,x.D)().generatePngUrl,dn=(0,d.Z)({shouldFetchWebsite:!1}),vn=dn.saveColorsAndLogo,fn=dn.applyBrandToWebsite,gn=dn.getWebsite,pn=!(!z||z&&!z.generatedAt&&z.generate),bn=(0,j.Z)(),hn=bn.confirm,yn=bn.ConfirmDialog,mn=(e.business,(0,r.Z)(e,["business"]));function xn(){return xn=(0,i.Z)((function(){var n,t,i,r,o,s,u,c,d;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return(null===e||void 0===e?void 0:e.logo)?(c=(null===e||void 0===e||null===(n=e.logo)||void 0===n||null===(t=n.custom)||void 0===t?void 0:t.enabled)?null===e||void 0===e||null===(i=e.logo)||void 0===i||null===(r=i.custom)||void 0===r||null===(o=r.secondary)||void 0===o?void 0:o.light:null,(!(null===e||void 0===e||null===(s=e.logo)||void 0===s?void 0:s.showIcon)||!(null===e||void 0===e||null===(u=e.logo)||void 0===u?void 0:u.icon))&&!c?(q((function(n){return(0,g.Z)((0,f.Z)({},n),{logo:null})})),[3,4]):[3,1]):[3,4];case 1:return c?(q((function(n){return(0,g.Z)((0,f.Z)({},n),{logo:c})})),[3,4]):[3,2];case 2:return[4,cn((0,l.jsx)(Z.q,{branding:e,variant:"secondary",version:"light",scale:4}),"invoice-email-logo")];case 3:d=a.sent(),q((function(n){return(0,g.Z)((0,f.Z)({},n),{logo:{url:d,type:"logo-secondary"}})})),a.label=4;case 4:return K(!1),[2]}}))})),xn.apply(this,arguments)}var Zn=(0,m.Z)({data:an,setData:ln,isReady:!!an&&!sn,onSave:(0,i.Z)((function(){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,un(an)];case 1:return n.sent(),[2]}}))}))}),_n=Zn.dirty,jn=Zn.discard,wn=Zn.save,Nn=(0,m.Z)({data:nn,setData:en,isReady:!!nn&&!rn,onSave:(0,i.Z)((function(){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,tn(nn)];case 1:return n.sent(),[2]}}))}))}),Sn=Nn.dirty,Bn=Nn.discard,Tn=Nn.save,Cn=(0,m.Z)({data:mn,onSave:(0,i.Z)((function(){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,c()];case 1:return n.sent(),[2]}}))})),onDiscard:function(){o()}}),kn=Cn.dirty,En=Cn.discard,On=Cn.save,An=Cn.default,Dn=Cn.refresh,Fn=(0,m.Z)({data:X,setData:q,isReady:!!X&&!L,onSave:(0,i.Z)((function(){var n,e;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,vn(X)];case 1:return e=(null!==(n=t.sent())&&void 0!==n?n:{}).logo,Jn((0,g.Z)((0,f.Z)({},X),{logo:e})),pn?[3,3]:[4,fn()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))}),Pn=Fn.dirty,Ln=Fn.discard,In=Fn.save,Jn=Fn.refresh,Rn=(0,m.Z)({dirty:_n||kn||Pn||Sn,loading:t||L||D||G||rn,onDiscard:function(){jn(),En(),Ln(),Bn(),Q("brand:discarded",{brandingId:e._id})},onSave:(0,i.Z)((function(){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return F(!0),kn?[4,On()]:[3,2];case 1:n.sent(),n.label=2;case 2:return Pn?[4,In()]:[3,4];case 3:n.sent(),n.label=4;case 4:return _n?[4,wn()]:[3,6];case 5:n.sent(),n.label=6;case 6:return Sn?[4,Tn()]:[3,8];case 7:n.sent(),n.label=8;case 8:return F(!1),Q("brand:saved",{brandingId:e._id}),[2]}}))}))}),Vn=Rn.DirtyBar,$n=Rn.dirty,zn=(0,y.Z)("".concat(window.location.protocol,"//").concat(window.location.host,"/brand-builder?bid=").concat(e._id)),Wn=zn.copied,Yn=zn.copy,Gn=zn.reset;function Kn(){return Kn=(0,i.Z)((function(n,t){var i;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return k((function(e){return e.map((function(e){return e.type===n?(0,g.Z)((0,f.Z)({},e),{loading:!0}):e}))})),[4,T(n,t)];case 1:return r.sent(),k((function(e){return e.map((function(e){return e.type===n?(0,g.Z)((0,f.Z)({},e),{loading:!1}):e}))})),Q("brand:regenerate-section",{from:"brand",type:n,vertical:null===e||void 0===e||null===(i=e.business)||void 0===i?void 0:i.vertical,mood:O,data:t}),[2]}}))})),Kn.apply(this,arguments)}function Qn(){return(Qn=(0,i.Z)((function(){return(0,a.__generator)(this,(function(n){try{hn("Apply brand to website","Are you sure you want to copy your brand styles to your website? This can't be undone.",(0,i.Z)((function(){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,fn()];case 1:return n.sent()&&(_.Z9.success("Your brand has been applied to your website!"),Q("brand:applied-to-website",{brandingId:e._id})),[2]}}))})))}catch(t){_.Z9.error(t.message)}return[2]}))}))).apply(this,arguments)}return(0,s.useEffect)((function(){var n=setTimeout((function(){Gn()}),2e3);return function(){clearTimeout(n)}}),[Wn]),(0,s.useEffect)((function(){var n,t=null;kn&&((null===e||void 0===e?void 0:e.__v)!==(null===An||void 0===An?void 0:An.__v)?Dn(mn):(JSON.stringify(null===e||void 0===e?void 0:e.logo)===JSON.stringify(null===An||void 0===An?void 0:An.logo)&&JSON.stringify(null===e||void 0===e?void 0:e.fonts)===JSON.stringify(null===An||void 0===An?void 0:An.fonts)||(K(!0),t=(0,_.Ds)((function(){!function(){xn.apply(this,arguments)}()}),1500)()),JSON.stringify(null===e||void 0===e?void 0:e.colors)!==JSON.stringify(null===An||void 0===An||null===(n=An.branding)||void 0===n?void 0:n.colors)&&function(){var n,t,i=null===e||void 0===e||null===(n=e.colors)||void 0===n?void 0:n.find((function(n){return"#FFFFFF"===(0,_.$O)(n.color)})),r=null!==(t=null===i||void 0===i?void 0:i.color)&&void 0!==t?t:"#000000";q((function(n){return(0,g.Z)((0,f.Z)({},n),{secondaryColor:r})}))}()));return function(){t&&(clearTimeout(t),K(!1))}}),[null===e||void 0===e?void 0:e.logo,null===e||void 0===e?void 0:e.fonts,null===e||void 0===e?void 0:e.colors,kn]),(0,s.useEffect)((function(){function n(){return(n=(0,i.Z)((function(){var n,e;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,gn()];case 1:return n=t.sent(),e={logo:null===n||void 0===n?void 0:n.logo,primaryColor:null===n||void 0===n?void 0:n.primaryColor,secondaryColor:null===n||void 0===n?void 0:n.secondaryColor},W(n),Jn(e),I(!1),[2]}}))}))).apply(this,arguments)}(null===H||void 0===H?void 0:H._id)&&function(){n.apply(this,arguments)}()}),[null===H||void 0===H?void 0:H._id]),(0,l.jsxs)("div",{className:"flex flex-col",style:{minHeight:"calc(100vh - 200px)"},children:[(0,l.jsxs)("div",{className:"flex items-center justify-end gap-3 mb-4 lg:mb-6 w-full",children:[(null===e||void 0===e?void 0:e._id)&&(0,l.jsxs)("button",{className:"secondary gap-2",disabled:t,onClick:Yn,children:[(0,l.jsx)(B.Z,{icon:Wn?"CheckIcon":"DocumentDuplicateIcon",className:"w-4 h-4"}),(0,l.jsx)("span",{children:Wn?"Copied":"Copy link"})]}),(0,l.jsxs)("button",{className:"secondary gap-2",disabled:t,onClick:function(){return v()},children:[(0,l.jsx)(B.Z,{icon:"BoltIcon",className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Regenerate"})]})]}),(0,l.jsx)(h.Z,{branding:e,setBranding:E,business:(0,g.Z)((0,f.Z)({},H),{config:an}),sectionsBuilt:C,onRegenerate:function(n,e){return Kn.apply(this,arguments)},openRegenerateLogo:R,setOpenRegenerateLogo:V,mood:O,applyBrandToWebsite:$n||D?null:function(){return Qn.apply(this,arguments)}}),!L&&!sn&&(0,l.jsx)(Vn,{}),(0,l.jsx)(yn,{confirmText:"Apply"})]})}var C=t(48176),k=t(16494),E=t(34838),O=t(72521);function A(){var n,e,t,f,g,p,h,y;(0,u.Z)("layout.title","Brand",!0);var m,x,Z=(0,s.useState)(Object.values(c.VE).map((function(n){return{type:n,loading:!1}}))),j=Z[0],N=Z[1],S=(0,s.useState)(0),B=S[0],A=S[1],D=(0,s.useState)(!0),F=D[0],P=D[1],L=Object.keys(c.VE).length,I=(0,s.useState)(!1),J=I[0],R=I[1],V=(0,w.Z)().track,$=(0,d.Z)(),z=$.website,W=$.websiteLogoToBrand,Y=$.websiteFontsToBrand,G=$.websitePaletteToBrand,K=(0,b.Z)().current,Q={name:null===K||void 0===K?void 0:K.name,vertical:(0,O.x)(K),location:null===K||void 0===K||null===(n=K.Location)||void 0===n?void 0:n.country,outputLanguage:null!==(m=null===K||void 0===K||null===(e=K.settings)||void 0===e||null===(t=e.ai)||void 0===t?void 0:t.language)&&void 0!==m?m:"en",voiceAndTone:null===K||void 0===K||null===(f=K.settings)||void 0===f||null===(g=f.ai)||void 0===g?void 0:g.voiceAndTone},U=(0,c.ZP)(Q),X=U.branding,q=U.updateBranding,H=U.generateSection,M=U.loading,nn=U.save,en=U.discard,tn=(X.business,(0,r.Z)(X,["business"])),rn=null!==(x=null===X||void 0===X||null===(p=X.colorPalette)||void 0===p||null===(h=p.Palette)||void 0===h||null===(y=h.themes)||void 0===y?void 0:y[0])&&void 0!==x?x:(0,_.kd)(c.JV).id;function on(n,e){return an.apply(this,arguments)}function an(){return(an=(0,i.Z)((function(n,e){var t,i;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,H(n,e)];case 1:return r.sent(),t={type:n,loading:!1},i=v.f[n].map((function(n){return{type:n,loading:!1}})),N((function(n){return(0,o.Z)(n).concat([t],(0,o.Z)(i))})),A((function(e){return e+1+v.f[n].length})),[2]}}))}))).apply(this,arguments)}var ln=function(){var n=(0,i.Z)((function(n){var e;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return e=[on(c.VE.LOGO,{logo:null===n||void 0===n?void 0:n.logo,aiLogo:null===n||void 0===n?void 0:n.aiLogo}),on(c.VE.FONTS,{fonts:null===n||void 0===n?void 0:n.fonts}),on(c.VE.COVER,{colorPalette:null===n||void 0===n?void 0:n.colorPalette,mood:rn}),on(c.VE.VOICE_AND_TONE,{voiceAndTone:null===n||void 0===n?void 0:n.voiceAndTone})],[4,Promise.all(e)];case 1:return t.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}(),sn=function(){var n=(0,i.Z)((function(n){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return q({business:Q},!0),N([]),A(0),P(!1),[4,ln(n)];case 1:return e.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}(),un=function(){var n=(0,i.Z)((function(){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,sn({logo:null===X||void 0===X?void 0:X.logo})];case 1:return n.sent(),V("brand:regenerated",{from:"brand",vertical:Q.vertical,mood:rn,lang:Q.outputLanguage}),[2]}}))}));return function(){return n.apply(this,arguments)}}(),cn=function(){var n=(0,i.Z)((function(){return(0,a.__generator)(this,(function(n){return R(!0),sn({logo:W(z),fonts:Y(z),colorPalette:G(z),voiceAndTone:null===Q||void 0===Q?void 0:Q.voiceAndTone}),V("brand:generated",{from:"brand",vertical:Q.vertical,mood:rn,lang:Q.outputLanguage}),[2]}))}));return function(){return n.apply(this,arguments)}}();return(0,s.useEffect)((function(){M||q({})}),[M,K]),(0,_.Qr)(X)&&M?(0,l.jsx)(k.Z,{variant:"box"}):(0,l.jsxs)(l.Fragment,{children:[(0,_.Qr)(tn)&&!M?(0,l.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,l.jsx)(C.Z,{className:"m-auto",imgSrc:(0,_.sd)("brand/EmptyBranding.svg"),title:"No brand kit yet",subtitle:"Take your brand to the next level with an AI-generated logo and social assets. Then apply it to your website, invoices and\xa0emails.",cta:(0,l.jsx)("button",{className:"button primary",onClick:cn,children:"Generate brand"})})}):(0,l.jsx)(T,{branding:X,updateBranding:q,loadingBrand:M,saveBrand:nn,discardBrand:en,generateSection:H,rebuildBranding:un,sectionsBuilt:j,setSectionsBuilt:N,mood:rn}),!F&&(0,l.jsx)("div",{className:"fixed inset-0 z-110 bg-gray-900 bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-6",children:(0,l.jsx)(E.Z,{show:!F,text:J?"Your brand is being generated...":"Your brand is being refreshed...",current:B,total:L,onComplete:function(){P(!0)}})})]})}A.auth=!0}},function(n){n.O(0,[6440,7333,696,1033,361,9177,780,2749,671,3056,9435,7286,2734,1125,1273,8185,4181,9774,2888,179],(function(){return e=2485,n(n.s=e);var e}));var e=n.O();_N_E=e}]);