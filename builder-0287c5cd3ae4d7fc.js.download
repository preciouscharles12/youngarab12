(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9862,9470],{64938:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/website/builder",function(){return t(60405)}])},59522:function(e,n,t){"use strict";t.d(n,{X:function(){return C}});var i,o=t(47568),l=t(26042),s=t(69396),r=t(29815),a=t(97582),c=t(85893),u=t(67294),d=t(4519),v=t(59435),m=t(16494),f=t(66261),p=t(51121),h=t(75131),g=t(3732),x=t(80360),b=t(38986),w=t(246),y=t.n(w),j=t(9008),k=t.n(j),N=[{id:"popular",name:"Popular"},{id:"recommended",name:"Recommended"},{id:"alphabetical",name:"Alphabetical"}],Z={query:"",sort:"popular"};function C(e){var n,t=e.field,b=e.scrollRef,w=e.value,j=e.onChange,k=(0,u.useState)(!1),C=k[0],_=k[1],P=(0,u.useState)(Z),E=P[0],I=P[1],T=(0,u.useState)((0,g.tl)("pack-fonts")),B=T[0],A=T[1],O=(0,u.useState)((0,g.tl)("google-fonts")),R=O[0],D=O[1],W=(0,u.useState)([]),F=W[0],z=W[1],G=(0,u.useState)(1),L=G[0],M=G[1],V=(0,u.useState)(!0),$=V[0],K=V[1],q=(0,u.useState)(!1),H=q[0],U=q[1],J=(0,d.Z)().get,Y=null===w||void 0===w||null===(n=w[t||"head"])||void 0===n?void 0:n.name,X=function(){var e=(0,o.Z)((function(){var e,n,t,i,o,l,s,r,c;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return _(!0),[4,J("/website/get-fonts")];case 1:if((e=a.sent())&&!0===e.status&&e.content){n=(0,v.UU)(e.content),t=[],i=!0,o=!1,l=void 0;try{for(s=function(){var e=c.value;e.head&&-1===t.findIndex((function(n){return n.id===e.head.name}))&&t.push({id:e.head.name,name:e.head.name,family:e.head.family,weight:e.head.weight,style:e.head.style||"normal",variants:[e.head.weight.toString()],source:e.head.source,category:"head"}),e.body&&-1===t.findIndex((function(n){return n.id===e.body.name}))&&t.push({id:e.body.name,name:e.body.name,family:e.body.family,weight:e.body.weight,style:e.body.style||"normal",variants:[e.body.weight.toString()],source:e.body.source,category:"body"})},r=n[Symbol.iterator]();!(i=(c=r.next()).done);i=!0)s()}catch(u){o=!0,l=u}finally{try{i||null==r.return||r.return()}finally{if(o)throw l}}(0,g.Fs)("pack-fonts",t),A(t)}return _(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=(0,o.Z)((function(){return(0,a.__generator)(this,(function(e){return _(!0),fetch("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyCYy4zMaR3SW8BoTio3AtZjFXo8EMqpdnk&sort=popularity&subset=latin",{method:"GET"}).then((function(e){return e.json()})).then((function(e){if(null===e||void 0===e?void 0:e.items){var n=e.items.map((function(e){var n=e.variants.map((function(e){return"regular"===e?"400":"italic"===e?"400italic":e})),t=n.find((function(e){return e.includes("400")}))||n[0];return{id:e.family,name:e.family,family:"'".concat(e.family,"', ").concat(e.category),weight:t.replace("italic",""),style:t.includes("italic")?"italic":"normal",variants:n}}));(0,g.Fs)("google-fonts",n),D(n)}})).catch((function(e){console.error("Error:",e)})),_(!1),[2]}))}));return function(){return e.apply(this,arguments)}}(),ee=function(e){var n=[];if("recommended"===E.sort&&B?n=(0,g.p$)(B):R&&(n=(0,g.p$)(R)),null===n||void 0===n?void 0:n.length){if("alphabetical"===E.sort&&(n=n.sort((function(e,n){return e.name.localeCompare(n.name)}))),n=n.filter((function(e){return!e.category||e.category.includes(t)})),e)n=n.filter((function(n){return n.name.toLowerCase().includes(e.toLowerCase())}));else if(Y){var i=n.find((function(e){return e.name===Y}));i&&(n=[i].concat((0,r.Z)(n.filter((function(e){return e.name!==Y})))))}z(n)}};return(0,u.useEffect)((function(){return M(1),clearTimeout(i),i=setTimeout((function(){B&&R&&ee(E.query)}),E.query?400:10),function(){clearTimeout(i)}}),[E.query]),(0,u.useEffect)((function(){M(1),B&&R&&ee()}),[E.sort]),(0,u.useEffect)((function(){ee()}),[t,B,R]),(0,u.useEffect)((function(){B||X(),R||Q()}),[]),(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsxs)("div",{className:"relative mb-4",children:[(0,c.jsx)("span",{className:"absolute top-1/2 z-10 pl-2.5 -translate-y-1/2",children:C?(0,c.jsx)(m.Z,{variant:"icon",className:"w-5 h-5 text-gray-500"}):(0,c.jsx)(f.Z,{icon:"SearchIcon",className:"w-5 h-5 text-gray-500"})}),(0,c.jsx)(p.Z,{placeholder:"Search",inputClassName:"!pl-9",value:E.query,onChange:function(e){return I((function(n){return(0,s.Z)((0,l.Z)({},n),{query:e})}))}})]}),(0,c.jsx)(x.Z,{value:N.find((function(e){return e.id===E.sort})),values:N,onChange:function(e){return I((function(n){return(0,s.Z)((0,l.Z)({},n),{sort:e.id})}))}})]}),(0,c.jsx)(h.E,{value:Y,onChange:function(e){var n=R.find((function(n){return n.id===e}));j(n)},children:(0,c.jsx)(y(),{loadMore:function(){return function(e){(null===e||void 0===e?void 0:e.length)&&(H||(U(!0),M((function(e){return e+1})),(null===e||void 0===e?void 0:e.length)<30*L&&K(!1),U(!1)))}(F)},hasMore:$,loader:(0,c.jsx)("div",{className:"flex justify-center pt-8 w-full",children:(0,c.jsx)(m.Z,{variant:"icon"})}),useWindow:!1,getScrollParent:function(){return null===b||void 0===b?void 0:b.current},children:null===F||void 0===F?void 0:F.slice(0,30*L).map((function(e,n){return(0,c.jsx)(h.E.Option,{value:e.name,className:"relative cursor-pointer",children:function(n){var t=n.checked;return(0,c.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,c.jsx)(S,{font:e}),t&&(0,c.jsx)(f.Z,{icon:"CheckIcon",className:"flex-shrink-0 w-5 h-5 text-indigo-600"})]})}},"font-google-".concat(n))}))})})]})}var S=function(e){var n=e.font;return(0,c.jsxs)(c.Fragment,{children:[(null===n||void 0===n?void 0:n.name)&&(0,c.jsx)(k(),{children:(0,c.jsx)("link",{href:"".concat((0,b.wM)("google"),"?").concat((0,b.pr)(n,!0),"&display=swap"),rel:"stylesheet",crossOrigin:"anonymous"})}),(0,c.jsx)("p",{className:"heading-small",style:(0,b.lk)(n,20,28),children:null===n||void 0===n?void 0:n.name})]})}},49470:function(e,n,t){"use strict";t.d(n,{Z:function(){return k}});var i=t(47568),o=t(10253),l=t(97582),s=t(85893),r=t(52077),a=t(51121),c=t(4519),u=t(67294),d=t(41664),v=t.n(d),m=t(3732),f=t(66261),p=t(11163),h=t(30120),g=t(16494),x=t(33299),b=t(61437),w=t(26688),y=t(25675),j=t.n(y);function k(e){var n,t,d=e.className,y=e.paywall,k=void 0===y?"global":y,N=e.redirectUrl,Z=e.onBeforeConnect,C=e.onlyExchangeToken,S=(0,o.Z)((0,b.Z)("layout.paywall"),2)[1],_=(0,o.Z)((0,b.Z)("websiteBuilder.paywall"),2)[1],P=(0,u.useState)(!1),E=P[0],I=P[1],T=(0,u.useState)(null),B=T[0],A=T[1],O=(0,u.useState)(""),R=O[0],D=O[1],W=(0,u.useState)(!1),F=W[0],z=W[1],G=(0,u.useState)(!1),L=G[0],M=G[1],V=(0,w.Z)(),$=V.confirm,K=V.ConfirmDialog,q=(0,p.useRouter)(),H=(0,c.Z)(),U=H.get,J=H.post,Y="gmail"===(null===B||void 0===B||null===(n=B.business)||void 0===n||null===(t=n.nylas)||void 0===t?void 0:t.provider)?"Disconnect Google Account":"Disconnect Email",X=(0,u.useState)(null),Q=X[0],ee=X[1],ne=(0,x.useSession)().data,te=function(){var e=(0,i.Z)((function(){var e,n;return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return I(!0),[4,U("/business/get-config")];case 1:return(e=t.sent()).status&&e.content?(n=e.content,(0,m.Fs)("business.config",n),A(n)):A(null),I(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=(0,i.Z)((function(){return(0,l.__generator)(this,(function(e){return $("Disconnect email","Are you sure you want to unsync your emails?",(0,s.jsxs)("div",{children:["Disconnecting your Google Account will result in:",(0,s.jsxs)("ul",{className:"list-disc",children:[(0,s.jsx)("li",{children:"Disconnection of your email and deletion of all synced messages from the CRM."}),(0,s.jsx)("li",{children:"Deletion of your calendar and services within Scheduling."}),(0,s.jsx)("li",{children:"Removal of the Scheduling section from your website."})]})]}),"",(0,i.Z)((function(){var e;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return I(!0),[4,J("/nylas/disconnect",{}).catch(console.log)];case 1:return(e=n.sent())&&!0===e.status?q.reload():(m.Z9.error(e.message),I(!1)),[2]}}))})),null),[2]}))}));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=(0,i.Z)((function(){var e;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return ee(null),(0,m.oH)(R)?(I(!0),[4,J("/nylas/detect-provider",{email:R}).catch(console.error)]):(m.Z9.error("Invalid email"),[2]);case 1:return(e=n.sent())&&!0===e.status&&e.content?"gmail"!==e.content.provider?ee("Please provide a Google Account email"):Z?Z(le):le():m.Z9.error(e.message),I(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),le=function(){var e=(0,i.Z)((function(){var e;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return I(!0),[4,J("/nylas/authorize",{email:R,redirectUrl:N}).catch(console.error)];case 1:return(e=n.sent())&&!0===e.status&&e.content?[4,q.push(e.content.redirectURL)]:[3,3];case 2:return n.sent(),[3,4];case 3:m.Z9.error(e.message),I(!1),n.label=4;case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){var e,n,t,i,o;B&&(D(null===B||void 0===B||null===(e=B.office)||void 0===e?void 0:e.email),z((null===B||void 0===B||null===(n=B.business)||void 0===n||null===(t=n.nylas)||void 0===t?void 0:t.token)&&!1===(null===B||void 0===B||null===(i=B.business)||void 0===i||null===(o=i.nylas)||void 0===o?void 0:o.invalid)))}),[B]),(0,u.useEffect)((function(){te()}),[]),(0,u.useEffect)((function(){var e,n,t,i,o;(te(),(null===q||void 0===q||null===(e=q.query)||void 0===e?void 0:e.code)&&(null===q||void 0===q||null===(n=q.query)||void 0===n?void 0:n.state))&&J("/nylas/exchange-token",{code:null===q||void 0===q||null===(i=q.query)||void 0===i?void 0:i.code,validationHash:null===q||void 0===q||null===(o=q.query)||void 0===o?void 0:o.state}).then((function(e){e&&!0===e.status?(q.replace(q.pathname,void 0,{shallow:!0}),te(),m.Z9.success("Email connected!")):m.Z9.error(e.message)})).catch(console.log);(null===q||void 0===q||null===(t=q.query)||void 0===t?void 0:t.id)&&q.replace("/crm/settings",void 0,{shallow:!0})}),[q]),(0,u.useEffect)((function(){M((0,m.oH)(R))}),[R]),C?null:(0,s.jsx)("div",{className:d,children:E?(0,s.jsx)(g.Z,{variant:"list"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("p",{className:"font-bold",children:"Google Calendar sync"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Connect your Google account to sync your Google Calendar with Scheduling"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 mt-4 md:mt-6",children:[(0,s.jsxs)("div",{className:(0,m.AK)("flex flex-col gap-2 md:items-start"),children:[(0,s.jsx)(a.Z,{error:Q,onChange:function(e){return D(e)},disabled:F,value:R,className:"w-full",label:"Email",placeholder:"Enter your email"}),!F&&(0,s.jsx)(r.Z,{loading:E,disabled:!L,onClick:function(){var e,n,t;(null===ne||void 0===ne||null===(e=ne.user)||void 0===e||null===(n=e.plan)||void 0===n||null===(t=n.features)||void 0===t?void 0:t.includes("scheduler"))?oe():"global"===k?S(!0):_(!0)},className:"light flex-shrink-0",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-5 h-5 relative mr-4 flex-none",children:(0,s.jsx)(j(),{unoptimized:!0,src:(0,m.sd)("google-logo.png"),layout:"fill",alt:"Google"})}),"Connect with Google"]})})]}),F?(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex gap-2 px-3 py-2.5 bg-green-50 text-green-700 items-center rounded-xl",children:[(0,s.jsx)(f.Z,{icon:"CheckCircleSolidIcon",className:"w-4 h-4"}),(0,s.jsxs)("p",{children:["Your email has been synced since ",h.ou.fromISO(B.business.nylas.connectedAt).toFormat("MMM dd, yyyy")]})]}),E?(0,s.jsxs)(r.Z,{className:"pl-2 font-medium inline-flex items-center !text-red-700 gap-1",children:[(0,s.jsx)("span",{className:"text-sm",children:"Disconnecting..."}),(0,s.jsx)(g.Z,{variant:"icon"})]}):(0,s.jsx)(r.Z,{onClick:ie,loading:E,className:"link max-w-60",children:(0,s.jsx)("span",{className:"text-red-700",children:Y})})]}):(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["By connecting your email, you agree to Durable's"," ",(0,s.jsx)(v(),{href:"https://durable.co/privacy-policy",children:(0,s.jsx)("a",{target:"_blank",rel:"noreferrer",className:"link",children:"Privacy Policy"})})," ","and"," ",(0,s.jsx)(v(),{href:"https://durable.co/terms-of-service",children:(0,s.jsx)("a",{target:"_blank",rel:"noreferrer",className:"link",children:"Terms of Service"})})]})]})]}),(0,s.jsx)(K,{confirmText:"Disconnect",attention:!0})]})})}},79454:function(e,n,t){"use strict";var i=t(85893),o=t(16494),l=t(67294),s=t(3732),r=t(38462);n.Z=function(e){var n=e.text,t=e.variant,a=(0,r.$G)("mars").t,c=(0,l.useState)(""),u=c[0],d=c[1],v=(0,l.useState)(a("buildingLoader")),m=v[0],f=v[1],p=(0,l.useState)(!1),h=p[0],g=p[1];return(0,l.useEffect)((function(){if(n){d(m),f(n),g(!0);var e=setTimeout((function(){d(n),g(!1)}),500);return function(){return clearTimeout(e)}}}),[n]),"old"===t?(0,i.jsx)("div",{className:"fixed inset-0 bg-black backdrop-blur-xs z-100 font-sans bg-opacity-20 flex flex-col items-center justify-center p-6",children:(0,i.jsx)("div",{className:"py-6 px-8 bg-white bg-opacity-95 rounded-lg shadow-lg",children:(0,i.jsx)(o.Z,{text:n})})}):(0,i.jsx)("div",{className:"fixed inset-0 z-110 bg-gray-900 bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-6",children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 md:gap-6",children:[(0,i.jsx)(o.Z,{variant:"full-logo"}),(0,i.jsxs)("ul",{className:"font-sans text-2xl leading-9 text-white text-center h-16 md:h-9 overflow-hidden",children:[(0,i.jsx)("li",{className:(0,s.AK)("flex items-center justify-center w-full h-16 md:h-9 translate-y-0 transition-transform duration-[0ms] delay-100",h&&"!duration-500 !-translate-y-full"),children:u}),(0,i.jsx)("li",{className:(0,s.AK)("flex items-center justify-center w-full h-16 md:h-9 translate-y-0 transition-transform duration-[0ms] delay-100",h&&"!duration-500 !-translate-y-full"),children:m})]})]})})}},78704:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var i=t(85893),o=t(72779),l=t(26911),s=t(14218),r=t(3732),a=t(51252);function c(e){var n=e.className;return(0,i.jsxs)("div",{className:(0,r.AK)("flex flex-col overflow-y-auto overflow-x-hidden no-scrollbar pointer-events-none",n),children:[(0,i.jsx)(s.default,{block:{generating:"block"}}),(0,i.jsx)(o.default,{block:{generating:"block",spacing:{top:"none",bottom:"none"}}}),(0,i.jsx)(a.default,{block:{generating:"block",spacing:{top:"small",bottom:"small"}}}),(0,i.jsx)(l.default,{block:{generating:"block",spacing:{top:"none",bottom:"small"}}})]})}},47022:function(e,n,t){"use strict";t.d(n,{Z:function(){return C}});var i=t(26042),o=t(69396),l=t(85893),s=t(47568),r=t(29815),a=t(97582),c=t(3732),u=t(16494),d=t(66261),v=t(72510),m=t(67294),f=t(4519),p=t(92265),h=t(66605),g=t(11215),x=t(72521),b=t(52699),w=t(51121),y=t(42734),j=(t(80360),t(76078)),k=[{id:"simplify",name:"Simplify writing",action:"Without changing its length, simplify writing on the following text",icon:"PencilAiIcon"},{id:"shorten",name:"Make it shorter",action:"Rewrite the following text using less words",icon:"ShorterIcon"},{id:"lengthen",name:"Make it longer",action:"Rewrite the following text using more words",icon:"LongerIcon"}],N={shorten:!0,lengthen:!0,spelling:!0,improve:!0,simplify:!0};function Z(e){var n,t,Z,C,S,_,P,E,I=e.children,T=e.prompt,B=e.data,A=e.onRegenerate,O=e.title,R=e.regenerate,D=void 0!==R&&R,W=e.className,F=void 0===W?"":W,z=e.options,G=void 0===z?N:z,L=(0,i.Z)({},N,G),M=(0,m.useState)(!1),V=M[0],$=M[1],K=(0,m.useState)(!1),q=K[0],H=K[1],U=(0,m.useState)(),J=U[0],Y=U[1],X=(0,m.useState)(),Q=X[0],ee=X[1],ne=(0,m.useState)([]),te=ne[0],ie=ne[1],oe=(0,m.useRef)(),le=(0,f.Z)().post,se=(0,p.Z)(),re=se.aiSettings,ae=se.setAiSettings,ce=se.saveAiSettings,ue=(0,g.Z)().current,de=(0,b.Z)().getAddressFromConfig,ve=(0,x.x)(ue),me=(de(),P=null===re||void 0===re?void 0:re.voiceAndTone,null!==(E=null===re||void 0===re?void 0:re.language)&&void 0!==E?E:"en"),fe=function(){var e=(0,s.Z)((function(e,n){var t,l,s;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,,2,3]),$(!0),[4,le("ai/generate",{prompt:e,data:(0,o.Z)((0,i.Z)({},n),{content:J,currentContent:te.join("\n"),voiceAndTone:Q,business:{vertical:ve,name:null===ue||void 0===ue?void 0:ue.name,location:de()},language:me})})];case 1:return(null===(t=r.sent())||void 0===t?void 0:t.status)&&(null===t||void 0===t?void 0:t.content)?"function"===typeof A&&A(null!==(l=t.content.text)&&void 0!==l?l:t.content):console.log("Error generating content:",null===t||void 0===t||null===(s=t.content)||void 0===s?void 0:s.generateId),[3,3];case 2:return $(!1),[7];case 3:return[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),pe=function(){var e=(0,s.Z)((function(e){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return ae((function(n){return(0,o.Z)((0,i.Z)({},n),{voiceAndTone:e})})),[4,ce(!1)];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}();return(0,m.useEffect)((function(){ee(null===re||void 0===re?void 0:re.voiceAndTone)}),[re]),(0,m.useEffect)((function(){if(q){var e=function(e){var n,t;"function"===typeof(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.closest)&&(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.closest(".generate-button"))!==oe.current&&H(!1)};return window.top.addEventListener("click",e),function(){return window.top.removeEventListener("click",e)}}}),[q]),(0,m.useEffect)((function(){(null===B||void 0===B?void 0:B.currentContent)&&ie((function(e){if(!e.includes(B.currentContent)){var n=(0,r.Z)(e).concat([B.currentContent]);return n.length>5&&n.shift(),n}return e}))}),[B]),(0,l.jsxs)("div",{className:(0,c.AK)(F,"generate-button"),ref:oe,children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("p",{className:"font-semibold",children:O}),(0,l.jsx)(h.Z,{alt:"Generate content using AI.",className:"",children:(0,l.jsx)("button",{disabled:V,onClick:function(){return H((function(e){return!e}))},className:(0,c.AK)("link flex items-center gap-1 text-label pr-0"),children:V?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:D?"Regenerating":"Generating"}),(0,l.jsx)(u.Z,{variant:"icon"})]}):(0,l.jsxs)(l.Fragment,{children:[!q&&(0,l.jsx)(d.Z,{icon:"StarsIcon",className:"w-4 h-4"}),(0,l.jsx)("span",{children:q?"Close":D?"Regenerate":"Generate"})]})})})]}),I,(0,l.jsx)("div",{className:(0,c.AK)("grid transition-all",q?"pt-2":"",V&&"pointer-events-none opacity-50"),style:{gridTemplateRows:q?"1fr":"0fr"},children:(0,l.jsx)("div",{className:"overflow-hidden",children:(0,l.jsxs)("div",{className:"bg-gray-50 px-4 py-4 rounded-lg",children:[k.filter((function(e){return L[e.id]})).map((function(e,n){var t,i,o,s,r=e.id,a=e.name,u=e.action,v=e.icon;return(0,l.jsxs)("div",{className:(0,c.AK)("flex items-center gap-2 hover:text-gray-700 cursor-pointer mb-3",["shorten"].includes(r)&&(null===(i=null===B||void 0===B||null===(t=B.currentContent)||void 0===t?void 0:t.split(" "))||void 0===i?void 0:i.length)<=4?"hidden":"",["simplify"].includes(r)&&(null===(s=null===B||void 0===B||null===(o=B.currentContent)||void 0===o?void 0:o.split(" "))||void 0===s?void 0:s.length)<=2?"hidden":""),onClick:function(){return fe("modify-text",{text:null===B||void 0===B?void 0:B.currentContent,action:u,language:me})},children:[(0,l.jsx)(d.Z,{icon:v,className:"w-5 h-5"}),(0,l.jsx)("span",{className:"text-label font-medium",children:a})]},"ai-action-".concat(n))})),(null===(n=k.filter((function(e){return L[e.id]})))||void 0===n?void 0:n.length)>0&&(!(k.find((function(e){return"shorten"===e.id}))&&(null===(Z=null===B||void 0===B||null===(t=B.currentContent)||void 0===t?void 0:t.split(" "))||void 0===Z?void 0:Z.length)<=4)||!(k.find((function(e){return"simplify"===e.id}))&&(null===(S=null===B||void 0===B||null===(C=B.currentContent)||void 0===C?void 0:C.split(" "))||void 0===S?void 0:S.length)<=2))&&(0,l.jsx)("hr",{className:"my-3"}),(0,l.jsxs)("h4",{className:"text-label font-medium mb-1 flex items-center gap-2 w-full",children:[(0,l.jsx)(d.Z,{icon:"ToneIcon",className:"w-5 h-5"})," Tone of voice",(0,l.jsxs)(j.Z,{closeOnSelect:!0,className:"ml-auto",button:(0,l.jsxs)("span",{className:" rounded-md bg-indigo-50 text-indigo-700 pl-2.5 pr-2 py-1 text-xs font-medium flex items-center gap-1 ",children:[null===(_=null===y.i4||void 0===y.i4?void 0:y.i4.find((function(e){return e.id===Q})))||void 0===_?void 0:_.name,(0,l.jsx)(d.Z,{icon:"ChevronDownSolidIcon",className:"w-4 h-4"})]}),itemsContainerClass:"md:!w-78 !overflow-y-auto md:overflow-hidden max-h-68 md:flex md:divide-x -mt-1",children:[(0,l.jsxs)("div",{className:"md:max-h-68 md:overflow-y-auto flex-1",children:[(0,l.jsx)(v.v.Item,{disabled:!0,children:(0,l.jsx)("div",{className:"flex px-4 py-2.5 text-gray-500 text-label cursor-pointer sticky top-0 bg-white",children:"Tone of voice"})}),y.i4.filter((function(e){return"tone"===e.type})).map((function(e,n){return(0,l.jsx)(v.v.Item,{onClick:function(){ee(e.id),pe(e.id)},children:(0,l.jsxs)("div",{className:"flex items-center gap-1.5 px-4 py-2.5 hover:bg-gray-100 cursor-pointer",children:[(0,l.jsx)("span",{className:"text-sm font-medium whitespace-nowrap",children:e.name}),(0,l.jsx)(d.Z,{icon:"CheckCircleSolidIcon",className:(0,c.AK)("w-4 h-4 text-indigo-700 transition-all ml-auto flex-shrink-0",e.id===Q?"opacity-100":"opacity-0")})]})},"tone-".concat(n))}))]}),(0,l.jsxs)("div",{className:" flex-1 flex-shrink",children:[(0,l.jsx)(v.v.Item,{disabled:!0,children:(0,l.jsx)("div",{className:"flex px-4 py-2.5 text-gray-500 text-label cursor-pointer sticky top-0 bg-white",children:"Personalities"})}),y.i4.filter((function(e){return"personality"===e.type})).map((function(e,n){return(0,l.jsx)(v.v.Item,{onClick:function(){ee(e.id),pe(e.id)},children:(0,l.jsxs)("div",{className:"flex items-center gap-1.5 px-4 py-2.5 hover:bg-gray-100 cursor-pointer",children:[(0,l.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,l.jsx)(d.Z,{icon:"CheckCircleSolidIcon",className:(0,c.AK)("w-4 h-4 text-indigo-700 transition-all ml-auto flex-shrink-0",e.id===Q?"opacity-100":"opacity-0")})]})},"tone-".concat(n))}))]})]})]}),(0,l.jsx)("hr",{className:"my-3"}),(0,l.jsxs)("h4",{className:"text-label font-medium mb-2 flex items-center gap-2",children:[(0,l.jsx)(d.Z,{icon:"RefreshIcon",className:"w-5 h-5"})," ","".concat(D?"Rewrite":"Generate"," text")]}),(0,l.jsx)(w.Z,{type:"text",rows:3,value:J,onChange:function(e){return Y(e)},placeholder:"E.g. Target corporate audiences. "}),(0,l.jsxs)("button",{onClick:function(){return fe(T,B)},className:"primary w-full mt-3 gap-2",disabled:V,children:[(0,l.jsx)(d.Z,{icon:"StarsIcon",className:"w-4 h-4"}),(0,l.jsx)("span",{children:D?"Rewrite":"Generate"})]})]})})})]})}function C(e){var n=e.className,t=e.block,s=e.setBlock,r=e.type;return(0,l.jsxs)("div",{className:n,children:[(0,l.jsx)(Z,{prompt:"mars-generate-tagline",regenerate:!!(null===t||void 0===t?void 0:t.tagline),data:{blockType:r,content:null===t||void 0===t?void 0:t.headline,currentContent:null===t||void 0===t?void 0:t.tagline},onRegenerate:function(e){s((function(n){return(0,o.Z)((0,i.Z)({},n),{tagline:e})}))},options:{shorten:!1,lengthen:!1,simplify:!1},title:"Tagline",className:"pb-6",children:(0,l.jsx)(w.Z,{value:null===t||void 0===t?void 0:t.tagline,id:"tagline",onChange:function(e){return s((0,o.Z)((0,i.Z)({},t),{tagline:e}))}})}),(0,l.jsx)(Z,{prompt:"mars-generate-heading",regenerate:!!(null===t||void 0===t?void 0:t.headline),data:{blockType:r,content:null===t||void 0===t?void 0:t.content,currentContent:null===t||void 0===t?void 0:t.headline},onRegenerate:function(e){s((function(n){return(0,o.Z)((0,i.Z)({},n),{headline:e})}))},options:{lengthen:!1},className:"pb-6",title:"Headline",children:(0,l.jsx)(w.Z,{value:null===t||void 0===t?void 0:t.headline,id:"headline",onChange:function(e){return s((0,o.Z)((0,i.Z)({},t),{headline:e}))}})}),(0,l.jsx)(Z,{prompt:"mars-generate-text",regenerate:!!(null===t||void 0===t?void 0:t.content),data:{blockType:r,content:null===t||void 0===t?void 0:t.headline,currentContent:null===t||void 0===t?void 0:t.content},onRegenerate:function(e){s((function(n){return(0,o.Z)((0,i.Z)({},n),{content:e})}))},title:"Subtext",children:(0,l.jsx)("textarea",{rows:4,id:"content",value:null===t||void 0===t?void 0:t.content,onChange:function(e){return s((0,o.Z)((0,i.Z)({},t),{content:e.target.value}))},className:"input"})})]})}},40318:function(e,n,t){"use strict";t.d(n,{Z:function(){return h}});var i=t(26042),o=t(69396),l=t(29815),s=t(85893),r=t(43490),a=(t(67294),t(66261)),c=t(3732),u=t(45587),d=t(43443),v=(0,d.JN)((function(e){var n=e.items,t=e.onSelect,i=e.onRemove;return(0,s.jsx)("ul",{className:"bg-white relative z-5 mt-6",children:null===n||void 0===n?void 0:n.map((function(e,o){return(0,s.jsx)(f,{index:o,idx:o,item:e,last:o===n.length-1,onSelect:t,onRemove:i},"list-item-".concat(o))}))})})),m=function(e){switch(e.type){case"page":return(0,s.jsx)(a.Z,{icon:"DocumentTextIcon",from:"heroicons",className:"w-5 h-5"});case"phone":return(0,s.jsx)(a.Z,{icon:"PhoneIcon",from:"heroicons",className:"w-5 h-5"});case"email":return(0,s.jsx)(a.Z,{icon:"EnvelopeIcon",from:"heroicons",className:"w-5 h-5"});case"section":return(0,s.jsx)(a.Z,{icon:"QueueListIcon",from:"heroicons",className:"w-5 h-5"});default:return(0,s.jsx)(a.Z,{icon:"LinkIcon",from:"heroicons",className:"w-5 h-5"})}},f=(0,d.W8)((function(e){var n=e.idx,t=e.item,i=e.last,o=e.onSelect,l=e.onRemove;return(0,s.jsx)("li",{className:(0,c.AK)("relative z-100 bg-white",!i&&"after:absolute after:left-0 after:right-0 after:bottom-0 after:border-b after:border-gray-200 after:z-100"),children:(0,s.jsxs)("div",{className:"relative flex items-center gap-2 py-3",children:[(0,s.jsx)("div",{className:"whitespace-nowrap text-sm font-medium text-gray-900 cursor-move flex items-center",children:(0,s.jsx)(p,{})}),(0,s.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[m(t),t.label]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{className:"link sm",onClick:function(){return o(n,t)},children:(0,s.jsx)(a.Z,{icon:"PencilIcon",className:"w-5 h-5"})}),(0,s.jsx)("button",{className:"link sm",onClick:function(){return l(n)},children:(0,s.jsx)(a.Z,{icon:"TrashIcon",className:"w-5 h-5 text-red-600"})})]})]})})})),p=(0,d.JV)((function(){return(0,s.jsx)(a.Z,{icon:"DragIcon",className:"w-5 h-5"})}));function h(e){var n,t,d,m=e.className,f=e.title,p=e.text,h=e.block,g=e.setBlock,x=e.setSelected,b=e.onEdit,w=null===h||void 0===h?void 0:h.buttons;!w&&(null===h||void 0===h?void 0:h.button)&&(w={enabled:!0,items:[null===h||void 0===h?void 0:h.button]});var y=function(){var e,n,t;return{label:"Button",type:"url",link:"#",style:{name:"style1"===(null===w||void 0===w||null===(e=w.items)||void 0===e||null===(n=e[0])||void 0===n||null===(t=n.style)||void 0===t?void 0:t.name)?"style2":"style1"}}};return(0,s.jsxs)("div",{className:m,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:f||"Buttons"}),p&&(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1 mr-2",children:p})]}),(0,s.jsx)(r.Z,{enabled:null===w||void 0===w?void 0:w.enabled,onChange:function(e){var n;return g((0,o.Z)((0,i.Z)({},h),{buttons:{enabled:e,items:(null===w||void 0===w||null===(n=w.items)||void 0===n?void 0:n.length)>0?w.items:[y()]},button:void 0}))}})]}),(null===w||void 0===w?void 0:w.enabled)&&(null===w||void 0===w||null===(n=w.items)||void 0===n?void 0:n.length)>0&&(0,s.jsx)(v,{distance:10,useDragHandle:!0,helperClass:"border-t border-b after:hidden list-none",lockAxis:"y",items:null===w||void 0===w?void 0:w.items,onSortEnd:function(e){var n=e.oldIndex,t=e.newIndex,l=(0,c.p$)(null===w||void 0===w?void 0:w.items);l=(0,u.Rp)(l,n,t),g((0,o.Z)((0,i.Z)({},h),{buttons:(0,o.Z)((0,i.Z)({},w),{items:l}),button:void 0}))},onRemove:function(e){var n=(0,c.p$)(null===w||void 0===w?void 0:w.items);n.splice(e,1),0===n.length&&(w.enabled=!1),g((0,o.Z)((0,i.Z)({},h),{buttons:(0,o.Z)((0,i.Z)({},w),{items:n}),button:void 0}))},onSelect:function(e,n){x(e),b()}}),(null===w||void 0===w?void 0:w.enabled)&&(null===w||void 0===w||null===(t=w.items)||void 0===t?void 0:t.length)<2&&(0,s.jsx)("div",{className:"text-right mt-6",children:(0,s.jsxs)("button",{className:(0,c.AK)("link sm inline-flex items-center gap-2",0===(null===w||void 0===w||null===(d=w.items)||void 0===d?void 0:d.length)&&"mt-6"),onClick:function(){var e;g((0,o.Z)((0,i.Z)({},h),{button:void 0,buttons:(0,o.Z)((0,i.Z)({},w),{items:(0,l.Z)((null===w||void 0===w?void 0:w.items)||[]).concat([y()])})})),x(null===w||void 0===w||null===(e=w.items)||void 0===e?void 0:e.length),b()},children:[(0,s.jsx)("span",{className:"text-sm",children:"Add button"}),(0,s.jsx)(a.Z,{icon:"PlusIcon",className:"w-5 h-5"})]})})]})}},53511:function(e,n,t){"use strict";var i=t(26042),o=t(69396),l=t(85893),s=t(43490),r=t(3732);n.Z=function(e){var n=e.block,t=e.setBlock,a=e.className;return 1===n.idx?(0,l.jsxs)("div",{className:(0,r.AK)("flex items-center justify-between gap-3",a),children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"mb-1 font-semibold",children:"Combine with header"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Seamlessly blend banner background with page header"})]}),(0,l.jsx)(s.Z,{enabled:null===n||void 0===n?void 0:n.combineWithHeader,onChange:function(e){return t((0,o.Z)((0,i.Z)({},n),{combineWithHeader:e}))}})]}):null}},99887:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var i=t(26042),o=t(69396),l=t(85893),s=t(3732),r=t(59823),a=t(76698);function c(e){var n,t=e.block,c=e.setBlock,u=e.className,d=e.horizontalAlign,v=void 0===d||d,m=e.verticalAlign,f=void 0!==m&&m,p=e.rightAlign,h=void 0===p||p;return(0,l.jsxs)("div",{className:(0,s.AK)(u,"space-y-6"),children:[(0,l.jsx)("p",{className:"font-semibold",children:"Content alignment"}),v&&(0,l.jsx)(r.n,{label:"Horizontal",value:(null===t||void 0===t?void 0:t.align)||"center",onChange:function(e){return c((0,o.Z)((0,i.Z)({},t),{align:e}))},rightAlign:h}),"min-h-screen"===(null===t||void 0===t||null===(n=t.spacing)||void 0===n?void 0:n.minHeight)&&f&&(0,l.jsx)(a.c,{label:"Vertical",value:(null===t||void 0===t?void 0:t.verticalAlign)||"center",onChange:function(e){return c((0,o.Z)((0,i.Z)({},t),{verticalAlign:e}))}})]})}},20534:function(e,n,t){"use strict";t.d(n,{Ln:function(){return j},YU:function(){return N},ne:function(){return k},qP:function(){return y}});var i=t(47568),o=t(26042),l=t(69396),s=t(97582),r=t(85893),a=t(80360),c=t(67294),u=t(66261),d=t(75131),v=t(3732),m=t(4519),f=t(42341),p=t(25675),h=t.n(p),g=t(85750),x=[{id:"recommended",name:"Recommended"},{id:"light",name:"Light"},{id:"dark",name:"Dark"},{id:"retro",name:"Retro"},{id:"pastel",name:"Pastel"},{id:"cool",name:"Cool"},{id:"warm",name:"Warm"},{id:"nature",name:"Nature"},{id:"energetic",name:"Energetic"},{id:"happy",name:"Happy"}],b=["Aa","Bb","Cc","Dd"],w=function(e){var n,t=e.className,i=e.palette;return(0,r.jsx)("div",{className:(0,v.AK)("grid grid-cols-4 h-20 w-full mt-6 mb-2 overflow-hidden rounded-lg",t),children:null===i||void 0===i||null===(n=i.colors)||void 0===n?void 0:n.map((function(e,n){return(0,r.jsxs)("div",{className:"relative flex items-end p-3 transition-all",style:{background:e.color},children:[(0,r.jsx)("div",{className:(0,v.AK)("absolute inset-0 border-t border-b border-r border-black border-opacity-10",0===n&&"border-l rounded-l-lg",3===n&&"rounded-r-lg")}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-3 h-3 rounded-full transition-all",style:{background:e.accent}}),(0,r.jsx)("p",{className:"font-medium transition-all",style:{color:(0,v.$O)(e.color||"#FFFFFF")},children:b[n]})]})]},"palette-".concat(n))}))})};function y(e){var n=e.onMigrate;return(0,r.jsx)("div",{className:"pb-6",children:(0,r.jsxs)("div",{className:"p-4 bg-indigo-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("p",{className:"font-semibold text-indigo-800",children:"Color palette"}),(0,r.jsx)("p",{className:"px-2.5 py-0.5 bg-indigo-500 text-xs font-medium text-white rounded-xl",children:"New"})]}),(0,r.jsx)("div",{className:"relative w-64 h-60 mx-auto",children:(0,r.jsx)(h(),{unoptimized:!0,src:(0,v.sd)("palette-illustration.svg"),alt:"Durable color palette",layout:"fill",objectFit:"cover"})}),(0,r.jsx)("div",{className:"relative flex items-center gap-1 flex-wrap -mt-12 mb-4",children:(0,r.jsx)("p",{className:"text-sm text-indigo-800",children:"Better colors, everywhere."})}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("button",{className:"primary w-full text-sm",onClick:n,children:"Try color palettes"})})]})})}var j=function(e){var n=e.idx,t=e.website,i=e.setWebsite,s=(0,c.useState)(null),a=s[0],u=s[1],d=function(e){var o,l=(0,v.p$)(t);(null===l||void 0===l||null===(o=l.colorPalette)||void 0===o?void 0:o.colors)&&!isNaN(n)&&(l.colorPalette.colors[n]={color:e.color,accent:e.accent},i(l))};return(0,c.useEffect)((function(){var e,i;(null===t||void 0===t||null===(e=t.colorPalette)||void 0===e?void 0:e.colors)&&!isNaN(n)&&u(null===t||void 0===t||null===(i=t.colorPalette)||void 0===i?void 0:i.colors[n])}),[t,n]),(0,r.jsxs)("div",{className:"divide-y",children:[(0,r.jsxs)("div",{className:"pb-6 space-y-6",children:[(0,r.jsx)(f.Z,{label:"Background",inline:!0,color:null===a||void 0===a?void 0:a.color,onChange:function(e){return d((0,l.Z)((0,o.Z)({},a),{color:e.hex}))}}),(0,r.jsx)(f.Z,{label:"Accent",inline:!0,color:null===a||void 0===a?void 0:a.accent,onChange:function(e){return d((0,l.Z)((0,o.Z)({},a),{accent:e.hex}))}})]}),(0,r.jsxs)("div",{className:"pt-6 space-y-6",children:[(0,r.jsx)("p",{className:"font-semibold",children:"Preview"}),(0,r.jsxs)("div",{className:"relative flex items-end p-3 h-24 rounded-md transition-all",style:{background:null===a||void 0===a?void 0:a.color},children:[(0,r.jsx)("div",{className:"absolute inset-0 border border-black border-opacity-10 rounded-lg"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-4 h-4 rounded-full transition-all",style:{background:null===a||void 0===a?void 0:a.accent}}),(0,r.jsx)("p",{className:"font-medium transition-all",style:{color:(0,v.$O)((null===a||void 0===a?void 0:a.color)||"#000000")},children:b[n]})]})]})]})]})},k=function(e){var n,t,f=e.settings,p=e.migrate,h=e.setMigrate,y=e.onEditColorSet,j=e.onChange,k=(0,c.useState)([]),N=k[0],Z=k[1],C=(0,c.useState)(null),S=C[0],_=C[1],P=(0,c.useState)("recommended"),E=P[0],I=P[1],T=(0,c.useState)(null)[1],B=(0,m.Z)().get,A=function(){var e=(0,i.Z)((function(){var e;return(0,s.__generator)(this,(function(n){switch(n.label){case 0:return[4,B("/website/get-palettes")];case 1:return(null===(e=n.sent())||void 0===e?void 0:e.status)&&(null===e||void 0===e?void 0:e.content)&&Z(e.content),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){S&&"empty"!==S.Palette&&j(S)}),[S]),(0,c.useEffect)((function(){if(f){var e,n,t;if(!S)if(null===(e=f.Palette)||void 0===e||null===(n=e.themes)||void 0===n?void 0:n.includes("recommended"))I("recommended");else I((null===(t=f.Palette)||void 0===t?void 0:t.themes[0])||"recommended");_(f)}}),[f]),(0,c.useEffect)((function(){A()}),[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(g.Z,{className:"w-full mb-6",fullWidth:"true",value:(null===S||void 0===S?void 0:S.Palette)||p?"theme":"custom",options:[{id:"theme",name:"Palette"},{id:"custom",name:"Custom"}],onChange:function(e){T((function(n){var t,i=N.find((function(e){return e._id===n}));return i?_((function(n){var t;return(0,l.Z)((0,o.Z)({},n),{Palette:"theme"===e?i:null,colors:"theme"===e?null:(null===f||void 0===f||null===(t=f.Palette)||void 0===t?void 0:t.colors)||(null===f||void 0===f?void 0:f.colors)||i.colors})})):(p||h(!0),"theme"!==e&&_((function(e){var n;return(0,l.Z)((0,o.Z)({},e),{Palette:null,colors:(null===f||void 0===f||null===(n=f.Palette)||void 0===n?void 0:n.colors)||(null===f||void 0===f?void 0:f.colors)})})),"theme"!==e||p||_((function(e){var n;return(0,l.Z)((0,o.Z)({},e),{Palette:"empty",colors:(null===f||void 0===f||null===(n=f.Palette)||void 0===n?void 0:n.colors)||(null===f||void 0===f?void 0:f.colors)})}))),null===S||void 0===S||null===(t=S.Palette)||void 0===t?void 0:t._id}))}}),((null===S||void 0===S?void 0:S.Palette)||p)&&(0,r.jsxs)("div",{children:[(0,r.jsx)(a.Z,{placeholder:"Select",values:x,value:x.find((function(e){return e.id===(E||"recommended")})),onChange:function(e){return I(e.id)}}),(0,r.jsx)(d.E,{value:null===S||void 0===S||null===(n=S.Palette)||void 0===n?void 0:n._id,onChange:function(e){return _((function(n){return(0,l.Z)((0,o.Z)({},n),{Palette:N.find((function(n){return n._id===e}))})}))},children:null===N||void 0===N?void 0:N.filter((function(e){return e.themes.includes(E)})).map((function(e,n){return(0,r.jsx)(d.E.Option,{value:e._id,className:"cursor-pointer",children:function(n){var t=n.checked;return(0,r.jsx)(w,{palette:e,className:t&&"ring-2 ring-offset-2 ring-indigo-600 shadow-md"})}},"palette-".concat(e._id,"-color-").concat(n))}))})]}),!(null===S||void 0===S?void 0:S.Palette)&&!p&&(0,r.jsx)("div",{className:"space-y-6",children:null===S||void 0===S||null===(t=S.colors)||void 0===t?void 0:t.map((function(e,n){return(0,r.jsxs)("div",{className:"relative flex items-center justify-between gap-3 p-3.5 rounded-md cursor-pointer",style:{background:e.color},onClick:function(){return y(n)},children:[(0,r.jsx)("div",{className:"absolute inset-0 border border-black border-opacity-10 rounded-md"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-4 h-4 rounded-full",style:{background:e.accent}}),(0,r.jsx)("p",{className:"font-medium",style:{color:(0,v.$O)(e.color)},children:b[n]})]}),(0,r.jsx)("button",{className:"relative z-5 flex-shrink-0",style:{color:(0,v.$O)(e.color)},children:(0,r.jsx)(u.Z,{icon:"PencilIcon",from:"heroicons",className:"w-5 h-5"})})]},"palette-color-set-".concat(n))}))})]})})};function N(e){var n=e.className,t=e.value,i=e.onEdit;return(0,r.jsxs)("div",{className:n,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,r.jsx)("p",{className:"font-semibold",children:"Color palette"}),i&&(0,r.jsx)("button",{className:"link text-sm",onClick:i,children:"Edit"})]}),(0,r.jsx)("div",{className:"cursor-pointer",onClick:i,children:(0,r.jsx)(w,{palette:(null===t||void 0===t?void 0:t.Palette)||t,className:"shadow-sm"})})]})}},28774:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var i=t(26042),o=t(85893),l=t(67294),s=t(3732),r=(t(61135),t(62202)),a=t(51121),c=t(32336);function u(e){var n=e.item,t=e.onChange,u=(0,l.useState)(null),d=u[0],v=u[1],m=function(e){var n=(0,i.Z)({},d,e);v(n),t(n)};return(0,l.useEffect)((function(){v(n?(0,s.p$)(n):null)}),[n]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.Z,{suggestions:!0,gettyImages:!0,unsplash:!0,icons:!0,upload:!0,library:!0,location:"blocks",allowDeletion:!1,pictures:null===d||void 0===d?void 0:d.media,onChange:function(e){var n;return m({media:e[0],altText:(null===(n=e[0])||void 0===n?void 0:n.description)||""})},regenerateOptions:{enabled:!0}}),(0,o.jsxs)("div",{className:"pt-6",children:[(0,o.jsx)("div",{className:"flex items-center justify-between gap-4 mb-1",children:(0,o.jsx)("p",{className:"font-semibold",children:"Alt text"})}),(0,o.jsx)(a.Z,{className:"w-full",placeholder:"Enter alt text",helperText:"Describe the image to improve SEO and accessibility",value:(null===d||void 0===d?void 0:d.altText)||"",onChange:function(e){return m({altText:e})}})]}),(0,o.jsx)(c.Z,{value:d,onChange:function(e){return m({positionX:"".concat(e.x,"%"),positionY:"".concat(e.y,"%")})}})]})}},60405:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return Bt},default:function(){return At}});var i=t(47568),o=t(14924),l=t(26042),s=t(69396),r=t(10253),a=t(29815),c=t(97582),u=t(85893),d=t(59435),v=t(67294),m=t(37353),f=t(59965),p=t(13840),h=t(3732);var g=t(4519),x=t(52077),b=t(43490),w=t(85750),y=t(51121),j=t(16494),k=[3,6,9,12].map((function(e){return{id:e,name:e}}));function N(e){var n,t,o=e.block,r=e.setBlock,a=e.businessConfig,m=e.getBusinessConfig,f=(0,v.useState)(!1),N=f[0],Z=f[1],C=(null===a||void 0===a||null===(n=a.business)||void 0===n||null===(t=n.socialAccounts)||void 0===t?void 0:t.instagram)||{},S=(0,h.h_)(),_=(0,g.Z)().remove;function P(){return(P=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return Z(!0),[4,_("/business/remove-social-channel",{type:"instagram"})];case 1:return(e=n.sent()).status&&e.content?(h.Z9.success("Instagram account disconnected"),m((function(){Z(!1)}))):Z(!1),(0,d.Wf)({type:"instagram-disconnected"}),[2]}}))}))).apply(this,arguments)}var E=(0,v.useMemo)((function(){return function(e){return"https://api.instagram.com/oauth/authorize\n  ?client_id=".concat("396290006289781","\n  &redirect_uri=").concat("https://app.durable.co/oauth/instagram","\n  &scope=user_profile,user_media\n  &response_type=code\n  &state=").concat(encodeURIComponent(JSON.stringify({businessId:e}))).replace(/\s/g,"")}(S)}),[S]);return C.connected?(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"space-y-2",children:[(0,u.jsx)("p",{className:"font-semibold",children:"Instagram account"}),(0,u.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:N?(0,u.jsxs)("div",{className:"flex items-center gap-6",children:[(0,u.jsx)(j.Z,{variant:"icon",className:"w-4 h-4"}),(0,u.jsx)("span",{children:"Disconnecting"})]}):(0,u.jsxs)("div",{className:"flex items-start gap-6",children:[(0,u.jsx)(p.Z,{className:"w-5 h-5 text-green-500"}),(0,u.jsxs)("div",{className:"space-y-3",children:[(0,u.jsxs)("div",{className:"text-gray-900 text-sm",children:["The Instagram account ",(0,u.jsx)("span",{className:"font-semibold",children:C.username})," is now connected."]}),(0,u.jsx)("button",{className:"link",disabled:N,onClick:function(){return P.apply(this,arguments)},children:(0,u.jsx)("span",{className:"text-red-600 text-sm",children:"Disconnect"})})]})]})})]}),(0,u.jsx)("hr",{className:"my-6 border-gray-200"}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"pb-6",children:[(0,u.jsx)("p",{className:"mb-2 font-semibold",children:"Tagline"}),(0,u.jsx)(y.Z,{id:"tagline",value:null===o||void 0===o?void 0:o.tagline,onChange:function(e){return r((0,s.Z)((0,l.Z)({},o),{tagline:e}))}})]}),(0,u.jsxs)("div",{className:"pb-6",children:[(0,u.jsx)("p",{className:"mb-2 font-semibold",children:"Headline"}),(0,u.jsx)(y.Z,{id:"headline",value:null===o||void 0===o?void 0:o.headline,onChange:function(e){return r((0,s.Z)((0,l.Z)({},o),{headline:e}))}})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"mb-2 font-semibold",children:"Subtext"}),(0,u.jsx)("textarea",{rows:4,id:"content",value:null===o||void 0===o?void 0:o.content,onChange:function(e){return r((0,s.Z)((0,l.Z)({},o),{content:e.target.value}))},className:"input"})]})]}),(0,u.jsx)("hr",{className:"my-6 border-gray-200"}),(0,u.jsxs)("div",{className:"my-6",children:[(0,u.jsx)("p",{className:"font-semibold",children:"Show Instagram handle"}),(0,u.jsxs)("div",{className:"flex items-center justify-between gap-6 mt-2",children:[(0,u.jsx)("p",{className:"text-gray-500 text-sm leading-tight",children:"Show your Instagram handle at the bottom of the feed"}),(0,u.jsx)(b.Z,{enabled:null===o||void 0===o?void 0:o.showAccount,onChange:function(e){return r((0,s.Z)((0,l.Z)({},o),{showAccount:e}))}})]})]}),(0,u.jsx)("hr",{className:"my-6 border-gray-200"}),(0,u.jsx)(w.Z,{label:"Number of posts",value:(null===o||void 0===o?void 0:o.numPosts)||6,options:k,onChange:function(e){return r((0,s.Z)((0,l.Z)({},o),{numPosts:e}))}})]}):(0,u.jsxs)("div",{className:"flex-col justify-start items-start gap-6 inline-flex",children:[(0,u.jsxs)("div",{className:"space-y-1",children:[(0,u.jsx)("p",{className:"font-semibold",children:"Connect Instagram account"}),(0,u.jsx)("p",{className:"text-gray-500 text-sm",children:"We'll need limited access to your Instagram account to display your feed."})]}),(0,u.jsx)(x.Z,{onClick:function(){Z(!0);var e=window.open(E,"_blank","popup=true width=600 height=600 noopener,noreferrer");window.onInstagramConnected=function(n){n.status?(e.close(),clearInterval(window.checkPopupTimer),delete window.checkPopupTimer,setTimeout((function(){window.onInstagramConnected&&h.Z9.success("Instagram account connected"),delete window.onInstagramConnected}),100),m((function(){Z(!1)})),(0,d.Wf)({type:"instagram-connected"})):(console.log("Failed to link account",n),h.Z9.error("Instagram connection failed, please try again"),e.close(),Z(!1),delete window.onInstagramConnected)},window.checkPopupTimer||(window.checkPopupTimer=setInterval((function(){(null===e||void 0===e?void 0:e.closed)&&(clearInterval(window.checkPopupTimer),delete window.checkPopupTimer,Z(!1),h.Z9.warn("Instagram connection window close before your account was linked, please try again"))}),500))},loading:N,className:"primary",children:"Connect Account"})]})}var Z=t(90748),C=t(96065),S=t(38717),_=t(43226),P=(t(59823),t(34122)),E=t(94051),I=t(33424),T=t(35781);function B(e){var n,t=e.website,i=e.block,o=e.setEdit,r=e.setBlock;return!(null===i||void 0===i?void 0:i.align)&&(null===i||void 0===i||null===(n=i.headerFooterAlign)||void 0===n?void 0:n.horizontal)&&(i.align=i.headerFooterAlign.horizontal),(0,u.jsxs)("div",{children:[(0,u.jsx)(S._u,{website:t,block:i,onEdit:function(){return o("Colors")}}),(0,u.jsx)("hr",{className:"my-6"}),(0,u.jsx)(I.Z,{block:i,setBlock:r}),(0,u.jsx)("hr",{className:"my-6"}),(0,u.jsx)(T.Z,{label:"Alignment",labelClassName:"text-body font-semibold",block:i,setBlock:r}),(0,u.jsx)("hr",{className:"my-6"}),(0,u.jsx)(P.nR,{value:null===i||void 0===i?void 0:i.cornerRadius,defaultValue:null===t||void 0===t?void 0:t.cornerRadius,onChange:function(e){return r((0,s.Z)((0,l.Z)({},i),{cornerRadius:e}))}}),(0,u.jsx)("hr",{className:"my-6"}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex items-center justify-between gap-6 mb-6",children:[(0,u.jsx)("p",{className:"font-semibold",children:"Remove gaps"}),(0,u.jsx)(b.Z,{enabled:null===i||void 0===i?void 0:i.noGutters,onChange:function(e){return r((0,s.Z)((0,l.Z)({},i),{noGutters:e}))}})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between gap-6",children:[(0,u.jsx)("p",{className:"font-semibold",children:"Full width"}),(0,u.jsx)(b.Z,{enabled:null===i||void 0===i?void 0:i.fullWidth,onChange:function(e){return r((0,s.Z)((0,l.Z)({},i),{fullWidth:e}))}})]})]}),(0,u.jsx)("hr",{className:"my-6"}),(0,u.jsx)(E.ZP,{block:i,setBlock:r,spacing:!0,minHeight:!1,verticalAlign:!1}),(0,u.jsx)("hr",{className:"my-6"}),(0,u.jsx)(Z.iy,{block:i,setBlock:r,website:t}),(0,u.jsx)("hr",{className:"my-6"}),(0,u.jsx)(_.S,{block:i,setBlock:r,onEdit:function(){return o("Divider style")}}),(0,u.jsx)("hr",{className:"my-6"}),(0,u.jsx)(C.x,{block:i,setBlock:r})]})}var A=(0,v.memo)((function(e){var n=e.block,t=e.businessConfig,i=e.getBusinessConfig,o=e.loading,r=e.open,a=e.rtl,c=e.setBlock,d=e.setOpen,p=e.setRtl,h=e.website,g=function(){d(!1)},x=(0,v.useState)(null),b=x[0],w=x[1],y={block:n,setBlock:c,website:h,edit:b,setEdit:w};return(0,u.jsxs)(m.Z,{title:"Instagram",open:r,rtl:a,setRtl:p,edit:b,setEdit:w,loading:o,onClose:g,hiddenTabs:["Colors","Divider style"],children:[(0,u.jsx)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:(0,u.jsx)(N,(0,s.Z)((0,l.Z)({},y),{businessConfig:t,getBusinessConfig:i}))}),(0,u.jsx)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:(0,u.jsx)(B,(0,l.Z)({},y))}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(S.px,{website:h,block:n,setBlock:c,onTryPalette:g})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_.S,{block:n,setBlock:c,isEditing:!0})})]})})),O=t(2489),R=t.n(O);function D(e){if(!Array.isArray(e)||0===e.length)return e;var n=e.filter((function(e){return!["header","footer"].includes(e.WebsiteBlock.type)}));if(n.find((function(e){return(0,h.$K)(e.generating)}))&&(n=n.map((function(e){return(0,h.$K)(e.generating)&&delete e.generating,e}))),n.every((function(e){return!!e._id})))return e.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})}));var t=[],i=n.map((function(e){return e._id||(e._id=R()()),e}));i=i.map((function(e){var n;return e.buttons&&0!==(null===(n=e.buttons.items)||void 0===n?void 0:n.length)?(e.buttons.items=e.buttons.items.map((function(n){if("section"!==n.type)return n;if(R().isValid(n.link)&&!n.link.includes("-"))return n;var o=i.find((function(e,t){return(0,d.IF)(e,t,!0)===n.link}));return o?(n.link=o._id,n):(t.push({block:e,button:n}),n)})),e):e})),t.length>0&&window.console&&console.warn("Failed to migrate these links to objectIds",t);var o=i.length,r=(0,s.Z)((0,l.Z)({},e[0]),{idx:0}),c=(0,s.Z)((0,l.Z)({},e.find((function(e){var n;return"footer"===(null===e||void 0===e||null===(n=e.WebsiteBlock)||void 0===n?void 0:n.type)}))),{idx:o});return[r].concat((0,a.Z)(i),[c])}var W="onboarding-survey-trigger",F=t(9459),z=t(11355),G=t(66261),L=t(25675),M=t.n(L),V=t(33299),$=t(43714),K=t(39260),q=[{title:"Banner",name:"banner",icon:"HomeIcon",iconVariant:"outlined"},{title:"Services",name:"services",icon:"WrenchScrewdriverIcon",iconVariant:"outlined"},{title:"Content",name:"content",icon:"TextIcon"},{title:"Clients",name:"clients",icon:"StarIcon",iconVariant:"outlined"},{title:"Image gallery",name:"image",icon:"PhotoIcon",iconVariant:"outlined"},{title:"Video content",name:"video",icon:"FilmIcon",iconVariant:"outlined"},{title:"Team members",name:"team",icon:"UserGroupIcon",iconVariant:"outlined"},{title:"Business hours",name:"business-hours",icon:"ClockIcon",iconVariant:"outlined"},{title:"Testimonials",name:"testimonials",icon:"ChatBubbleBottomCenterTextIcon",iconVariant:"outlined"},{title:"Map location",name:"location",icon:"MapIcon",iconVariant:"outlined"},{title:"Contact form",name:"contact",icon:"Bars3BottomLeftIcon",iconVariant:"outlined"},{title:"Schedule",name:"schedule",icon:"CalendarIcon",iconVariant:"outlined"},{title:"Social media",name:"social-media",icon:"ShareIcon",iconVariant:"outlined"},{title:"Custom code",name:"custom-code",icon:"CodeBracketIcon",iconVariant:"outlined"},{title:"External sections",name:"external",icon:"SquaresIcon"}];function H(e){var n=e.open,t=e.setOpen,o=e.onSelect,l=e.setOpenPaywall,s=(0,v.useState)(!1),r=s[0],a=s[1],d=(0,v.useState)((0,h.tl)("builder.blockTypes")),m=d[0],p=d[1],x=(0,v.useState)([]),b=x[0],w=x[1],k=(0,v.useState)(""),N=k[0],Z=k[1],C=(0,v.useState)(null),S=C[0],_=C[1],P=(0,v.useState)(0),E=P[0],I=P[1],T=(0,v.useState)(null),B=T[0],A=T[1],O=(0,V.useSession)().data,R=(0,$.Z)().track,D=(0,v.useRef)(null),W=(0,g.Z)(),F=W.get,L=W.post;(0,K.m)(B,!0,!E);var H=function(){var e=(0,i.Z)((function(){var e,n;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return a(!0),[4,F("/website/get-blocks").catch(console.log)];case 1:return(e=t.sent())&&!0===e.status&&e.content&&(n=e.content.filter((function(e){return e.active&&"header"!==e.type&&"footer"!==e.type})),p(n),(0,h.Fs)("builder.blockTypes",n)),a(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),U=function(e){var n,t,i;(null===O||void 0===O||null===(n=O.user)||void 0===n||null===(t=n.plan)||void 0===t||null===(i=t.features)||void 0===i?void 0:i.includes("widgets"))||"durable"===e.source?(L("/website/track-block-usage",{blockId:e._id}).catch(console.log),o(e)):l("premium_sections"),R("website:".concat("common-ninja"===(null===e||void 0===e?void 0:e.source)?"premium-":"","section-added"),{block:null===e||void 0===e?void 0:e.type})};return(0,v.useEffect)((function(){return n&&!m&&H(),window.dispatchEvent(new CustomEvent("website-builder-manage-toggle",{detail:{open:n}})),function(){Z(""),I(0),_(null),w([])}}),[n]),(0,u.jsx)(z.u,{show:n,appear:!0,children:(0,u.jsx)("div",{className:"builder-panel right-0",children:(0,u.jsx)("div",{className:"relative h-full md:max-w-100 md:p-2",children:(0,u.jsx)(z.u.Child,{as:v.Fragment,enter:"transform transition transition-all ease-in-out duration-500",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition transition-all ease-in-out duration-500",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,u.jsxs)("div",{className:"relative flex flex-col bg-white shadow-xl md:rounded-lg h-full md:h-auto w-screen max-w-full",children:[(0,u.jsxs)("div",{className:(0,h.AK)("max-w-full sticky top-0 flex items-center justify-between bg-white z-10 py-2 pr-1 md:pr-3 border-b md:rounded-t-lg",(0,h.$K)(S)?"pl-1 md:pl-3":"pl-4 md:pl-6"),children:[(0,u.jsxs)("div",{className:"relative flex items-center z-5",children:[(0,u.jsx)(z.u,{as:v.Fragment,show:(0,h.$K)(S),enter:"transition-all duration-300",enterFrom:"opacity-0 -translate-x-3",enterTo:"opacity-100 translate-x-0",leave:"transition-all duration-300",leaveFrom:"opacity-100 translate-x-0",leaveTo:"opacity-0 -translate-x-3",children:(0,u.jsxs)("button",{type:"button",className:"absolute top-1/2 left-0 -translate-y-1/2 light transparent icon",onClick:function(){I(0),_(null),w([])},children:[(0,u.jsx)("span",{className:"sr-only",children:"Exit editing"}),(0,u.jsx)(G.Z,{icon:"ChevronLeftIcon",className:"h-5 w-5"})]})}),(0,u.jsx)("p",{className:(0,h.AK)("font-bold text-gray-900 ml-0 py-2.5 transition-all duration-300 capitalize-first-letter",(0,h.$K)(S)&&"ml-10"),children:(null===S||void 0===S?void 0:S.title)||"Add section"})]}),(0,u.jsxs)("button",{className:"light icon transparent",onClick:function(){return t(!1)},children:[(0,u.jsx)("span",{className:"sr-only",children:"Close panel"}),(0,u.jsx)(G.Z,{icon:"XSolidIcon",className:"h-5 w-5","aria-hidden":"true"})]})]}),(0,u.jsxs)(f.O.Group,{as:"div",className:"flex flex-col h-full md:h-auto",selectedIndex:E,children:[(0,u.jsxs)(f.O.List,{className:"hidden",children:[(0,u.jsx)(f.O,{className:"hidden",children:"Categories"}),(0,u.jsx)(f.O,{className:"hidden",children:"Blocks"})]}),(0,u.jsxs)(f.O.Panels,{ref:function(e){return A(e?{current:e}:null)},className:"tab-panels h-full !p-0",style:{minHeight:"235px",maxHeight:"calc(100vh - 138px)"},children:[(0===E||""!==N)&&(0,u.jsx)("div",{className:"sticky top-0 z-10 flex gap-4 justify-between p-4 md:px-6 border-b bg-white",children:(0,u.jsxs)("div",{className:"w-full relative",children:[(0,u.jsx)("span",{className:"absolute top-1/2 z-10 pl-2.5 -translate-y-1/2",children:(0,u.jsx)(G.Z,{icon:"SearchIcon",className:"w-5 h-5"})}),(0,u.jsx)(y.Z,{ref:D,inputClassName:"!pl-9",placeholder:"Search",value:N,autoFocus:!0,disabled:r,onChange:function(e){Z(e),_(null),""===e?I(0):(I(1),w(m.filter((function(n){return n.name.toLowerCase().includes(e.toLowerCase())})).sort((function(e,n){return e.order-n.order}))))},onKeyUp:function(e){"Enter"===(null===e||void 0===e?void 0:e.key)&&(e.preventDefault(),1===b.length&&U(b[0]))}})]})}),(0,u.jsx)(f.O.Panel,{className:"pb-2 outline-none",unmount:!1,children:q.map((function(e,n){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"flex items-center justify-between gap-4 py-3.5 px-4 md:px-6 cursor-pointer transition-colors hover:bg-indigo-50",onClick:function(){return!r&&function(e){Z(""),I(1),_(e),w(m.filter((function(n){var t;return null===(t=n.categories)||void 0===t?void 0:t.includes(e.name)})).sort((function(e,n){return e.order-n.order})))}(e)},children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)(G.Z,{icon:e.icon||"SquaresIcon",variant:e.iconVariant,className:"w-5 h-5"}),(0,u.jsx)("div",{className:"font-medium",children:e.title})]}),(0,u.jsx)(G.Z,{icon:"ChevronRightIcon",className:"w-5 h-5"})]},"category-".concat(e.name,"-").concat(n)),n<q.length-1&&(0,u.jsx)("hr",{className:"my-0 mx-4 md:mx-6"})]})}))}),(0,u.jsxs)(f.O.Panel,{className:"p-4 md:px-6 space-y-4 outline-none",unmount:!1,children:[r&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z,{variant:"list"}),(0,u.jsx)(j.Z,{variant:"list"}),(0,u.jsx)(j.Z,{variant:"list"})]}),!r&&b.map((function(e){var n,t,i;return(0,u.jsxs)("div",{className:"group relative flex items-center h-32 gap-4 border border-gray-300 p-4 rounded-md ring-0 ring-indigo-700 cursor-pointer transition-all hover:ring-1 hover:border-indigo-700 hover:shadow-md",onClick:function(){return U(e)},children:[(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,u.jsx)("p",{className:"text-sm font-semibold group-hover:text-indigo-700",children:e.name}),!(null===O||void 0===O||null===(n=O.user)||void 0===n||null===(t=n.plan)||void 0===t||null===(i=t.features)||void 0===i?void 0:i.includes("widgets"))&&"durable"!==e.source&&(0,u.jsx)("span",{className:"badge yellow",children:"Premium"})]}),(0,u.jsx)("p",{className:"text-sm mb-2 text-gray-500",children:e.description}),(0,u.jsx)("p",{className:"text-xs font-medium text-gray-800 capitalize",children:e.source&&"durable"!==e.source?"By ".concat(e.source.replaceAll("-"," ")):"By Durable"})]}),(0,u.jsx)("div",{className:"flex-shrink-0 self-center relative w-20 h-20",children:(null===e||void 0===e?void 0:e.previewUrl)?(0,u.jsx)(M(),{unoptimized:!0,className:"rounded",src:e.previewUrl,objectFit:"cover",layout:"fill",alt:e.name}):(0,u.jsx)(M(),{unoptimized:!0,className:"rounded",src:(0,h.sd)("new-blocks/".concat(e.type,".svg")),objectFit:"cover",height:80,width:80,alt:e.name})})]},e._id)})),!r&&""!==N&&0===b.length&&(0,u.jsx)("div",{className:"h-32 text-sm font-normal text-black-500",children:"No section found."})]})]})]})]})})})})})}var U=t(84526),J=t(32130),Y=t(30120),X=t(29064),Q=t(12280),ee=t(46930),ne=t(11163),te=t(60728),ie=t(75511),oe=t(80360),le=[{id:"recommended",name:"Recommended"},{id:"most_popular",name:"Most popular"}],se={term:"",sortBy:"recommended"};function re(e){var n=e.open,t=e.setOpen,o=e.onSelect,r=e.widgets,a=e.setOpenPaywall,d=(0,v.useState)([]),m=d[0],f=d[1],p=(0,v.useState)([]),x=p[0],b=p[1],w=(0,v.useState)(!1),k=w[0],N=w[1],Z=(0,v.useState)(se),C=Z[0],S=Z[1],_=(0,V.useSession)().data,P=(0,g.Z)(),E=P.get,I=P.post,T=function(e,n){var t;return e.source===n.source?"most_popular"===(null===C||void 0===C?void 0:C.sortBy)?(null===n||void 0===n?void 0:n.usage)-(null===e||void 0===e?void 0:e.usage):null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.localeCompare(null===n||void 0===n?void 0:n.name):"durable"===e.source?-1:1},B=function(){var e=(0,i.Z)((function(){var e,n;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return N(!0),[4,E("/website/get-blocks",{taxonomy:"widget"}).catch(console.log)];case 1:return(e=t.sent())&&!0===e.status&&e.content&&((null===r||void 0===r?void 0:r.length)>0?(n=e.content.filter((function(e){return!(null===r||void 0===r?void 0:r.some((function(n){return n.type===e.type})))})),f(n),b(n.sort(T))):(f(e.content),b(e.content.sort(T)))),N(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,v.useEffect)((function(){b(m.filter((function(e){return e.name.toLowerCase().includes(null===C||void 0===C?void 0:C.term.toLowerCase())})).sort(T))}),[C]),(0,v.useEffect)((function(){return n&&B(),window.dispatchEvent(new CustomEvent("website-builder-manage-toggle",{detail:{open:n}})),function(){S(se),window.dispatchEvent(new CustomEvent("website-builder-manage-toggle",{detail:{open:!1}}))}}),[n]),(0,u.jsx)(z.u,{show:n,appear:!0,children:(0,u.jsx)("div",{className:"builder-panel right-0",children:(0,u.jsx)("div",{className:"relative h-full md:max-w-100 md:p-2",children:(0,u.jsx)(z.u.Child,{as:v.Fragment,enter:"transform transition transition-all ease-in-out duration-500",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition transition-all ease-in-out duration-500",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,u.jsxs)("div",{className:"relative flex flex-col bg-white shadow-xl md:rounded-lg h-full md:h-auto w-screen max-w-full",children:[(0,u.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between bg-white border-b p-4 md:pl-6 md:rounded-t-lg",children:[(0,u.jsx)("p",{className:"font-bold text-gray-900",children:"Widgets"}),(0,u.jsx)("button",{type:"button",className:"text-gray-600 hover:text-gray-400",onClick:function(){return t(!1)},children:(0,u.jsx)(G.Z,{icon:"XIcon",className:"h-6 w-6","aria-hidden":"true"})})]}),(0,u.jsxs)("div",{className:"flex flex-col gap-4 py-6",children:[(0,u.jsxs)("div",{className:"flex gap-4 justify-between px-6",children:[(0,u.jsxs)("div",{className:"w-full md:w-50 relative",children:[(0,u.jsx)("span",{className:"absolute top-1/2 z-10 pl-2.5 -translate-y-1/2",children:(0,u.jsx)(G.Z,{icon:"SearchIcon",className:"w-5 h-5"})}),(0,u.jsx)(y.Z,{inputClassName:"!pl-9",value:null===C||void 0===C?void 0:C.term,onChange:function(e){return S((0,s.Z)((0,l.Z)({},C),{term:e}))},placeholder:"Search"})]}),(0,u.jsx)(oe.Z,{className:"w-full md:w-40",value:le.find((function(e){return e.id===(null===C||void 0===C?void 0:C.sortBy)}))||le[0],values:le,onChange:function(e){return S((0,s.Z)((0,l.Z)({},C),{sortBy:e.id}))}})]}),(0,u.jsxs)("div",{className:"space-y-4 px-6 overflow-y-auto",style:{maxHeight:"calc(100vh - 240px)"},children:[k&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z,{variant:"list"}),(0,u.jsx)(j.Z,{variant:"list"}),(0,u.jsx)(j.Z,{variant:"list"})]}),!k&&0===x.length&&(0,u.jsx)("p",{className:"text-sm font-normal text-black-500",children:"No block found."}),!k&&x.filter((function(e){return e.active&&"header"!==e.type&&"footer"!==e.type})).map((function(e){var n,t,i;return(0,u.jsxs)("div",{className:"group relative flex h-32 gap-4 border border-gray-300 p-4 rounded-md hover:bg-indigo-50 hover:border-indigo-600 cursor-pointer",onClick:function(){return function(e){var n,t,i;(null===_||void 0===_||null===(n=_.user)||void 0===n||null===(t=n.plan)||void 0===t||null===(i=t.features)||void 0===i?void 0:i.includes("widgets"))||"durable"===e.source?(I("/website/track-block-usage",{blockId:e._id}).catch(console.log),o(e)):a("premium_widgets")}(e)},children:[(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,u.jsx)("p",{className:"text-sm font-semibold group-hover:text-indigo-700",children:e.name}),!(null===_||void 0===_||null===(n=_.user)||void 0===n||null===(t=n.plan)||void 0===t||null===(i=t.features)||void 0===i?void 0:i.includes("widgets"))&&"durable"!==e.source&&(0,u.jsx)("span",{className:"badge yellow",children:"Premium"})]}),(0,u.jsx)("p",{className:"text-sm mb-2 text-gray-500",children:e.description}),(0,u.jsx)("p",{className:"text-xs font-medium text-gray-800",children:e.source&&"durable"!==e.source?"By ".concat(e.source.replaceAll("-"," ")):"By Durable"})]}),(0,u.jsx)("div",{className:"flex-shrink-0 self-center relative w-20 h-20",children:(null===e||void 0===e?void 0:e.previewUrl)?(0,u.jsx)(M(),{unoptimized:!0,className:"rounded",src:e.previewUrl,objectFit:"cover",layout:"fill",alt:e.name}):(0,u.jsx)(M(),{unoptimized:!0,className:"rounded",src:(0,h.sd)("blocks/".concat(e.type,".svg")),layout:"fill",objectFit:"cover",alt:e.name})})]},e._id)}))]})]})]})})})})})}var ae=t(12799),ce=t(57713),ue=t(79454);function de(e){var n,t=e.open,o=e.setOpen,l=e.block,s=e.refreshWidget,r=(0,te.Z)(),a=r.confirm,d=r.ConfirmDialog,m=(0,v.useState)(!1),f=m[0],p=m[1],h=function(e){var n,t,i;"COMMONNINJA_EDITOR_STATE_CHANGED"===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.type)&&!(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.saved)&&(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.widgetId)?p(!0):p(!1)};return(0,v.useEffect)((function(){return l&&window.addEventListener("message",h),function(){l&&window.removeEventListener("message",h)}}),[l]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d,{confirmText:"Discard",attention:!0}),(0,u.jsx)(z.u.Root,{show:t,as:v.Fragment,children:(0,u.jsx)("div",{className:"fixed z-100 inset-0 overflow-y-auto",children:(0,u.jsxs)("div",{className:"flex items-end justify-center min-h-screen text-center md:block",children:[(0,u.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"}),(0,u.jsx)("span",{className:"hidden md:inline-block md:align-middle md:h-screen","aria-hidden":"true",children:"\u200b"}),(0,u.jsx)(z.u.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",enterTo:"opacity-100 translate-y-0 md:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 md:scale-100",leaveTo:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",children:(0,u.jsxs)("div",{className:"inline-block align-middle bg-white rounded-lg md:my-8 w-full md:w-5/6 text-left overflow-visible shadow-xl transform transition-all",children:[(0,u.jsxs)("div",{className:"flex items-center py-6 px-6 border-b border-gray-200",children:[(0,u.jsxs)("h3",{className:"text-lg text-center leading-6 font-medium text-gray-900",children:["Configure ",(null===l||void 0===l||null===(n=l.WebsiteBlock)||void 0===n?void 0:n.name)||""]}),(0,u.jsx)("button",{type:"button",className:"bg-white rounded-md text-gray-600 hover:text-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ml-auto",onClick:function(){return function(){var e;f?a("Discard changes?","Are you sure you want to close without saving the ".concat(null===l||void 0===l||null===(e=l.WebsiteBlock)||void 0===e?void 0:e.name,"? Any unsaved changes will be discarded."),(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){return s(null===l||void 0===l?void 0:l.externalId),o(!1),[2]}))}))):(s(null===l||void 0===l?void 0:l.externalId),o(!1))}()},children:(0,u.jsx)(G.Z,{icon:"XIcon",className:"h-6 w-6","aria-hidden":"true"})})]}),(0,u.jsx)("div",{className:"flex flex-col gap-4 ",children:(0,u.jsx)("iframe",{className:"w-full min-h-180",src:null===l||void 0===l?void 0:l.editorUrl})})]})})]})})})]})}var ve=t(53371),me=t(61437),fe=t(40487);function pe(e){var n=e.website,t=e.pages,o=e.open,a=e.setOpen,m=e.aiCreatePageType,f=e.onCreatePage,p=e.onCreatePost,x=e.closeManagePagesModal,b=e.websitePages,w=(0,r.Z)((0,me.Z)("website:inline-edit-disabled",!1),2)[1],y=(0,h.ac)("(min-width: 1024px)"),k=(0,v.useState)({getting:!1,creating:!1}),N=k[0],Z=k[1],C=(0,v.useState)((0,h.tl)("website-page-templates")),S=C[0],_=C[1],P=(0,g.Z)(),E=P.get,I=P.post,T=function(){var e=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return Z((function(e){return(0,s.Z)((0,l.Z)({},e),{getting:!0})})),[4,E("/website/get-page-templates")];case 1:return!0===(null===(e=n.sent())||void 0===e?void 0:e.status)?_(null===e||void 0===e?void 0:e.content):h.Z9.error("Error loading page templates, please try again. ".concat(null===e||void 0===e?void 0:e.message),{autoClose:!0}),Z((function(e){return(0,s.Z)((0,l.Z)({},e),{getting:!1})})),[2]}}))}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,i.Z)((function(e,n){var i,o,r;return(0,c.__generator)(this,(function(a){switch(a.label){case 0:return m&&(null===t||void 0===t?void 0:t.map((function(e){return(null===e||void 0===e?void 0:e.fromTemplate)||null}))).includes(m)?(i=null===t||void 0===t?void 0:t.find((function(e){return(null===e||void 0===e?void 0:e.fromTemplate)===m})))&&(null===i||void 0===i?void 0:i.id)?(o=null===b||void 0===b?void 0:b.find((function(e){return e.id===(null===i||void 0===i?void 0:i.id)})),f({page:i,websitePage:o,pageTemplate:"open-only"},y),Z((function(e){return(0,s.Z)((0,l.Z)({},e),{creating:!1})})),[2]):(Z((function(e){return(0,s.Z)((0,l.Z)({},e),{creating:!1})})),[2]):[4,I("/website/create-page-template",{template:e,label:n})];case 1:return!0===(null===(r=a.sent())||void 0===r?void 0:r.status)?f(null===r||void 0===r?void 0:r.content,y):h.Z9.error("Error saving this page, please try again. ".concat(null===r||void 0===r?void 0:r.message),{autoClose:!0}),Z((function(e){return(0,s.Z)((0,l.Z)({},e),{creating:!1})})),[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),A=function(e){if(Z((function(e){return(0,s.Z)((0,l.Z)({},e),{creating:!0})})),"website-post"===e)p(),a(!1),Z((function(e){return(0,s.Z)((0,l.Z)({},e),{creating:!1})}));else{var i=null;if("service"===e){var o,r=(null===n||void 0===n||null===(o=n.business)||void 0===o?void 0:o.services)||[];if(r.length>0){var c;i=null===(c=(0,h.kd)(r))||void 0===c?void 0:c.toString()}else{var u=null===t||void 0===t?void 0:t.find((function(e){return null===e.slug&&"home-page"===e.type})),v=(0,d.vP)(u);i=null===v||void 0===v?void 0:v.title}}x(),B(e,i)}};return(0,v.useEffect)((function(){window.dispatchEvent(new CustomEvent("website-builder-manage-toggle",{detail:{open:o}})),window.dispatchEvent(new CustomEvent("website-builder-actions-toggle",{detail:o})),w(o)}),[o]),(0,v.useEffect)((function(){T()}),[]),(0,v.useEffect)((function(){m&&A(m)}),[m]),(0,u.jsx)(z.u,{show:o,appear:!0,children:(0,u.jsx)("div",{className:"builder-panel right-0",children:(0,u.jsx)("div",{className:"relative h-full md:max-w-100 md:p-2",children:(0,u.jsx)(z.u.Child,{as:v.Fragment,enter:"transform transition transition-all ease-in-out duration-500",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition transition-all ease-in-out duration-500",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,u.jsxs)("div",{className:"relative flex flex-col bg-white shadow-xl md:rounded-lg h-full md:h-auto w-screen max-w-full",children:[(0,u.jsxs)("div",{className:"sticky top-0 z-10 flex items-center justify-between bg-white border-b p-4 md:pl-6 md:rounded-t-lg",children:[(0,u.jsx)("p",{className:"font-bold text-gray-900",children:"Add page"}),(0,u.jsx)("button",{type:"button",className:"text-gray-600 hover:text-gray-400",onClick:function(){return a(!1)},children:(0,u.jsx)(G.Z,{icon:"XIcon",className:"h-6 w-6","aria-hidden":"true"})})]}),(0,u.jsxs)("div",{className:"space-y-4 !p-6 !pr-3.5 max-h-[calc(100vh-57px)] md:max-h-[calc(100vh-136px)] overflow-y-auto main-scrollbar",children:[N.creating&&(0,u.jsx)(fe.k,{text:"Creating page..."}),N.getting&&!S?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(j.Z,{variant:"skeleton",classNameChild:"!w-[360px] !h-[282px] !max-w-full mx-auto"}),(0,u.jsx)(j.Z,{variant:"skeleton",classNameChild:"!w-[360px] !h-[282px] !max-w-full mx-auto"}),(0,u.jsx)(j.Z,{variant:"skeleton",classNameChild:"!w-[360px] !h-[282px] !max-w-full mx-auto"}),(0,u.jsx)(j.Z,{variant:"skeleton",classNameChild:"!w-[360px] !h-[282px] !max-w-full mx-auto"}),(0,u.jsx)(j.Z,{variant:"skeleton",classNameChild:"!w-[360px] !h-[282px] !max-w-full mx-auto"}),(0,u.jsx)(j.Z,{variant:"skeleton",classNameChild:"!w-[360px] !h-[282px] !max-w-full mx-auto"})]}):null===S||void 0===S?void 0:S.map((function(e,n){var t=e.name,i=e.description,o=e.type;return(0,u.jsxs)("div",{className:"p-5 bg-white border border-gray-200 rounded-lg shadow ring-0 ring-indigo-200 cursor-pointer transition-all hover:border-indigo-600 active:ring-4",onClick:function(){return A(o)},children:[(0,u.jsxs)("div",{className:"flex justify-between items-center gap-4 mb-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:"font-semibold mb-2",children:t}),(0,u.jsx)("p",{className:"text-gray-500",children:i})]}),(0,u.jsxs)("button",{className:"link inline-flex items-center gap-0.5",children:[(0,u.jsx)(G.Z,{icon:"PlusSolidIcon",className:"w-5 h-5"}),(0,u.jsx)("span",{children:"Add"})]})]}),(0,u.jsx)("div",{className:"relative w-full h-[200px] pointer-events-none",children:(0,u.jsx)(M(),{unoptimized:!0,className:"rounded-lg",src:(0,h.sd)("new-templates/".concat(o,".svg")),alt:t,layout:"fill",objectFit:"cover"})})]},"page-template-".concat(o,"-").concat(n))}))]})]})})})})})}var he=t(43751);function ge(e){var n=e.open,t=e.onClose,i=e.onAction,o=e.scrolledDistance,l=(0,v.useState)(!1),s=l[0],r=l[1],a=(0,v.useState)(!1),c=a[0],d=a[1],m=(0,v.useState)(!1),f=m[0],p=m[1],g=(0,$.Z)().track,x=function(e){var n=e.detail;p(null===n||void 0===n?void 0:n.active)};return(0,v.useEffect)((function(){var e=setInterval((function(){var e=document.getElementsByClassName("Toastify__toast-container");d((null===e||void 0===e?void 0:e.length)>0)}),500);return window.addEventListener("website-builder-active-block-changed",x),function(){clearInterval(e),window.removeEventListener("website-builder-active-block-changed",x)}}),[]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(z.u.Root,{show:n&&o<200&&!f&&!s,as:v.Fragment,children:(0,u.jsx)("div",{className:"absolute sm:fixed bottom-16 md:bottom-6 left-1/2 -translate-x-1/2 z-40 p-2 sm:px-0 md:py-0 mx-auto w-full sm:max-w-120",children:(0,u.jsx)(z.u.Child,{enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,u.jsxs)("div",{className:(0,h.AK)("group flex flex-row items-center gap-2 p-2 opacity-100 transition-all duration-300 bg-white border-gray-300 rounded-xl shadow-md",c&&"!opacity-0"),children:[(0,u.jsxs)("div",{className:"flex-shrink-0 relative w-10 h-10",children:[(0,u.jsx)("div",{className:"hidden md:flex absolute inset-0 w-10 h-10 opacity-100 transition-opacity group-hover:opacity-0",children:(0,u.jsx)(M(),{src:(0,h.sd)("rocket.svg"),alt:"Upgrade",layout:"fill",objectFit:"cover"})}),(0,u.jsx)("div",{className:"relative z-10 flex justify-center items-center w-10 h-10 md:opacity-0 cursor-pointer transition-opacity md:group-hover:opacity-100",onClick:function(){r(!0),t()},children:(0,u.jsx)(he.Z,{className:"h-6 w-6","aria-hidden":"true"})})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full sm:px-2 text-sm",children:[(0,u.jsx)("span",{className:"font-semibold text-gray-700",children:"Upgrade to get a custom domain name"}),(0,u.jsx)("span",{className:"hidden sm:block text-gray-500",children:"Plus unlimited pages, analytics, and more."})]}),(0,u.jsx)("button",{className:"flex-shrink-0 primary",onClick:function(){g("account:paywall-click",{context:"domain_alert"}),i()},children:"Upgrade"})]})})})})})}var xe=t(9008),be=t.n(xe),we=t(41664),ye=t.n(we);function je(e){var n,t,i,o=e.open,l=e.onPublish,s=e.onClose,r=e.scrolledDistance,a=(0,v.useState)(!1),c=a[0],d=a[1],m=(0,v.useState)(!1),f=m[0],p=m[1],g=(0,V.useSession)().data,x=function(e){var n=e.detail;p(null===n||void 0===n?void 0:n.active)};return(0,v.useEffect)((function(){var e=setInterval((function(){var e=document.getElementsByClassName("Toastify__toast-container");d((null===e||void 0===e?void 0:e.length)>0)}),500);return window.addEventListener("website-builder-active-block-changed",x),function(){clearInterval(e),window.removeEventListener("website-builder-active-block-changed",x)}}),[]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(z.u.Root,{show:o&&r<200&&!f,as:v.Fragment,children:(0,u.jsx)("div",{className:"absolute sm:fixed bottom-16 md:bottom-6 left-1/2 -translate-x-1/2 z-40 p-2 sm:px-0 md:py-0 mx-auto w-full sm:max-w-120",children:(0,u.jsx)(z.u.Child,{enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,u.jsxs)("div",{className:(0,h.AK)("group flex flex-row items-center gap-2 p-2 opacity-100 transition-all duration-300 bg-white border-gray-300 rounded-xl shadow-md",c&&"!opacity-0"),children:[(0,u.jsxs)("div",{className:"flex-shrink-0 relative w-10 h-10",children:[(0,u.jsx)("div",{className:"hidden md:flex absolute inset-0 w-10 h-10 opacity-100 transition-opacity group-hover:opacity-0",children:(0,u.jsx)(M(),{src:(0,h.sd)("rocket.svg"),alt:"Upgrade",layout:"fill",objectFit:"cover"})}),(0,u.jsx)("div",{className:"relative z-10 flex justify-center items-center w-10 h-10 md:opacity-0 cursor-pointer transition-opacity md:group-hover:opacity-100",onClick:function(){s()},children:(0,u.jsx)(he.Z,{className:"h-6 w-6","aria-hidden":"true"})})]}),(0,u.jsxs)("div",{className:"flex flex-col w-full sm:px-2 text-sm",children:[(0,u.jsx)("span",{className:"font-semibold text-gray-700",children:"Publish your website"}),(0,u.jsx)("span",{className:"hidden sm:block text-gray-500",children:"Go live with a custom domain name."})]}),!(null===g||void 0===g||null===(n=g.user)||void 0===n||null===(t=n.plan)||void 0===t||null===(i=t.features)||void 0===i?void 0:i.includes("publish-website"))&&(0,u.jsx)("span",{className:"ml-auto px-2.5 py-0.5 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800",children:"PRO"}),(0,u.jsx)("button",{className:"primary",onClick:l,children:"Publish"})]})})})})})}var ke=t(62202),Ne=t(42341),Ze=t(38986),Ce=t(59522),Se=t(20534),_e=t(992),Pe=[{id:"solid",name:"Solid"},{id:"outline",name:"Outline"}],Ee=[{id:"round",name:"Round",cornerRadius:8},{id:"square",name:"Square",cornerRadius:0}];function Ie(e){var n,t,i,r,a,c,d,m,p,g,x,b,w,y,j,k,N,C=e.website,S=e.open,_=e.setOpen,E=e.rtl,I=e.setRtl,T=e.tryPalette,B=e.onChange,A=e.onPreviewMigration,O=e.scrollToLocation,R=void 0===O?null:O,D=e.setScrollToLocation,W=void 0===D?null:D,F=e.initialTab,L=void 0===F?0:F,V=(0,v.useState)(null),$=V[0],q=V[1],H=(0,v.useState)(L),U=H[0],J=H[1],Y=(0,v.useState)(0),X=Y[0],Q=Y[1],ee=(0,v.useState)(null),ne=ee[0],te=ee[1],ie=(0,v.useState)(null),le=ie[0],se=ie[1],re=(0,v.useState)(null),ae=re[0],ce=re[1],ue=(0,v.useState)(null),de=ue[0],ve=ue[1],me=(0,v.useState)(null),fe=me[0],pe=me[1],he=(0,v.useState)(!1),ge=he[0],xe=he[1];(0,K.m)(fe);var be=[{id:0,key:"theme",title:"Theme",parent:!1},{id:1,key:"palette",title:"Color palette",parent:!1},{id:2,key:"color-set",title:"Color ".concat(["A","B","C","D"][X||0]),parent:"palette"},{id:3,key:"buttons",title:"Button styles",parent:!1},{id:4,key:"fonts",title:"Fonts",parent:!1},{id:5,key:"google-search",title:[{field:"head",label:"Headings"},{field:"body",label:"Body text"}].find((function(e){return e.field===(ne||"head")})).label,parent:"fonts"},{id:6,key:"other",title:"Other styles",parent:!1}],we=["PNG","ICO"],ye={button:{backgroundColor:"outline"===(null===$||void 0===$||null===(n=$.button)||void 0===n?void 0:n.style)?"transparent":(null===$||void 0===$||null===(t=$.button)||void 0===t?void 0:t.background)||(null===$||void 0===$?void 0:$.secondaryColor),color:"outline"===(null===$||void 0===$||null===(i=$.button)||void 0===i?void 0:i.style)?(null===$||void 0===$||null===(r=$.button)||void 0===r?void 0:r.background)||(null===$||void 0===$?void 0:$.secondaryColor):(0,h.$O)((null===$||void 0===$||null===(a=$.button)||void 0===a?void 0:a.background)||(null===$||void 0===$?void 0:$.secondaryColor)),borderRadius:null===$||void 0===$||null===(c=$.button)||void 0===c?void 0:c.cornerRadius,borderColor:(null===$||void 0===$||null===(d=$.button)||void 0===d?void 0:d.background)||(null===$||void 0===$?void 0:$.secondaryColor)}},je=function(){_(!1)},Ie=function(e){return be.find((function(n){return n.id===e}))},Te=function(e){return!!Ie(e).parent},Be=function(e){var n=be.find((function(n){return n.key===e}));J(n.id),"color-set"!==n.key&&Q(0),"google-search"!==n.key&&te(null)};return(0,v.useEffect)((function(){S?(q((0,h.p$)(C)),T&&setTimeout((function(){xe(!0),Be("palette")}),500)):setTimeout((function(){J(L)}),400)}),[S]),(0,v.useEffect)((function(){$&&B($)}),[$]),(0,v.useEffect)((function(){if(R&&W){var e={fonts:le,button_style:ae,favicon:de};R in e&&e[R]&&e[R].scrollIntoView({behavior:"smooth",block:"center"}),W(null)}}),[le,ae,de]),(0,v.useEffect)((function(){J(L)}),[L]),(0,v.useEffect)((function(){return window.top.addEventListener("dropdown-open",je),function(){window.top.removeEventListener("dropdown-open",je)}}),[]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(z.u,{show:S,appear:!0,children:(0,u.jsx)("div",{className:(0,h.AK)("builder-panel z-110",E?"right-0":"left-0"),children:(0,u.jsx)("div",{className:"relative w-full h-full md:max-w-90 md:p-2 z-100",children:(0,u.jsx)(z.u.Child,{as:v.Fragment,enter:"transform transition transition-all ease-in-out duration-500",enterFrom:E?"translate-x-full":"-translate-x-full",enterTo:"translate-x-0",leave:"transform transition transition-all ease-in-out duration-500",leaveFrom:"translate-x-0",leaveTo:E?"translate-x-full":"-translate-x-full",children:(0,u.jsxs)("div",{className:"relative flex flex-col bg-white shadow-xl md:rounded-lg h-full md:h-auto w-screen max-w-full",children:[(0,u.jsxs)("div",{className:(0,h.AK)("max-w-full sticky top-0 flex items-center justify-between bg-white z-10 py-2 pr-1 md:pr-3 md:rounded-t-lg",Te(U)?"pl-1 md:pl-3":"pl-4 md:pl-6"),children:[(0,u.jsxs)("div",{className:"relative flex items-center z-5",children:[(0,u.jsx)(z.u,{as:v.Fragment,show:Te(U),enter:"transition-all duration-300",enterFrom:"opacity-0 -translate-x-3",enterTo:"opacity-100 translate-x-0",leave:"transition-all duration-300",leaveFrom:"opacity-100 translate-x-0",leaveTo:"opacity-0 -translate-x-3",children:(0,u.jsxs)("button",{type:"button",className:"absolute top-1/2 left-0 -translate-y-1/2 light transparent icon",onClick:function(){var e=Ie(U);e.parent&&Be(e.parent),ge&&xe(!1)},children:[(0,u.jsx)("span",{className:"sr-only",children:"Exit editing"}),(0,u.jsx)(G.Z,{icon:"ChevronLeftIcon",className:"h-5 w-5"})]})}),(0,u.jsx)("p",{className:(0,h.AK)("font-bold text-gray-900 ml-0 py-2.5 transition-all duration-300",Te(U)&&"ml-10"),children:Ie(U).title})]}),(0,u.jsx)(z.u,{as:v.Fragment,show:!0,enter:"transition-opacity duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,u.jsxs)("div",{className:"flex gap-1",children:[(0,u.jsx)("div",{className:"hidden md:flex items-center",title:"Move to ".concat(E?"left":"right"),children:(0,u.jsxs)("button",{type:"button",className:"flex-shrink-0 light icon transparent",onClick:function(){return I((function(e){return!e}))},children:[(0,u.jsx)("span",{className:"sr-only",children:"Move panel"}),(0,u.jsx)(G.Z,{icon:E?"MoveLeftIcon":"MoveRightIcon",className:"h-5 w-5","aria-hidden":"true"})]})}),(0,u.jsx)("button",{type:"button",className:"flex-shrink-0 primary transparent !py-2",onClick:je,children:"Done"})]})})]}),(0,u.jsxs)(f.O.Group,{as:"div",className:"flex flex-col h-full md:h-auto border-t",selectedIndex:U||1,children:[(0,u.jsx)(f.O.List,{className:"hidden",children:be.map((function(e,n){return(0,u.jsx)(f.O,{className:"hidden",children:e.name},"".concat(e.name,"-").concat(n))}))}),(0,u.jsxs)(f.O.Panels,{ref:function(e){return pe(e?{current:e}:null)},className:"tab-panels h-full",style:{maxHeight:"calc(100vh - 194px)"},children:[(0,u.jsxs)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:[(null===$||void 0===$?void 0:$.noPaletteSupport)&&!ge?(0,u.jsx)(Se.qP,{onMigrate:function(){xe(!0),Be("palette")}}):(0,u.jsx)(Se.YU,{className:"pb-6",value:null===$||void 0===$?void 0:$.colorPalette,onEdit:function(){return Be("palette")}}),(0,u.jsx)(Ze.i_,{ref:se,className:"py-6",fonts:"custom"===(null===$||void 0===$||null===(m=$.fonts)||void 0===m?void 0:m.source)?null===$||void 0===$||null===(p=$.fonts)||void 0===p?void 0:p.custom:null===$||void 0===$?void 0:$.fonts,onEdit:function(){return Be("fonts")}}),(0,u.jsx)("div",{className:"py-6",ref:ce,children:(null===$||void 0===$?void 0:$.noPaletteSupport)?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{className:"mb-2 font-medium text-gray-900",children:"Button"}),(0,u.jsx)("p",{className:"mb-2 text-sm text-gray-500",children:"Choose a button style"}),(0,u.jsxs)("div",{className:"p-4 bg-gray-50 rounded-md",children:[(0,u.jsx)("button",{style:ye.button,className:"primary lg !border-2 pointer-events-none mb-6",children:"Contact us"}),(0,u.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,u.jsx)(oe.Z,{label:"Style",placeholder:"Select",values:Pe,value:Pe.find((function(e){var n;return e.id===(null===$||void 0===$||null===(n=$.button)||void 0===n?void 0:n.style)}))||Pe[0],onChange:function(e){return q((function(n){return(0,s.Z)((0,l.Z)({},n),{button:(0,s.Z)((0,l.Z)({},n.button),{style:e.id})})}))}}),(0,u.jsx)(oe.Z,{label:"Shape",placeholder:"Select",values:Ee,value:Ee.find((function(e){var n;return e.cornerRadius===(null===$||void 0===$||null===(n=$.button)||void 0===n?void 0:n.cornerRadius)}))||Ee[0],onChange:function(e){return q((function(n){return(0,s.Z)((0,l.Z)({},n),{button:(0,s.Z)((0,l.Z)({},n.button),{cornerRadius:e.cornerRadius})})}))}}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"mb-1",children:"Background"}),(0,u.jsx)(Ne.Z,{color:(null===$||void 0===$||null===(g=$.button)||void 0===g?void 0:g.background)||(null===$||void 0===$?void 0:$.secondaryColor),onChange:function(e,n){return q((function(n){return(0,s.Z)((0,l.Z)({},n),{button:(0,s.Z)((0,l.Z)({},n.button),{background:e.hex})})}))}})]})]})]})]}):(0,u.jsx)(_e.rY,{buttons:null===$||void 0===$?void 0:$.buttons,onEdit:function(){return Be("buttons")}})})]}),(0,u.jsx)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:(0,u.jsx)(Se.ne,{settings:null===$||void 0===$?void 0:$.colorPalette,migrate:ge,setMigrate:function(){return(null===$||void 0===$?void 0:$.noPaletteSupport)&&xe(!0)},onEditColorSet:function(e){Be("color-set"),Q(e)},onChange:function(e){ge?(q((function(n){return(0,s.Z)((0,l.Z)({},n),{colorPalette:e,noPaletteSupport:!1,migratePalette:!0})})),A(!0),xe(!1)):q((function(n){return(0,s.Z)((0,l.Z)({},n),{colorPalette:e})}))}})}),(0,u.jsx)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:(0,u.jsx)(Se.Ln,{idx:X,website:$,setWebsite:q})}),(0,u.jsx)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:(0,u.jsx)(_e.jn,{website:$,setWebsite:q,onTryPalette:function(){return J(1)}})}),(0,u.jsx)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:4===U&&(0,u.jsx)(Ze.dh,{isWebsite:!0,value:$,onChange:function(e){q((function(n){return(0,s.Z)((0,l.Z)({},n),{fonts:{source:e.source,head:e.head,body:e.body,custom:e.custom}})}))},onEditCustom:function(e){Be("google-search"),te(e)}})}),(0,u.jsx)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:ne&&(0,u.jsx)(Ce.X,{scrollRef:fe,field:ne,value:null===$||void 0===$||null===(x=$.fonts)||void 0===x?void 0:x.custom,onChange:function(e){return q((function(n){return(0,s.Z)((0,l.Z)({},n),{fonts:(0,s.Z)((0,l.Z)({},n.fonts),{custom:(0,s.Z)((0,l.Z)({},n.fonts.custom),(0,o.Z)({},ne,e))})})}))}})}),(0,u.jsxs)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:[(0,u.jsx)(P.li,{className:"pb-6",website:$,setWebsite:q}),(0,u.jsx)(Z.VV,{className:"py-6",website:$,setWebsite:q}),(0,u.jsxs)("div",{className:"pt-6",ref:ve,children:[(0,u.jsx)("p",{className:"mb-1 font-semibold",children:"Browser icon"}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Add an icon to display on browser tabs"}),(0,u.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg my-4",children:[(0,u.jsx)("div",{className:(0,h.AK)("flex-shrink-0 relative flex items-center justify-center h-4 w-4 overflow-hidden rounded-sm",!(null===$||void 0===$||null===(b=$.favicon)||void 0===b?void 0:b._id)&&"bg-gray-300"),children:(null===$||void 0===$||null===(w=$.favicon)||void 0===w?void 0:w._id)&&(null===$||void 0===$||null===(y=$.favicon)||void 0===y?void 0:y.url)&&(0,u.jsx)(M(),{unoptimized:!0,className:"",src:null===$||void 0===$||null===(j=$.favicon)||void 0===j?void 0:j.url,objectFit:"cover",layout:"fill",alt:"favicon"})}),(0,u.jsx)(ke.Z,{upload:!0,library:!0,icons:!0,location:"logos",pictures:null===$||void 0===$?void 0:$.favicon,allowedExtensions:we,allowedFileSize:"1MB",maxWidth:"480",maxHeight:"480",onChange:function(e){return q((function(n){return(0,s.Z)((0,l.Z)({},n),{favicon:e&&e.length>0?e[0]:void 0})}))},content:(0,u.jsxs)("button",{className:"inline-flex gap-2 items-center link text-sm",children:[(0,u.jsx)("span",{children:(null===$||void 0===$||null===(k=$.favicon)||void 0===k?void 0:k._id)?"Change":"Add icon"}),!(null===$||void 0===$||null===(N=$.favicon)||void 0===N?void 0:N._id)&&(0,u.jsx)(G.Z,{icon:"PlusSolidIcon",className:"w-4 h-4"})]})})]}),(0,u.jsxs)("p",{className:"text-xs text-gray-500",children:[(0,h.RF)(we)," image up to ","1MB",". At least 48x48px."]})]})]})]})]})]})})})})})})}var Te=t(87334),Be=t(26688),Ae=t(27870),Oe=t(11653),Re=t(31193),De=function(e){var n=e.onResume,t=e.onClose;return(0,u.jsxs)("div",{className:"relative flex flex-row flex-nowrap justify-between items-center w-full",children:[(0,u.jsx)("span",{onClick:function(){"function"===typeof t&&t()},className:"flex justify-center items-center w-10 h-10 cursor-pointer mr-2",children:(0,u.jsx)(he.Z,{className:"text-white w-5 h-5"})}),(0,u.jsxs)("button",{onClick:function(){"function"===typeof n&&n()},className:"flex flex-row flex-nowrap items-center justify-start w-full cursor-pointer",children:[(0,u.jsx)("span",{className:"mr-1",children:"Resume Tour"}),(0,u.jsx)(Re.Z,{className:"text-white w-5 h-5"})]})]})},We=null,Fe=function(e){var n=e.target,t=e.targetMobile,i=e.targetIframe,o=e.clickTarget,l=e.clickTargetMobile,s=e.onResume,r=e.onClose,a=e.wide,c=e.isOnPause,d=e.noPause,m=e.hideHighlight,f=e.onFrame,p=e.children,h=10,g={bottom:0,left:0,width:0,height:0},x=(0,v.useState)(g),b=x[0],w=x[1],y=(0,v.useState)({top:"unset",left:"0",bottom:"0"}),j=y[0],k=y[1],N=(0,v.useRef)(),Z=function(){return window.innerWidth<=859},C=function(){var e=null,s=null;if(s=Z()?l||t||n:o||n)if(i){var r=document.querySelector(i);if(r)e=(r.contentDocument||r.contentWindow.document).querySelector(s)}else e=document.querySelector(s);return e},S=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=Z()&&t?t:n;if(o){var l=null,s=0;if(i){"function"===typeof f&&f();var r=document.querySelector(i);if(r){var a=r.contentDocument||r.contentWindow.document;l=a.querySelector(o),s=r.getBoundingClientRect().top}}else l=document.querySelector(o);if(l){var c,u,d,v=l.getBoundingClientRect(),m="unset",p="unset",x=!0,b=(null===N||void 0===N||null===(c=N.current)||void 0===c?void 0:c.clientWidth)||0,y=(null===N||void 0===N||null===(u=N.current)||void 0===u?void 0:u.clientHeight)||0;if((m=window.innerHeight-v.top-v.height-y-s-h-6)<0&&(x=!1),x||(m+=y+v.height+h+18),window.innerWidth>v.left+b)p=v.left-6;else p=window.innerWidth-(null===N||void 0===N||null===(d=N.current)||void 0===d?void 0:d.clientWidth)-h;w({left:v.left-6,bottom:window.innerHeight-v.top-v.height-6-s,width:v.width+12,height:v.height+12}),k({bottom:"".concat(m,"px"),left:"".concat(p,"px"),top:"unset"})}else w(g),k({top:"unset",left:"1rem",bottom:"1rem"})}else k({top:"unset",left:"1rem",bottom:"4rem"});e||setTimeout((function(){S(!0)}),700)},_=function(){window._keyTourGuideRunning=window._keyTourGuideRunning||!1,!0!==window._keyTourGuideRunning&&(S(),window._keyTourGuideRunning=!0,clearTimeout(We),We=setTimeout((function(){window._keyTourGuideRunning=!1}),500))};return(0,v.useEffect)((function(){return setTimeout((function(){S()}),100),window.addEventListener("resize",_),function(){clearTimeout(We),window.removeEventListener("resize",_)}}),[n]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{id:"card-tour",className:"".concat(c?"w-47":a?"w-80":"w-70"," ").concat(c?"z-50 p-2":"z-130 p-4"," fixed  block bg-indigo-600 rounded-xl text-ceramic-medium font-normal text-white text-left shadow-md transition-position duration-700 ease-in-out"),ref:N,style:c?{bottom:"".concat(Z()?"5rem":"1rem"),left:"1rem"}:j,children:(0,u.jsxs)(u.Fragment,{children:[c&&(0,u.jsx)(De,{onResume:function(){s(),setTimeout((function(){S()}),700)},onClose:function(){r(!0)}}),!c&&(0,u.jsxs)("div",{className:"relative block w-full",children:[(0,u.jsx)("button",{tabIndex:0,className:"absolute flex justify-center items-center w-10 h-10 -right-2 -top-2 cursor-pointer",onKeyDown:function(e){if(e.shiftKey&&9===e.keyCode)return e.preventDefault(),!1},onClick:function(){"function"===typeof r&&r(!!d)},children:(0,u.jsx)(he.Z,{className:"text-white w-5 h-5"})}),p]})]})}),!m&&!c&&(0,u.jsx)("div",{className:"shadow-tour rounded-md w-100 h-100 absolute z-[111] transition-all duration-700 ease-in-out cursor-pointer",style:b,onClick:function(){"function"===typeof r&&r(!1);var e=C();e&&setTimeout((function(){e.click()}),100)}})]})},ze=function(e){var n=e.onClick,t=e.extraClasses,i=e.children,o="bg-transparent hover:bg-white/20 text-white border-1 border-transparent rounded-sm p-2 mr-1 box-border text-ceramic-small text-center cursor-pointer ".concat(t||"");return(0,u.jsx)("button",{tabIndex:0,onClick:n,className:o,children:i})},Ge=function(e){var n=e.tourKey,t=e.steps,i=e.onResume,o=e.onClose,s=(0,$.Z)().track,r=(0,v.useState)(1),a=r[0],c=r[1],d=(0,v.useState)(null),m=d[0],f=d[1],p=(0,v.useState)(!0),h=p[0],g=p[1],x=(0,v.useState)(!1),b=x[0],w=x[1],y=(0,v.useState)(0),j=y[0],k=y[1],N=(0,v.useRef)(),Z=function(){if(a<t.length){var e=a+1,n=t[e-1],i=(0,l.Z)({},m);c(e),f(n),O(i),A(n),T(n,i),s("website:tour-next")}},C=function(){if(a>1){var e=a-1,n=t[e-1],i=(0,l.Z)({},m);c(e),f(n),O(i),A(n),T(n,i),s("website:tour-prev")}},S=function(){g(!1),function(){var e=new Event("tour:closed");window.dispatchEvent(e)}(),s("website:tour-closed"),o()},_=function(){w(!0),O(m),function(){var e=new Event("tour:paused");window.dispatchEvent(e)}(),s("website:tour-dismissed",{step:a})},P=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?S():_()},E=function(e){"static"===B(e)&&e.classList.add("relative"),e.classList.contains("z-tourHighlight")||e.classList.add("z-tourHighlight")},I=function(e){if(e){if(null===e||void 0===e?void 0:e.target){var n=document.querySelector(e.target);n&&n.classList.remove("z-tourHighlight")}if(null===e||void 0===e?void 0:e.targetMobile){var t=document.querySelector(e.targetMobile);t&&t.classList.remove("z-tourHighlight")}}},T=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=null===e||void 0===e?void 0:e.target,i=null===e||void 0===e?void 0:e.targetMobile,o=window.document;if(null===e||void 0===e?void 0:e.iframe){var l=document.querySelector(e.iframe);l&&(o=l.contentDocument||l.contentWindow.document)}var s=null===o||void 0===o?void 0:o.querySelector(t),r=null===o||void 0===o?void 0:o.querySelector(i);s&&E(s),r&&E(r),n&&I(n)},B=function(e){return e?window.getComputedStyle(e).getPropertyValue("position"):""},A=function(e){"function"===typeof(null===e||void 0===e?void 0:e.onStep)&&e.onStep()},O=function(e){e&&"function"===typeof(null===e||void 0===e?void 0:e.outStep)&&e.outStep()};return(0,v.useEffect)((function(){if(t&&t.length>0&&Array.isArray(t)){var e=function(){var e=t.length;return t.map((function(n){(null===n||void 0===n?void 0:n.hidePagination)&&e--})),e}();k(e),c(1),f(t[0]),A(t[0]),T(t[0]),s("website:tour-started")}}),[n]),(0,v.useEffect)((function(){var e;null===N||void 0===N||null===(e=N.current)||void 0===e||e.focus()}),[m]),(0,u.jsx)(u.Fragment,{children:h&&m&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(Fe,{target:null===m||void 0===m?void 0:m.target,targetMobile:null===m||void 0===m?void 0:m.targetMobile,targetIframe:null===m||void 0===m?void 0:m.iframe,clickTarget:null===m||void 0===m?void 0:m.clickTarget,clickTargetMobile:null===m||void 0===m?void 0:m.clickTargetMobile,wide:!!(null===m||void 0===m?void 0:m.wide),isOnPause:b,noPause:!!(null===m||void 0===m?void 0:m.noPause),hideHighlight:!!(null===m||void 0===m?void 0:m.hideHighlight),onClose:P,onResume:function(){w(!1),A(m),function(){var e=new Event("tour:resumed");window.dispatchEvent(e)}(),s("website:tour-resumed"),i()},onFrame:null===m||void 0===m?void 0:m.onFrame,children:[(0,u.jsx)("span",{ref:N,className:"reset-index w-0 h-0 p-0 m-0 outline-none focus:outline-none",tabIndex:-1}),m.content,(0,u.jsxs)("div",{className:"w-full flex flex-row flex-nowrap justify-between items-center mt-2",children:[!(null===m||void 0===m?void 0:m.hidePagination)&&(0,u.jsx)("div",{className:"flex flex-row flex-nowrap justify-center items-center",children:(0,u.jsxs)("span",{className:"text-label text-white font-normal",children:[function(){for(var e=a,n=0;n<a;n++){var i;(null===(i=t[n])||void 0===i?void 0:i.hidePagination)&&e--}return e}()," / ",j]})}),(null===m||void 0===m?void 0:m.buttons)&&(0,u.jsx)("div",{className:"".concat((null===m||void 0===m?void 0:m.hidePagination)?"w-full justify-start":"justify-end"," flex flex-row flex-nowrap items-center"),children:m.buttons.map((function(e,n){return(0,u.jsx)(ze,{onClick:function(){!function(e){if(null===e||void 0===e?void 0:e.action)switch(e.action){case"prev":C();break;case"next":Z();break;case"pause":_();break;case"close":S();break;default:(null===e||void 0===e?void 0:e.action)&&"function"===typeof e.action&&e.action(C,Z,_,S)}}(e)},extraClasses:null===e||void 0===e?void 0:e.extraClasses,children:e.content},"".concat(a,"-tour-button-").concat(n))}))})]})]}),!b&&(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"w-full absolute inset-0 z-110 transparent",onClick:function(){P(!1)}})})]})})},Le=function(e){var n=e.onClick,t=e.onClose,i=(0,$.Z)().track,o=function(){i("website:tour-notnow"),t()};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(z.u,{as:v.Fragment,show:!0,appear:!0,enter:"transition duration-500 ease-linear delay-1500",enterFrom:"opacity-0 scale-75",enterTo:"opacity-100 scale-100",leave:"transition duration-500 ease-linear",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-75",children:(0,u.jsx)("div",{className:"".concat(window.innerWidth<=859?"bottom-20":"bottom-4"," z-130 p-4 w-60 fixed left-4 block bg-indigo-600 rounded-xl text-ceramic-medium font-normal text-white text-left shadow-md transition-all"),children:(0,u.jsxs)("div",{className:"relative block w-full",children:[(0,u.jsx)("button",{tabIndex:0,className:"absolute flex justify-center items-center w-10 h-10 -right-2 -top-2 cursor-pointer",onKeyDown:function(e){if(e.shiftKey&&9===e.keyCode)return e.preventDefault(),!1},onClick:o,children:(0,u.jsx)(he.Z,{className:"text-white w-5 h-5"})}),(0,u.jsx)("p",{className:"block pr-4",children:"Welcome to Durable!"}),(0,u.jsx)("p",{className:"block pr-4",children:"How about a quick tour to learn how to customize your website?"}),(0,u.jsx)("div",{className:"w-full flex flex-row flex-nowrap justify-between items-center mt-4",children:(0,u.jsxs)("div",{className:"w-full justify-start flex flex-row flex-nowrap items-center",children:[(0,u.jsx)(ze,{onClick:n,extraClasses:"border-1 !rounded-3xl border-white/30",children:"Yes, please"}),(0,u.jsx)(ze,{onClick:o,extraClasses:"border-1 !rounded-3xl border-white/30",children:"Not now"})]})})]})})})})},Me=t(6328),Ve=t(53120),$e=t(15564),Ke=function(e){var n=e.onClose,t=e.websitePublished,i=e.showOnboarding,o=void 0===i||i,l=(0,V.useSession)().data,s=(0,$.Z)().track,r=(0,g.Z)().post,a=(0,h.ac)("(max-width: 860px)"),c=(0,v.useState)(!1),d=c[0],m=c[1],f=(0,u.jsx)("div",{className:"pr-8",children:"Change colors, fonts, and other styles."}),p=(0,u.jsx)("div",{className:"pr-8",children:"Click on any element to edit it."}),x=(0,u.jsx)("div",{className:"pr-8",children:"Add new sections like Google Reviews, pricing tables, and more."}),b=(0,u.jsx)("div",{className:"pr-8",children:"Quickly change section images and style."}),w=(0,u.jsx)("div",{className:"pr-8",children:"Create and manage your website pages."}),y=(0,u.jsx)("div",{className:"pr-8",children:t?"See how your site will looks.":"Publish or preview your website."}),j=(0,u.jsxs)("div",{className:"flex flex-row flex-nowrap justify-center items-center",children:[(0,u.jsx)(Me.Z,{className:"text-white w-4"}),(0,u.jsx)("span",{className:"pl-1",children:"Back"})]}),k=(0,u.jsxs)("div",{className:"flex flex-row flex-nowrap justify-center items-center",children:[(0,u.jsx)("span",{className:"pr-1",children:"Next"}),(0,u.jsx)(Ve.Z,{className:"text-white w-4"})]}),N=function(e,n){var t=new CustomEvent("tour:add-section-step",{detail:{blockId:e,type:n}});window.dispatchEvent(t)},Z=function(e,n){var t=new CustomEvent("tour:out-add-section-step",{detail:{blockId:e,type:n}});window.dispatchEvent(t)},C=function(){var e=document.querySelector("#iframe-builder-preview");if(e){var n,t=e.contentDocument||e.contentWindow.document;if(t)null===(n=t.querySelector("#main-preview"))||void 0===n||n.scrollTo({top:0,behavior:"instant"})}},S=function(){s("website:tour-completed"),r("/user/onboarding-tour-completed",{}).then((function(e){(0,$e.k)(l)})),n()},_=[{target:'[data-tour="theme"]',targetMobile:'[data-tour="theme-mobile"]',clickTarget:'[data-tour="theme"] button',clickMobileTarget:'[data-tour="theme-mobile"] button',content:f,buttons:[{content:k,action:"next"}]},{target:'[data-tour="section"]',content:x,wide:!0,buttons:[{content:j,action:"prev"},{content:k,action:"next"}],onStep:function(){return N("header","section")},outStep:function(){return Z("header","section")},iframe:"#iframe-builder-preview",onFrame:C},{target:'[data-tour="edit-sections"]',clickTarget:'[data-tour="edit-sections"] button',content:b,wide:!0,buttons:[{content:j,action:"prev"},{content:k,action:"next"}],onStep:function(){return N("page-block-0","actions")},outStep:function(){return Z("page-block-0","actions")},iframe:"#iframe-builder-preview",onFrame:C},{target:'[data-tour="pages"]',targetMobile:'[data-tour="pages-mobile"]',clickTarget:'[data-tour="pages"] button',clickMobileTarget:'[data-tour="pages-mobile"] button',content:w,buttons:[{content:j,action:"prev"},{content:k,action:"next"}]},{target:'[data-tour="preview"]',targetMobile:'[data-tour="preview"]',clickTarget:t?'[data-tour="preview"]':'[data-tour="preview"] button',content:y,buttons:[{content:j,action:"prev"},{content:"Done",action:"close"}]}];return a||_.splice(1,0,{target:'[data-tour="logo"]',clickTarget:'[data-tour="logo"]',content:p,buttons:[{content:j,action:"prev"},{content:k,action:"next"}],onStep:function(){return function(e){var n=new CustomEvent("tour:show-inline-edit-step",{detail:{elem:e,location:"header"}});window.dispatchEvent(n)}("logo")},outStep:function(){return function(e){var n=new CustomEvent("tour:out-inline-edit-step",{detail:{elem:e,location:"header"}});window.dispatchEvent(n)}("logo")},iframe:"#iframe-builder-preview",onFrame:C}),(0,v.useEffect)((function(){m(!1);var e=setTimeout((function(){m(!0)}),500);return function(){return clearTimeout(e)}}),[a]),(0,u.jsxs)(u.Fragment,{children:[!d&&o&&(0,u.jsx)(Le,{onClick:function(){m(!0)},onClose:S}),d&&(0,u.jsx)(Ge,{tourKey:"onboarding-tour-builder",steps:_,onResume:function(){var e;null===window||void 0===window||null===(e=window.top)||void 0===e||e.closeBlock()},onClose:S})]})},qe=t(49470),He=t(72521),Ue=t(52699),Je=Array.from({length:38},(function(e,n){return n+1}));function Ye(e){var n=e.sourceWebsite,t=e.sourcePage,o=e.iframeId,r=(0,v.useState)(n),u=r[0],m=r[1],f=(0,v.useState)(t),p=f[0],x=f[1],b=(0,v.useState)(!1),w=b[0],y=b[1],j=(0,Ae.Z)(u),k=j.chooseTemplate,N=j.generateBlock,Z=function(e,n){o&&(0,d.Wf)({type:"simulated-website-changed",payload:{page:e,website:n}},o),y(!e.blocks.find((function(e){return null===e||void 0===e?void 0:e.generating})))},C=(0,g.Z)().get;function S(e,n,t,i){return _.apply(this,arguments)}function _(){return _=(0,i.Z)((function(e,n,t,i){var o,r;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return"durable"!==(null===e||void 0===e||null===(o=e.WebsiteBlock)||void 0===o?void 0:o.source)?[3,2]:[4,N((0,h.p$)(e),n?(0,h.p$)(n):null,!1,null,t?(0,h.p$)(t):null)];case 1:(r=c.sent())&&x((function(e){var n=(0,h.p$)(e),t=(0,a.Z)((null===n||void 0===n?void 0:n.blocks)||[]),o=t.findIndex((function(e){return e.idx===r.idx}));return delete r.generating,delete r.regenerating,t[o]=r,n=(0,s.Z)((0,l.Z)({},e),{blocks:t}),Z(n,i),n})),c.label=2;case 2:return[2]}}))})),_.apply(this,arguments)}var P=function(){var e=(0,i.Z)((function(e,n,t,i,o){var r;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return"durable"===(null===n||void 0===n||null===(r=n.WebsiteBlock)||void 0===r?void 0:r.source)&&(n.generating="block",n.regenerating=!0),x((function(t){var i=(0,a.Z)((null===t||void 0===t?void 0:t.blocks)||[]);i[e]=n;var r=(0,s.Z)((0,l.Z)({},t),{blocks:i});return Z(r,o),r})),[4,S(n,t,i,o)];case 1:return c.sent(),[2]}}))}));return function(n,t,i,o,l){return e.apply(this,arguments)}}(),E=function(){var e=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return[4,C("/website/get-blocks").catch(console.log)];case 1:return(e=n.sent())&&!0===e.status&&e.content?[2,e.content]:[2,[]]}}))}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,i.Z)((function(e){var i,r,u,v,f,p,g,b,w,y,j,N,Z,C,S,_,I,T,B,A,O;return(0,c.__generator)(this,(function(R){switch(R.label){case 0:return i=function(e){var n,t;return(0,c.__generator)(this,(function(i){switch(i.label){case 0:return n=w[e],t=function(e,n){var t,i=-1;switch(null===n||void 0===n?void 0:n.type){case"service":case"team":i=e.findIndex((function(e){return e.type===(null===n||void 0===n?void 0:n.type)}));break;case"service-list":case"services":var o={type:"service-list",WebsiteBlock:{type:"service-list"},showHeading:!1,showButton:!1,items:[]},r=e.filter((function(e){return"services"===e.type||"service-list"===e.type}));if((null===r||void 0===r?void 0:r.length)>1){for(var c=function(n){var t,i=(0,h.p$)(r[n]);e.splice(e.findIndex((function(e){return("services"===e.type||"service-list"===e.type)&&e.idx===i.idx})),1),(t=o.items).push.apply(t,(0,a.Z)(i.items||[]))},u=0;u<r.length;u++)c(u);return o}if(-1===(i=e.findIndex((function(e){return"services"===e.type||"service-list"===e.type})))){var v=e.filter((function(e){return"service"===e.type}));if(null===v||void 0===v?void 0:v.length)for(var m=function(n){var t=(0,h.p$)(v[n]);e.splice(e.findIndex((function(e){return"service"===e.type&&e.idx===t.idx})),1);var i=(0,d.qZ)(t.content);o.items.push((0,s.Z)((0,l.Z)({},i),{idx:n,button:{label:"View more",type:"url",link:"#"}}))},f=0;f<v.length;f++)m(f);return o}break;case"team-list":if(-1===(i=e.findIndex((function(e){return"team-list"===e.type})))){var p=e.filter((function(e){return"team"===e.type})),g={type:"team-list",WebsiteBlock:{type:"team-list"},showHeading:!1,showButton:!1,items:[]};if(null===p||void 0===p?void 0:p.length)for(var x=function(n){var t,i=(0,h.p$)(p[n]);e.splice(e.findIndex((function(e){return"service"===e.type&&e.idx===i.idx})),1);var o=(0,d.qZ)(i.content);g.items.push((0,s.Z)((0,l.Z)({},o),{idx:n,image:null===(t=i.image)||void 0===t?void 0:t.media}))},b=0;b<p.length;b++)x(b);return g}break;default:i=-1}if(-1===i)switch(null===n||void 0===n||null===(t=n.WebsiteBlock)||void 0===t?void 0:t.type){case"banner":case"banner-grid":case"banner-carousel":i=e.findIndex((function(e){var t,i;return(null===(t=e.WebsiteBlock)||void 0===t?void 0:t.type)===(null===n||void 0===n||null===(i=n.WebsiteBlock)||void 0===i?void 0:i.type)&&("banner"===e.type||"banner-grid"===e.type||"banner-carousel"===e.type)})),-1===i&&(i=e.findIndex((function(e){var n;return"banner"===e.type||"banner-grid"===e.type||"banner-carousel"===e.type||"banner"===(null===(n=e.WebsiteBlock)||void 0===n?void 0:n.type)&&"default"===e.type})));break;default:i=e.findIndex((function(e){var t,i;return(null===(t=e.WebsiteBlock)||void 0===t?void 0:t.type)===(null===n||void 0===n||null===(i=n.WebsiteBlock)||void 0===i?void 0:i.type)&&e.type===(null===n||void 0===n?void 0:n.type)})),-1===i&&(i=e.findIndex((function(e){var t,i;return(null===(t=e.WebsiteBlock)||void 0===t?void 0:t.type)===(null===n||void 0===n||null===(i=n.WebsiteBlock)||void 0===i?void 0:i.type)})))}if(-1!==i){var w=(0,h.p$)(e[i]);return e.splice(i,1),w}return null}(_,n),[4,P(e,{type:n.type,WebsiteBlock:N.find((function(e){return e.type===n.WebsiteBlock.type})),idx:e},n,t,S)];case 1:return i.sent(),[2]}}))},console.log("Start changing template"),window.marsUsedPictures=[],[4,k(null!==e&&void 0!==e?e:(0,h.kd)(Je),!0)];case 1:return g=R.sent(),b=(0,h.p$)(g),w=b.blocks,y=w.findIndex((function(e){var n;return"header"===(null===(n=e.WebsiteBlock)||void 0===n?void 0:n.type)})),-1!==y&&w.splice(y,1),j=w.findIndex((function(e){var n;return"footer"===(null===(n=e.WebsiteBlock)||void 0===n?void 0:n.type)})),-1!==j&&w.splice(j,1),[4,E()];case 2:N=R.sent(),Z=(0,h.p$)(n),S=(0,s.Z)((0,l.Z)({},Z),{cornerRadius:(null===g||void 0===g?void 0:g.cornerRadius)||"no-rounded",fonts:null===g||void 0===g?void 0:g.fonts,buttons:(0,l.Z)({},null===Z||void 0===Z?void 0:Z.buttons,null===g||void 0===g?void 0:g.buttons),header:(0,s.Z)((0,l.Z)({},null===Z||void 0===Z?void 0:Z.header),{WebsiteBlock:N.find((function(e){return"header"===e.type})),fullWidth:!!(null===g||void 0===g||null===(r=g.header)||void 0===r?void 0:r.fullWidth),sticky:!!(null===g||void 0===g||null===(u=g.header)||void 0===u?void 0:u.sticky),style:(null===g||void 0===g||null===(v=g.header)||void 0===v?void 0:v.style)||"left"}),footer:(0,s.Z)((0,l.Z)({},null===Z||void 0===Z?void 0:Z.footer),{WebsiteBlock:N.find((function(e){return"footer"===e.type})),style:null!==(C=null===g||void 0===g||null===(f=g.footer)||void 0===f?void 0:f.style)&&void 0!==C?C:"split-right",layers:(null===g||void 0===g||null===(p=g.footer)||void 0===p?void 0:p.layers)||{palette:"color2",overlay:{type:"solid"}}})}),m(S),_=(0,h.p$)((null===t||void 0===t?void 0:t.blocks)||[]),I=_.findIndex((function(e){var n;return"header"===(null===(n=e.WebsiteBlock)||void 0===n?void 0:n.type)})),-1!==I&&_.splice(I,1),T=_.findIndex((function(e){var n;return"footer"===(null===(n=e.WebsiteBlock)||void 0===n?void 0:n.type)})),-1!==T&&_.splice(T,1),x((function(e){var n=null===w||void 0===w?void 0:w.map((function(e){return(0,s.Z)((0,l.Z)({},e),{generating:"block"})})),i=(0,s.Z)((0,l.Z)({},(0,h.p$)(t)),{blocks:(0,h.p$)(n)});return o&&(0,d.Wf)({type:"simulated-website-changed",payload:{page:i,website:S}},o),i})),B=0,R.label=3;case 3:return B<w.length?[5,(0,c.__values)(i(B))]:[3,6];case 4:R.sent(),R.label=5;case 5:return B++,[3,3];case 6:if(!(null===_||void 0===_?void 0:_.length))return[3,10];x((function(e){var n=null===_||void 0===_?void 0:_.map((function(e){return(0,s.Z)((0,l.Z)({},e),{generating:"block"})})),t=(0,s.Z)((0,l.Z)({},(0,h.p$)(e)),{blocks:(0,a.Z)(e.blocks).concat((0,a.Z)((0,h.p$)(n)))});return o&&(0,d.Wf)({type:"simulated-website-changed",payload:{page:t,website:S}},o),t})),A=0,R.label=7;case 7:return A<_.length?((O=_[A]).idx=w.length+A,O.generating="block",O.added=!0,[4,P(O.idx,O,O,O,S)]):[3,10];case 8:R.sent(),R.label=9;case 9:return A++,[3,7];case 10:return[2]}}))}));return function(n){return e.apply(this,arguments)}}();return(0,v.useEffect)((function(){(0,d.Wf)({type:"simulated-website-changed",payload:{website:u}},o)}),[u]),{website:u,page:p,changeTemplate:I,isReady:w}}var Xe=t(49456),Qe=t(60508),en=t(7118),nn=function(e){var n=e.website,t=e.page,i=e.selected,o=e.onGenerate,l=(0,r.Z)((0,me.Z)("website:inline-edit-disabled",!1),2)[1],s=Ye({sourceWebsite:n,sourcePage:t,iframeId:"iframe-builder-preview-1"}),a=s.changeTemplate,c=s.website,d=s.page,m=s.isReady,f=function(e){l(e),window.dispatchEvent(new CustomEvent("website-builder-actions-toggle",{detail:e}))};return(0,v.useEffect)((function(){m&&o(i,c,d),f((0,h.$K)(i))}),[m]),(0,v.useEffect)((function(){f((0,h.$K)(i))}),[i]),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:(0,h.AK)("flex-shrink-0 overflow-hidden transition-all duration-500 absolute inset-0",i?"translate-y-0 opacity-100 delay-400 z-40":"translate-y-10 opacity-0 pointer-events-none z-20"),children:(0,u.jsxs)("div",{className:"relative w-full h-full flex-shrink-0",children:[i&&(0,u.jsx)("iframe",{name:"preview",id:"iframe-builder-preview-1",src:"/website/preview?blank=true",className:(0,h.AK)("bg-white mx-auto duration-200 w-full h-full flex-shrink-0 use-gpu"),onLoad:function(){i&&(a(i),setTimeout((function(){f(!!i)}),1e3))}}),(0,u.jsx)(Qe.f,{show:!m,animation:"slideFromBottom",children:(0,u.jsx)("div",{className:"fixed z-100 bottom-4 md:bottom-10 inset-x-4",children:(0,u.jsxs)("div",{className:"relative max-w-max mx-auto rounded-lg bg-white overflow-hidden shadow-xl transition-all duration-300",children:[(0,u.jsx)("div",{className:"absolute h-full bg-gradient-to-r from-indigo-800 to-red-100 transition-all animate-pulse",style:{width:"100%",background:"linear-gradient(90deg, #3E35DE 0%, #FFACDE 100%)",filter:"blur(0.5px)"}}),(0,u.jsxs)("div",{className:"relative z-10 flex items-center justify-center gap-3 p-4 md:py-3.5 md:px-6 text-sm md:text-lg font-semibold bg-white rounded-sm",style:{margin:"3px"},children:[(0,u.jsx)(v.Suspense,{fallback:(0,u.jsx)("div",{}),children:(0,u.jsx)(en.default,{className:"w-8 h-6",animation:Xe})}),(0,u.jsx)("span",{className:"flex-1",children:"Generating..."})]})]})})})]})})})},tn=t(78704),on=t(2740);function ln(e){var n=e.track,t=e.generatingPost,o=e.setOpenChangeTemplate,l=e.openChangeTemplate,s=e.onApply,a=e.website,d=e.page,m=(0,v.useState)(null),f=m[0],p=m[1],b=(0,v.useState)(!1),w=b[0],y=b[1],k=(0,v.useState)(!1),N=k[0],Z=k[1],C=(0,v.useState)({}),S=C[0],_=C[1],P=(0,r.Z)((0,me.Z)("website:open-change-template"),2)[1],E=(0,r.Z)((0,me.Z)("website:inline-edit-disabled",!1),2)[1],I=(0,v.useState)(!1),T=I[0],B=I[1],A=(0,v.useState)({left:!1,right:!0}),O=A[0],R=A[1],D=(0,v.useState)(),W=D[0],F=D[1],z=(0,v.useState)(),L=z[0],V=z[1],$=(0,v.useState)((0,h.tl)("website:templates")||[]),K=$[0],q=$[1],H=(0,v.useState)(1),U=H[0],J=H[1],Y=(0,h.ac)("(min-width: 768px)"),X=(0,v.useRef)(),Q=(0,v.useRef)(),ee=(0,g.Z)().get,ne=function(e){X.current.scrollTo({left:X.current.scrollLeft+("left"===e?-400:400),behavior:"smooth"})},te=function(){var e=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return[4,ee("/website/get-templates")];case 1:return!0===(null===(e=n.sent())||void 0===e?void 0:e.status)&&(null===e||void 0===e?void 0:e.content)?(q(null===e||void 0===e?void 0:e.content),(0,h.Fs)("website:templates",null===e||void 0===e?void 0:e.content)):q([]),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ie=function(e){E(e),window.dispatchEvent(new CustomEvent("website-builder-actions-toggle",{detail:e}))};return(0,v.useEffect)((function(){var e={};if(!l||w)e={transformOrigin:"top left",transform:"scale(1) translateX(0)"};else{var n,t=(Y?400:300)/window.innerWidth,i=t>1?1:t,o=null===(n=Q.current)||void 0===n?void 0:n.clientHeight;o=o?"".concat(o/i,"px"):"".concat(100/i,"%"),e={transformOrigin:"top left",transform:"scale(".concat(i,")"),width:"100vw",height:o};var s=document.getElementById("iframe-builder-preview");if(s){var r=s.contentWindow.document.getElementById("main-preview");r&&r.scrollTo(0,0)}}_(e),R((function(e){var n,t,i;return{left:!f&&(null===(n=X.current)||void 0===n?void 0:n.scrollLeft)>300,right:!f&&(null===(t=X.current)||void 0===t?void 0:t.scrollLeft)<(null===(i=X.current)||void 0===i?void 0:i.scrollWidth)-window.innerWidth}}))}),[l,f,Y,w,X,Q]),(0,v.useEffect)((function(){if(X.current&&X.current.scrollTo(0,0),P(l&&!f),l){var e=setTimeout((function(){return Z(!0)}),250);return function(){return clearTimeout(e)}}Z(!1)}),[l,f,X]),(0,v.useEffect)((function(){l&&(te().catch(console.error),F(a))}),[a,l]),(0,v.useEffect)((function(){V(d)}),[d]),(0,u.jsxs)("div",{id:"builder-wrapper",className:(0,h.AK)("bg-white w-full h-full relative mx-auto flex flex-col items-start mt-0",!l&&(T||t)&&"pointer-events-none","overflow-hidden"),children:[(0,u.jsxs)("div",{className:(0,h.AK)("bg-white fixed top-0 w-full flex justify-between items-center z-50 transition-all duration-500 border-b border-gray-300 px-6 py-3",f&&l?"opacity-100 translate-y-0":"opacity-80 -translate-y-full"),children:[(0,u.jsx)("h2",{className:(0,h.AK)("font-semibold text-black transition-all text-base md:text-xl"),children:"Change template"}),(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsx)("button",{disabled:w,className:"btn light",onClick:function(){p(null),B(!1),ie(!1)},children:"Revert"}),(0,u.jsxs)("button",{className:"btn primary gap-2",onClick:function(){y(!0),setTimeout((function(){s(W,L).then((function(){ie(!1),setTimeout((function(){o(!1),y(!1),p(null),n("website:template-applied")}),2e3)}))}),1e3)},disabled:T||w,children:[(w||T)&&(0,u.jsx)(j.Z,{variant:"icon"}),(0,u.jsx)("span",{className:(0,h.AK)((w||T)&&"hidden md:block"),children:w?"Applying...":T?"Generating...":"Apply"})]})]})]}),(0,u.jsxs)("div",{className:(0,h.AK)("fixed z-30 bg-white top-0 transition-all duration-500 overflow-hidden pl-8 flex justify-between w-full items-start gap-8 h-24 ",l?f?"-translate-y-full delay-400":"translate-y-0 delay-400":"-translate-y-full"),children:[(0,u.jsxs)("div",{className:"mb-8 w-full mt-6",children:[(0,u.jsx)("h2",{className:(0,h.AK)("font-semibold text-black transition-all text-2xl"),children:"Change template"}),(0,u.jsxs)("p",{className:"text-gray-500 w-full flex items-center ",children:[(0,u.jsx)("span",{className:" text-sm lg:text-base hidden md:flex pt-2",children:"Select the best template that suits your business. You won\u2019t lose images, text, colors and sections."}),(0,u.jsxs)(x.Z,{className:"link flex items-center md:ml-auto mt-2 md:mt-0",onClick:function(){J((function(e){return e===Math.ceil(K.length/10)?1:e+1})),X.current&&X.current.scrollTo(0,0),n("website:template-regenerate")},disabled:T,children:[(0,u.jsx)(G.Z,{icon:"BoltIcon",className:"w-5 h-5 mr-2"})," Regenerate"]})]})]}),(0,u.jsx)("button",{className:"btn mt-8 mr-4",onClick:function(){o(!1),p(null),Z(!1)},children:(0,u.jsx)(G.Z,{icon:"XIcon",className:"h-6 w-6"})})]}),(0,u.jsxs)("div",{id:"builder-content",ref:X,className:(0,h.AK)("bg-white relative flex gap-4 md:gap-8 transition-all duration-500 delay-200 smooth-scroll no-scrollbar h-full",!w&&l?"z-20 pb-4 pt-20 md:pt-16 ml-4 md:ml-8 h-full overflow-x-auto w-screen pr-28":"z-40 mt-0",!w&&null===f&&l?"opacity-100 translate-y-0":!w&&l?"opacity-0 translate-y-10 pointer-events-none":""),style:{scrollSnapType:"x mandatory"},onScroll:function(e){l&&R({left:!f&&e.target.scrollLeft>300,right:!f&&e.target.scrollLeft<e.target.scrollWidth-window.innerWidth})},children:[l&&(0,u.jsx)(on.h,{children:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:(0,h.AK)("fixed z-40 left-16 hidden md:flex items-center justify-center cursor-pointer shadow-lg bg-indigo-700 hover:bg-indigo-500 rounded-full top-1/2 translate-y-1/2 w-12 h-12 transition-all duration-500",l?"opacity-100 translate-x-0":"opacity-0 pointer-events-none -translate-x-full",!(null===O||void 0===O?void 0:O.left)&&"!opacity-0 pointer-events-none",f&&"opacity-0 pointer-events-none"),onClick:function(){return ne("left")},children:(0,u.jsx)(G.Z,{icon:"ArrowLeftSolidIcon",className:"text-white w-5 h-5"})}),(0,u.jsx)("div",{className:(0,h.AK)("fixed z-40 right-8 hidden md:flex items-center justify-center cursor-pointer shadow-lg bg-indigo-700 hover:bg-indigo-500 rounded-full top-1/2 translate-y-1/2 w-12 h-12 transition-all duration-500",l?"opacity-100 translate-x-0":"opacity-0 pointer-events-none translate-x-full",!(null===O||void 0===O?void 0:O.right)&&"!opacity-0 pointer-events-none",f&&"opacity-0 pointer-events-none"),onClick:function(){return ne("right")},children:(0,u.jsx)(G.Z,{icon:"ArrowRightSolidIcon",className:"text-white w-5 h-5"})})]})}),(0,u.jsxs)("div",{className:(0,h.AK)("relative left-0 duration-750 flex-shrink-0 transition-all group z-20",l?"h-screen border-4 border-l-3 border-indigo-600 rounded-b-lg rounded-tr-lg w-75 md:w-100":"h-full border-0 border-transparent w-screen"),onClick:function(){return p(null)},style:{maxHeight:l?Y?"calc(100vh - 144px)":"calc(100vh - 14rem)":"100%",scrollSnapAlign:"start"},children:[(0,u.jsx)("div",{className:(0,h.AK)("absolute z-30 flex items-center -top-8 h-8 -left-1 bg-indigo-700 text-white py-1.5 px-4 font-medium rounded-t-md text-sm cursor-auto duration-500 delay-200",l?"opacity-100":"opacity-0 pointer-events-none translate-y-1/2 translate-x-1"),children:"Your template"}),(0,u.jsx)("div",{ref:Q,className:(0,h.AK)("relative h-full",l?"overflow-hidden rounded-b-sm rounded-tr-sm bg-indigo-700":""),children:(0,u.jsx)("iframe",{name:"preview",id:"iframe-builder-preview",src:"/website/preview",scrolling:l?"no":"yes",className:(0,h.AK)("relative bg-white mx-auto w-screen h-full use-gpu transform-gpu transition-transform duration-750",l?"pointer-events-none no-scrollbar overflow-hidden rounded-b-3xl rounded-tr-3xl ml-px":"pointer-events-auto"),style:S})})]}),null===K||void 0===K?void 0:K.slice(10*(U-1),10*U).map((function(e,t){var i,o,s,r;return(0,u.jsxs)("div",{id:e.subdomain,className:(0,h.AK)("flex-shrink-0 w-75 md:w-100 h-screen rounded-md border relative z-10 transition-all duration-500 overflow-hidden","cursor-pointer hover:shadow-lg group",N?"opacity-100 scale-100":"opacity-0 scale-120"),onClick:function(){var t,i=parseInt((null===(t=e.subdomain)||void 0===t?void 0:t.replace(/[^0-9]/g,""))||"1",10);B(!0),p(i),n("website:template-selected",{template:i})},style:{maxHeight:l?Y?"calc(100vh - 144px)":"calc(100vh - 14rem)":"100%",scrollSnapAlign:"start"},children:[(0,u.jsx)("div",{className:"absolute inset-0 z-10 transition-all opacity-0 group-hover:opacity-100 bg-gray-700 bg-opacity-30 flex items-center justify-center duration-400",children:(0,u.jsx)("button",{className:"btn light transition-all delay-100 translate-y-1/2 group-hover:translate-y-0 duration-500",children:"Preview"})}),(null===(i=e.screenshots)||void 0===i?void 0:i.desktop)||(null===(o=e.screenshots)||void 0===o?void 0:o.mobile)?(0,u.jsxs)(u.Fragment,{children:[(null===(s=e.screenshots)||void 0===s?void 0:s.desktop)&&(0,u.jsx)("div",{className:"absolute inset-0 z-0 bg-gray-300 hidden md:block",children:(0,u.jsx)(M(),{src:e.screenshots.desktop.url,alt:"Template preview",layout:"fill",objectFit:"cover",objectPosition:"top"})}),(null===(r=e.screenshots)||void 0===r?void 0:r.mobile)&&(0,u.jsx)("div",{className:"absolute inset-0 z-0 bg-gray-300 md:hidden",children:(0,u.jsx)(M(),{src:e.screenshots.mobile.url,alt:"Template preview",layout:"fill",objectFit:"cover",objectPosition:"top"})})]}):(0,u.jsx)(tn.Z,{className:"bg-white absolute inset-0 z-5"})]},"template-".concat(t))}))]}),l&&f&&a&&d&&(0,u.jsx)(nn,{website:a,page:d,selected:f,onGenerate:function(e,n,t){B(!1),F(n),V(t)}})]})}var sn,rn=t(65785),an=t(47914),cn=t(74906),un=t(5152),dn=t.n(un),vn=t(69737),mn=t(51523),fn=t(4156),pn=t(18362),hn=function(e){var n=e.onAction,t=e.onClose,i=e.visible,o=(0,ne.useRouter)();return(0,u.jsx)(pn.Z,{visible:i,context:{context:"publish_website",page:o.pathname},image:(0,h.sd)("paywalls/pw-upgrade-domain-pro-bg.png"),title:"Upgrade to publish your site",description:"Get a free custom domain name when you upgrade your plan .",buttonTitle:"View Plans",buttonAction:n,featTitle:"Upgrade to premium and also get:",features:["More website pages","Premium website features","CRM and automation tools","Invoices and payment tracking"],bgColor:"bg-gray-900",closeColor:"text-white",onClose:function(){t()}})},gn=t(26125),xn=(t(40735),t(95350));function bn(e){var n,t,o,l,s,a,d=e.preview,m=(e.status,e.open),f=e.setOpen,p=e.onPublish,b=e.setOpenPaywall,w=e.website,y=e.onOpenLinkDomain,k=(0,v.useState)(!0),N=k[0],Z=k[1],C=(0,v.useState)(null),S=C[0],_=C[1],P=(0,v.useState)(null),E=P[0],I=P[1],T=(0,v.useState)(!1),B=T[0],A=T[1],O=(0,v.useState)(""),R=O[0],D=(O[1],(0,v.useState)("home")),W=D[0],F=D[1],L=(0,v.useRef)(null),M=(0,v.useRef)(null),K=(0,v.useRef)(null),q=(0,v.useState)(!1),H=q[0],U=q[1],J=(0,r.Z)((0,me.Z)("websiteBuilder.paywall",""),2),Y=J[0],X=J[1],Q=(0,v.useState)([]),ee=Q[0],ne=Q[1],te=(0,v.useState)(!1),ie=te[0],oe=te[1],le=(0,v.useState)(""),se=(le[0],le[1],(0,r.Z)((0,me.Z)("support.modal",!1),2)[1],(0,g.Z)()),re=se.get,ae=se.post,ce=(0,mn.Z)(R),ue=ce.copied,de=(ce.copy,ce.reset),ve=(0,$.Z)().track,fe=(0,h.ac)("(min-width: 768px)"),pe=(0,V.useSession)().data,he=function(e){return(0,u.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl",children:(0,u.jsx)("p",{className:"text-sm break-all",children:e})})},ge=function(){var e=(0,i.Z)((function(){var e,n,t,i;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:return A(!0),[4,re("/website/get-subdomain-details")];case 1:return(null===(e=o.sent())||void 0===e?void 0:e.status)&&(null===e||void 0===e?void 0:e.content)&&(n=e.content,t=n.subdomain,i=n.durableDomain,_(t),I(i)),A(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return A(!0),[4,re("/website/verify-subdomain",{subdomain:S})];case 1:return(e=n.sent())&&!0===e.status&&!0===e.content?Z(!0):Z(!1),A(!1),[2,e.content]}}))}));return function(){return e.apply(this,arguments)}}(),be=function(){var e=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return A(!0),[4,ae("/website/save-subdomain",{subdomain:S})];case 1:return(null===(e=n.sent())||void 0===e?void 0:e.status)?[4,p(!0)]:[3,3];case 2:return n.sent(),f(!1),[3,4];case 3:xn.Z.error(e.message),n.label=4;case 4:return A(!1),[2]}}))}));return function(){return e.apply(this,arguments)}}(),we=function(){var e=(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){return clearTimeout(sn),sn=setTimeout((0,i.Z)((function(){return(0,c.__generator)(this,(function(e){return[2,xe()]}))})),500),[2]}))}));return function(){return e.apply(this,arguments)}}(),je=function(){var e=(0,i.Z)((function(){var e,n;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return"free"!==(null===pe||void 0===pe||null===(e=pe.user)||void 0===e||null===(n=e.plan)||void 0===n?void 0:n.priceId)?[3,1]:(U(!0),[3,3]);case 1:return[4,be()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){return ne([]),re("/custom-domain/suggestion").then((function(e){e&&!0===e.status&&e.content&&ne(e.content)})),[2]}))}));return function(){return e.apply(this,arguments)}}();return(0,v.useEffect)((function(){var e=setTimeout((function(){de()}),2e3);return function(){clearTimeout(e)}}),[ue]),(0,v.useEffect)((function(){m&&(ge(),ke())}),[m]),(0,u.jsx)(z.u.Root,{show:m,as:v.Fragment,children:(0,u.jsx)(vn.V,{static:!0,open:m&&!Y,as:"div",className:"fixed z-100 inset-0 overflow-y-auto",initialFocus:L,onClose:function(){},children:(0,u.jsxs)("div",{className:"flex items-end justify-center min-h-screen text-center md:block",children:[(0,u.jsx)(z.u.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,u.jsx)(vn.V.Overlay,{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"})}),(0,u.jsx)("span",{className:"hidden md:inline-block md:align-middle md:h-screen","aria-hidden":"true",children:"\u200b"}),(0,u.jsx)(z.u.Child,{as:v.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",enterTo:"opacity-100 translate-y-0 md:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 md:scale-100",leaveTo:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",children:(0,u.jsxs)("div",{className:"inline-block align-bottom w-full bg-white rounded-t-lg md:rounded-lg text-left shadow-xl transform transition-all md:my-8 md:align-middle",style:{width:ie?"720px":"640px"},children:[(0,u.jsxs)("div",{className:"flex w-full items-center py-4 px-5 border-b border-gray-200",children:[(0,u.jsx)(vn.V.Title,{className:"",children:(0,u.jsx)("div",{className:"flex flex-col gap-2",children:(0,u.jsx)("p",{className:"font-bold text-gray-900",children:"Get a domain and publish"})})}),(0,u.jsx)("button",{type:"button",className:"bg-white rounded-md text-gray-600 hover:text-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ml-auto",onClick:function(){return f(!1)},tabIndex:-1,children:(0,u.jsx)(G.Z,{icon:"XMarkIcon",from:"heroicons",className:"h-6 w-6","aria-hidden":"true"})})]}),(0,u.jsxs)("div",{ref:L,className:"",children:["home"===W&&(0,u.jsxs)("div",{className:"flex flex-col gap-2 p-6",children:["agency"!==(null===pe||void 0===pe||null===(n=pe.user)||void 0===n||null===(t=n.plan)||void 0===t?void 0:t.priceId)&&"agency"!==(null===pe||void 0===pe||null===(o=pe.user)||void 0===o||null===(l=o.customPlan)||void 0===l?void 0:l.type)&&(0,u.jsxs)("div",{className:"flex justify-between gap-2 p-6 border rounded-xl cursor-pointer items-center",onClick:function(){F("custom"),ve("app:get-custom-domain")},children:[(0,u.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)("p",{className:"text-sm font-semibold",children:"Get a custom domain"}),(0,u.jsx)("span",{className:"text-sm badge text-green-800 bg-green-100",children:"Recommended"})]}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Get your own custom domain for free!"}),(null===ee||void 0===ee?void 0:ee.length)>0?(0,u.jsxs)("div",{className:"flex gap-2 items-center",children:[ee.slice(0,1).map((function(e){return he(e.domain)})),(0,u.jsx)("div",{className:"text-gray-500 text-sm",children:"+ more"})]}):(0,u.jsx)("div",{className:"flex gap-2 ",children:(0,u.jsx)(j.Z,{classNameChild:"h-10 w-40",variant:"skeleton"})})]}),(0,u.jsx)(G.Z,{icon:"ChevronRightIcon",from:"heroicons",className:"h-5 w-5 text-gray-500"})]}),(0,u.jsxs)("div",{className:"flex justify-between gap-2 p-6 border rounded-xl cursor-pointer items-center",onClick:function(){F("durable"),ve("app:use-durable-domain")},children:[(0,u.jsxs)("div",{className:"flex flex-col gap-2 ",children:[(0,u.jsx)("div",{className:"flex gap-2",children:(0,u.jsx)("p",{className:"text-sm font-semibold",children:"Use a Durable domain"})}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Start quickly with a free Durable domain."}),(0,u.jsx)("div",{className:"flex gap-2",children:(null===w||void 0===w?void 0:w.subdomain)&&(null===w||void 0===w?void 0:w.durableDomain)&&he("".concat(null===w||void 0===w?void 0:w.subdomain,".").concat(null===w||void 0===w?void 0:w.durableDomain))})]}),(0,u.jsx)(G.Z,{icon:"ChevronRightIcon",from:"heroicons",className:"h-5 w-5 text-gray-500"})]}),(0,u.jsxs)("div",{className:"flex justify-between gap-2 p-6 border rounded-xl cursor-pointer items-center",onClick:function(){y(),ve("app:use-existing-domain")},children:[(0,u.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,u.jsx)("div",{className:"flex gap-2",children:(0,u.jsx)("p",{className:"text-sm font-semibold",children:"Use a domain you already own"})}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Connect your existing domain easily with any paid plan."})]}),(0,u.jsx)(G.Z,{icon:"ChevronRightIcon",from:"heroicons",className:"h-5 w-5 text-gray-500"})]})]}),"custom"===W&&(0,u.jsx)("div",{className:(0,h.AK)("pt-6 pb-4 pl-4 md:pl-6"),children:(0,u.jsx)(fn.Z,{refresh:function(){f(!1),p(!0)},seeMoreSteps:3,setSelectedDomain:function(){},onAction:function(){},fromBuilder:!0,onPaywall:X})}),"external"===W&&(0,u.jsx)("div",{className:(0,h.AK)("overflow-y-auto mt-4"),style:{height:ie&&fe?"600px":"400px",maxHeight:ie&&fe?"600px":"400px"},children:(0,u.jsx)(gn.Z,{open:m,setOpen:f,isModal:!1,fromBuilder:!0,refreshWebsite:function(){},afterComplete:function(){f(!1),p(!0)},onStepChange:function(e){oe("configure-manually"===e)}})}),"durable"===W&&(0,u.jsxs)("div",{className:"flex flex-col gap-2 px-4 md:px-6 mb-6 mt-6",children:[(0,u.jsx)("p",{className:"text-gray-500 text-sm",children:"Your website address"}),(0,u.jsxs)("label",{className:"relative flex items-center gap-2 border border-indigo-400 rounded-full py-3 px-4 overflow-hidden",style:{paddingRight:(null===K||void 0===K||null===(s=K.current)||void 0===s?void 0:s.offsetWidth)+16||16},children:[(0,u.jsx)(G.Z,{icon:"LockClosedIcon",from:"heroicons",className:"text-gray-500 h-3 w-3"}),(0,u.jsx)("input",{ref:M,className:"w-full border-0 p-0 font-medium text-body md:text-sm outline-none placeholder-gray-400",value:S,onKeyUp:function(){return we()},onChange:function(e){return _((0,h.nv)(e.target.value,E))}}),(0,u.jsxs)("div",{className:"absolute inset-0 flex items-center py-3 pl-9 pr-4 font-medium text-body md:text-sm pointer-events-none",children:[(0,u.jsx)("div",{className:"opacity-0",style:{maxWidth:(null===M||void 0===M||null===(a=M.current)||void 0===a?void 0:a.offsetWidth)||"100%"},children:S}),(0,u.jsx)("div",{ref:K,className:"text-gray-400",children:(0,h.lz)({subdomain:S,durableDomain:E},!1)})]}),(0,u.jsx)(ye(),{href:R,children:(0,u.jsx)("a",{target:"_blank",className:(0,h.AK)("absolute right-0 flex items-center py-3 px-4 bg-white text-indigo-600 cursor-pointer transition-opacity hover:text-indigo-700"),children:(0,u.jsx)(G.Z,{icon:"ExternalLinkIcon",className:"w-5 h-5"})})})]})]}),"home"!==W&&(0,u.jsxs)("div",{className:"flex justify-between gap-3 p-4 lg:px-6 border-t border-gray-200",children:[(0,u.jsx)(x.Z,{className:"light",tabIndex:1,onClick:function(){return F("home")},disabled:B,loading:B,children:"Back"}),"custom"!==W&&(0,u.jsx)(x.Z,{className:"primary",tabIndex:1,onClick:function(){ve("app:durable-domain-publish"),"durable"===W?je():f(!0)},disabled:B||!S||!N,loading:B,children:"Publish"})]})]}),(0,u.jsx)(hn,{visible:H,onAction:function(){ve("account:paywall-click",{context:"".concat(d?"preview":"publish","_flow")}),b("".concat(d?"preview":"publish")),U(!1)},onClose:function(){return U(!1)}})]})})]})})})}var wn=t(68093),yn=t(22295),jn=t(40318),kn=t(53511),Nn=t(43443),Zn=t(28774),Cn=t(62748),Sn=t(99887),_n=(t(29022),[{id:"top",icon:"ImageTopIcon"},{id:"bottom",icon:"ImageBottomIcon"}]),Pn=[{id:"top",icon:"ObjectAlignTopSolidIcon"},{id:"middle",icon:"ObjectAlignVCenterSolidIcon"},{id:"bottom",icon:"ObjectAlignBottomSolidIcon"}],En=[{id:"vertical",icon:"ArrowDownIcon"},{id:"horizontal",icon:"ArrowRightIcon"}],In=function(e){var n,t=e.className,i=e.block,o=e.setBlock,r=e.imagePlacement,a=void 0===r||r,c=e.verticalAlignment,d=void 0===c||c,v=e.sliderOrientation,m=void 0===v||v;return(0,u.jsxs)("div",{className:(0,h.AK)("space-y-6",t),children:[(0,u.jsx)("p",{className:"font-semibold",children:"Layout"}),(0,u.jsxs)(u.Fragment,{children:[a&&(0,u.jsx)(w.Z,{label:"Carousel position",value:(null===i||void 0===i||null===(n=i.image)||void 0===n?void 0:n.align)||"bottom",options:_n,onChange:function(e){return o((0,s.Z)((0,l.Z)({},i),{image:(0,s.Z)((0,l.Z)({},i.image),{align:e})}))}}),d&&(0,u.jsx)(w.Z,{label:"Content alignment",value:i.verticalAlign||"middle",options:Pn,onChange:function(e){return o((0,s.Z)((0,l.Z)({},i),{verticalAlign:e}))}}),m&&(0,u.jsx)(w.Z,{label:"Slider orientation",value:(null===i||void 0===i?void 0:i.sliderOrientation)||"vertical",options:En,onChange:function(e){return o((0,s.Z)((0,l.Z)({},i),{sliderOrientation:e}))}})]})]})},Tn=[{id:22,name:"Slow"},{id:44,name:"Normal"},{id:66,name:"Fast"},{id:88,name:"Very fast"}];function Bn(e){var n,t=e.className,i=e.block,o=e.setBlock;return(0,u.jsxs)("div",{className:(0,h.AK)("space-y-6",t),children:[(0,u.jsx)("p",{className:"font-semibold",children:"Carousel speed"}),(0,u.jsx)(oe.Z,{value:Tn.find((function(e){return e.id===(null!==(n=i.speed)&&void 0!==n?n:44)})),values:Tn,onChange:function(e){return o((function(n){return(0,s.Z)((0,l.Z)({},n),{speed:e.id})}))}})]})}var An=t(47022);function On(e){var n,t,o,r,a,d,p,g,x=e.open,b=e.setOpen,w=e.block,y=e.setBlock,j=e.rtl,k=e.setRtl,N=e.loading,C=e.website,_=e.onValid,T=(0,v.useState)(null),B=T[0],A=T[1],O=(0,v.useState)(null),R=O[0],D=O[1],W=(0,v.useState)(!1),F=W[0],z=W[1],L=(0,v.useState)(null),M=L[0],V=L[1],$=(0,te.Z)(),K=$.confirm,q=$.ConfirmDialog,H=function(){b(!1)},U=function(e){y((function(n){var t=n.buttons?(0,h.p$)(n.buttons):null;return t||(t={enabled:!0,items:[]}),t.items[R]=e,(0,s.Z)((0,l.Z)({},n),{buttons:t})}))},J=function(){var e=(0,i.Z)((function(e){var n,t,i;return(0,c.__generator)(this,(function(o){return n=e.oldIndex,t=e.newIndex,(i=(0,h.p$)(w)).pictures=(0,Cn.q)(i.pictures,n,t),i.pictures=i.pictures.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})})),y(i),[2]}))}));return function(n){return e.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Banner image slider horizontal",open:x,rtl:j,setRtl:k,edit:B,setEdit:A,loading:N,hiddenTabs:["Colors","Button style","Button settings","Image"],onClose:H,invalid:F,onSelectItem:function(e,n){if("buttons"===n)D(e);else{var t,i=(null===w||void 0===w||null===(t=w.pictures)||void 0===t?void 0:t[e])||{};V((0,s.Z)((0,l.Z)({},i),{idx:e}))}},children:[(0,u.jsxs)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:[(0,u.jsx)(An.Z,{className:"pb-6",block:w,setBlock:y,type:"banner"}),(0,u.jsxs)("div",{className:"py-6",children:[(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("p",{className:"mb-1 font-semibold",children:"Carousel images"}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Select up to 10 images"})]}),(0,u.jsx)("div",{className:"relative",children:(0,u.jsx)(Rn,{distance:10,useDragHandle:!0,helperClass:"border-t border-b after:hidden list-none",lockAxis:"y",items:null===w||void 0===w?void 0:w.pictures,onSortEnd:J,onSelect:function(e){var n,t=(null===w||void 0===w||null===(n=w.pictures)||void 0===n?void 0:n[e])||{};V((0,s.Z)((0,l.Z)({},t),{idx:e})),A("Image")},onRemove:function(e){K("Delete image?","Are you sure you want to delete this image?",(function(){var n=(0,h.p$)(w);n.pictures.splice(e,1),n.pictures=n.pictures.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})})),y(n)}))}})}),(!(null===w||void 0===w?void 0:w.pictures)||(null===w||void 0===w||null===(n=w.pictures)||void 0===n?void 0:n.length)<10)&&(0,u.jsx)("div",{className:"pt-4 text-right",children:(0,u.jsxs)("button",{className:"link sm inline-flex items-center gap-2",onClick:function(){var e;V({idx:(null===w||void 0===w||null===(e=w.pictures)||void 0===e?void 0:e.length)||0}),A("Image")},children:[(0,u.jsx)("span",{className:"text-sm",children:"Add image"}),(0,u.jsx)(G.Z,{icon:"PlusIcon",className:"w-5 h-5"})]})})]}),(0,u.jsx)(jn.Z,{className:"pt-6",block:w,setBlock:y,onEdit:function(){return A("Button settings")},setSelected:D,text:"Add a button with a link to a page, phone number, email or section"})]}),(0,u.jsxs)(f.O.Panel,{className:"divide-y space-y-6 outline-none",unmount:!1,children:[(0,u.jsx)(S._u,{website:C,block:w,onEdit:function(){return A("Colors")}}),(null===w||void 0===w||null===(t=w.buttons)||void 0===t?void 0:t.enabled)&&(null===w||void 0===w||null===(o=w.buttons)||void 0===o||null===(r=o.items)||void 0===r?void 0:r.length)>0&&(0,u.jsx)(_e.ZJ,{className:"pt-6",website:C,block:w,onEdit:function(e){D(e),A("Button style")},onTryPalette:H}),(0,u.jsx)(Bn,{className:"pt-6",block:w,setBlock:y}),(0,u.jsx)(In,{className:"pt-6",block:w,setBlock:y,verticalAlignment:!1,sliderOrientation:!1}),(0,u.jsx)(Sn.Z,{className:"pt-6",block:w,setBlock:y,horizontalAlign:!0,verticalAlign:!1,rightAlign:!1}),(0,u.jsx)(I.Z,{className:"pt-6",block:w,setBlock:y}),(0,u.jsx)(P.nR,{className:"py-6",value:null===w||void 0===w?void 0:w.cornerRadius,defaultValue:null===C||void 0===C?void 0:C.cornerRadius,onChange:function(e){return y((0,s.Z)((0,l.Z)({},w),{cornerRadius:e}))}}),(0,u.jsx)(E.ZP,{className:"pt-6",block:w,setBlock:y,horizontalAlign:!1,verticalAlign:!1,minHeight:!1}),(0,u.jsx)(Z.iy,{className:"pt-6",block:w,setBlock:y,website:C}),(0,u.jsx)(kn.Z,{className:"pt-6",block:w,setBlock:y})]}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(S.px,{website:C,block:w,setBlock:y,onTryPalette:H})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_e.AF,{website:C,button:null===(a=w.buttons)||void 0===a||null===(d=a.items)||void 0===d?void 0:d[R],onChange:U})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_e.jR,{switchable:!1,button:null===(p=w.buttons)||void 0===p||null===(g=p.items)||void 0===g?void 0:g[R],onChange:U,onValid:function(e){_(e),z(!e)}})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(Zn.Z,{item:M,onChange:function(e){var n=(0,h.p$)(w);n.pictures||(n.pictures=[]),void 0!==e.idx?n.pictures[e.idx]=e:n.pictures.push(e),y(n)}})})]}),(0,u.jsx)(q,{attention:!0})]})}var Rn=(0,Nn.JN)((function(e){var n=e.items,t=e.onSelect,i=e.onRemove;return(0,u.jsx)("ul",{className:"bg-white relative z-5",children:null===n||void 0===n?void 0:n.map((function(e,o){return(0,u.jsx)(Dn,{index:o,idx:o,item:e,last:o===n.length-1,onSelect:t,onRemove:i},"banner-carousel-item-".concat(o))}))})})),Dn=(0,Nn.W8)((function(e){var n,t,i,o,l=e.idx,s=e.item,r=e.last,a=e.onSelect,c=e.onRemove;return(0,u.jsx)("li",{className:(0,h.AK)("relative z-100 bg-white",!r&&"after:absolute after:left-0 after:right-0 after:bottom-0 after:border-b after:border-gray-200 after:z-100"),children:(0,u.jsxs)("div",{className:"relative flex items-center gap-4 hover:bg-gray-50 py-3",children:[(0,u.jsx)("div",{className:"whitespace-nowrap text-sm font-medium text-gray-900 cursor-move flex items-center",children:(0,u.jsx)(Wn,{})}),(0,u.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[s.media?(0,u.jsx)("div",{className:"relative overflow-hidden w-10 h-10 rounded",children:(0,u.jsx)(M(),{unoptimized:!0,src:(null===(n=s.media)||void 0===n?void 0:n.preview)||(null===(t=s.media)||void 0===t?void 0:t.url),layout:"fill",objectFit:"cover",alt:s.altText||(null===(i=s.media)||void 0===i?void 0:i.alt)||(null===(o=s.media)||void 0===o?void 0:o.author),className:"w-full h-full object-center object-cover"})}):(0,u.jsx)("div",{className:"w-9 h-9 rounded bg-gray-200"}),(0,u.jsx)("div",{children:(0,u.jsx)("p",{className:"truncate max-w-[180px] text-sm font-medium text-gray-700 mb-1",children:s.altText})})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("button",{className:"link sm",onClick:function(){return a(l,s)},children:(0,u.jsx)(G.Z,{icon:"PencilIcon",className:"w-5 h-5"})}),(0,u.jsx)("button",{className:"link sm",onClick:function(){return c(l,s)},children:(0,u.jsx)(G.Z,{icon:"TrashIcon",className:"w-5 h-5 text-red-600"})})]})]})})})),Wn=(0,Nn.JV)((function(){return(0,u.jsx)(G.Z,{icon:"DragIcon",className:"w-5 h-5"})}));function Fn(e){var n,t,o,r,a,d,p,g,x=e.open,b=e.setOpen,w=e.block,y=e.setBlock,j=e.rtl,k=e.setRtl,N=e.loading,C=e.website,_=e.onValid,T=(0,v.useState)(null),B=T[0],A=T[1],O=(0,v.useState)(null),R=O[0],D=O[1],W=(0,v.useState)(!1),F=W[0],z=W[1],L=(0,v.useState)(null),M=L[0],V=L[1],$=(0,te.Z)(),K=$.confirm,q=$.ConfirmDialog,H=function(){b(!1)},U=function(e){y((function(n){var t=n.buttons?(0,h.p$)(n.buttons):null;return t||(t={enabled:!0,items:[]}),t.items[R]=e,(0,s.Z)((0,l.Z)({},n),{buttons:t})}))},J=function(){var e=(0,i.Z)((function(e){var n,t,i;return(0,c.__generator)(this,(function(o){return n=e.oldIndex,t=e.newIndex,(i=(0,h.p$)(w)).pictures=(0,Cn.q)(i.pictures,n,t),i.pictures=i.pictures.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})})),y(i),[2]}))}));return function(n){return e.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Banner double image slider",open:x,rtl:j,setRtl:k,edit:B,setEdit:A,loading:N,hiddenTabs:["Colors","Button style","Button settings","Image"],onClose:H,invalid:F,onSelectItem:function(e,n){if("buttons"===n)D(e);else{var t,i=(null===w||void 0===w||null===(t=w.pictures)||void 0===t?void 0:t[e])||{};V((0,s.Z)((0,l.Z)({},i),{idx:e}))}},children:[(0,u.jsxs)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:[(0,u.jsx)(An.Z,{className:"pb-6",block:w,setBlock:y,type:"banner"}),(0,u.jsxs)("div",{className:"py-6",children:[(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("p",{className:"mb-1 font-semibold",children:"Carousel images"}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Select up to 10 images"})]}),(0,u.jsx)("div",{className:"relative",children:(0,u.jsx)(zn,{distance:10,useDragHandle:!0,helperClass:"border-t border-b after:hidden list-none",lockAxis:"y",items:null===w||void 0===w?void 0:w.pictures,onSortEnd:J,onSelect:function(e){var n,t=(null===w||void 0===w||null===(n=w.pictures)||void 0===n?void 0:n[e])||{};V((0,s.Z)((0,l.Z)({},t),{idx:e})),A("Image")},onRemove:function(e){K("Delete image?","Are you sure you want to delete this image?",(function(){var n=(0,h.p$)(w);n.pictures.splice(e,1),n.pictures=n.pictures.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})})),y(n)}))}})}),(!(null===w||void 0===w?void 0:w.pictures)||(null===w||void 0===w||null===(n=w.pictures)||void 0===n?void 0:n.length)<10)&&(0,u.jsx)("div",{className:"pt-4 text-right",children:(0,u.jsxs)("button",{className:"link sm inline-flex items-center gap-2",onClick:function(){var e;V({idx:(null===w||void 0===w||null===(e=w.pictures)||void 0===e?void 0:e.length)||0}),A("Image")},children:[(0,u.jsx)("span",{className:"text-sm",children:"Add image"}),(0,u.jsx)(G.Z,{icon:"PlusIcon",className:"w-5 h-5"})]})})]}),(0,u.jsx)(jn.Z,{className:"pt-6",block:w,setBlock:y,onEdit:function(){return A("Button settings")},setSelected:D,text:"Add a button with a link to a page, phone number, email or section"})]}),(0,u.jsxs)(f.O.Panel,{className:"divide-y space-y-6 outline-none",unmount:!1,children:[(0,u.jsx)(S._u,{website:C,block:w,onEdit:function(){return A("Colors")}}),(null===w||void 0===w||null===(t=w.buttons)||void 0===t?void 0:t.enabled)&&(null===w||void 0===w||null===(o=w.buttons)||void 0===o||null===(r=o.items)||void 0===r?void 0:r.length)>0&&(0,u.jsx)(_e.ZJ,{className:"pt-6",website:C,block:w,onEdit:function(e){D(e),A("Button style")},onTryPalette:H}),(0,u.jsx)(Bn,{className:"pt-6",block:w,setBlock:y}),(0,u.jsx)(In,{className:"pt-6",block:w,setBlock:y,imagePlacement:!1}),(0,u.jsx)(I.Z,{className:"pt-6",block:w,setBlock:y}),(0,u.jsx)(P.nR,{className:"py-6",value:null===w||void 0===w?void 0:w.cornerRadius,defaultValue:null===C||void 0===C?void 0:C.cornerRadius,onChange:function(e){return y((0,s.Z)((0,l.Z)({},w),{cornerRadius:e}))}}),(0,u.jsx)(E.ZP,{className:"pt-6",block:w,setBlock:y,horizontalAlign:!1,verticalAlign:!1,minHeight:!1}),(0,u.jsx)(Z.iy,{className:"pt-6",block:w,setBlock:y,website:C}),(0,u.jsx)(kn.Z,{className:"pt-6",block:w,setBlock:y})]}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(S.px,{website:C,block:w,setBlock:y,onTryPalette:H})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_e.AF,{website:C,button:null===(a=w.buttons)||void 0===a||null===(d=a.items)||void 0===d?void 0:d[R],onChange:U})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_e.jR,{switchable:!1,button:null===(p=w.buttons)||void 0===p||null===(g=p.items)||void 0===g?void 0:g[R],onChange:U,onValid:function(e){_(e),z(!e)}})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(Zn.Z,{item:M,onChange:function(e){var n=(0,h.p$)(w);n.pictures||(n.pictures=[]),void 0!==e.idx?n.pictures[e.idx]=e:n.pictures.push(e),y(n)}})})]}),(0,u.jsx)(q,{attention:!0})]})}var zn=(0,Nn.JN)((function(e){var n=e.items,t=e.onSelect,i=e.onRemove;return(0,u.jsx)("ul",{className:"bg-white relative z-5",children:null===n||void 0===n?void 0:n.map((function(e,o){return(0,u.jsx)(Gn,{index:o,idx:o,item:e,last:o===n.length-1,onSelect:t,onRemove:i},"banner-carousel-item-".concat(o))}))})})),Gn=(0,Nn.W8)((function(e){var n,t,i,o,l=e.idx,s=e.item,r=e.last,a=e.onSelect,c=e.onRemove;return(0,u.jsx)("li",{className:(0,h.AK)("relative z-100 bg-white",!r&&"after:absolute after:left-0 after:right-0 after:bottom-0 after:border-b after:border-gray-200 after:z-100"),children:(0,u.jsxs)("div",{className:"relative flex items-center gap-4 hover:bg-gray-50 py-3",children:[(0,u.jsx)("div",{className:"whitespace-nowrap text-sm font-medium text-gray-900 cursor-move flex items-center",children:(0,u.jsx)(Ln,{})}),(0,u.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[s.media?(0,u.jsx)("div",{className:"relative overflow-hidden w-10 h-10 rounded",children:(0,u.jsx)(M(),{unoptimized:!0,src:(null===(n=s.media)||void 0===n?void 0:n.preview)||(null===(t=s.media)||void 0===t?void 0:t.url),layout:"fill",objectFit:"cover",alt:s.altText||(null===(i=s.media)||void 0===i?void 0:i.alt)||(null===(o=s.media)||void 0===o?void 0:o.author),className:"w-full h-full object-center object-cover"})}):(0,u.jsx)("div",{className:"w-9 h-9 rounded bg-gray-200"}),(0,u.jsx)("div",{children:(0,u.jsx)("p",{className:"truncate max-w-[180px] text-sm font-medium text-gray-700 mb-1",children:s.altText})})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("button",{className:"link sm",onClick:function(){return a(l,s)},children:(0,u.jsx)(G.Z,{icon:"PencilIcon",className:"w-5 h-5"})}),(0,u.jsx)("button",{className:"link sm",onClick:function(){return c(l,s)},children:(0,u.jsx)(G.Z,{icon:"TrashIcon",className:"w-5 h-5 text-red-600"})})]})]})})})),Ln=(0,Nn.JV)((function(){return(0,u.jsx)(G.Z,{icon:"DragIcon",className:"w-5 h-5"})}));function Mn(e){var n,t,o,r,a,d,p,g,x=e.open,b=e.setOpen,w=e.block,y=e.setBlock,j=e.rtl,k=e.setRtl,N=e.loading,C=e.website,_=e.onValid,T=(0,v.useState)(null),B=T[0],A=T[1],O=(0,v.useState)(null),R=O[0],D=O[1],W=(0,v.useState)(!1),F=W[0],z=W[1],L=(0,v.useState)(null),M=L[0],V=L[1],$=(0,te.Z)(),K=$.confirm,q=$.ConfirmDialog,H=function(){b(!1)},U=function(e){y((function(n){var t=n.buttons?(0,h.p$)(n.buttons):null;return t||(t={enabled:!0,items:[]}),t.items[R]=e,(0,s.Z)((0,l.Z)({},n),{buttons:t})}))},J=function(){var e=(0,i.Z)((function(e){var n,t,i;return(0,c.__generator)(this,(function(o){return n=e.oldIndex,t=e.newIndex,(i=(0,h.p$)(w)).pictures=(0,Cn.q)(i.pictures,n,t),i.pictures=i.pictures.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})})),y(i),[2]}))}));return function(n){return e.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Banner carousel",open:x,rtl:j,setRtl:k,edit:B,setEdit:A,loading:N,hiddenTabs:["Colors","Button style","Button settings","Image"],onClose:H,invalid:F,onSelectItem:function(e,n){if("buttons"===n)D(e);else{var t,i=(null===w||void 0===w||null===(t=w.pictures)||void 0===t?void 0:t[e])||{};V((0,s.Z)((0,l.Z)({},i),{idx:e}))}},children:[(0,u.jsxs)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:[(0,u.jsx)(An.Z,{className:"pb-6",block:w,setBlock:y,type:"banner"}),(0,u.jsxs)("div",{className:"py-6",children:[(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("p",{className:"mb-1 font-semibold",children:"Carousel images"}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Select up to 10 images"})]}),(0,u.jsx)("div",{className:"relative",children:(0,u.jsx)(Vn,{distance:10,useDragHandle:!0,helperClass:"border-t border-b after:hidden list-none",lockAxis:"y",items:null===w||void 0===w?void 0:w.pictures,onSortEnd:J,onSelect:function(e){var n,t=(null===w||void 0===w||null===(n=w.pictures)||void 0===n?void 0:n[e])||{};V((0,s.Z)((0,l.Z)({},t),{idx:e})),A("Image")},onRemove:function(e){K("Delete image?","Are you sure you want to delete this image?",(function(){var n=(0,h.p$)(w);n.pictures.splice(e,1),n.pictures=n.pictures.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})})),y(n)}))}})}),(!(null===w||void 0===w?void 0:w.pictures)||(null===w||void 0===w||null===(n=w.pictures)||void 0===n?void 0:n.length)<10)&&(0,u.jsx)("div",{className:"pt-4 text-right",children:(0,u.jsxs)("button",{className:"link sm inline-flex items-center gap-2",onClick:function(){var e;V({idx:(null===w||void 0===w||null===(e=w.pictures)||void 0===e?void 0:e.length)||0}),A("Image")},children:[(0,u.jsx)("span",{className:"text-sm",children:"Add image"}),(0,u.jsx)(G.Z,{icon:"PlusIcon",className:"w-5 h-5"})]})})]}),(0,u.jsx)(jn.Z,{className:"pt-6",block:w,setBlock:y,onEdit:function(){return A("Button settings")},setSelected:D,text:"Add a button with a link to a page, phone number, email or section"})]}),(0,u.jsxs)(f.O.Panel,{className:"divide-y space-y-6 outline-none",unmount:!1,children:[(0,u.jsx)(S._u,{website:C,block:w,onEdit:function(){return A("Colors")}}),(null===w||void 0===w||null===(t=w.buttons)||void 0===t?void 0:t.enabled)&&(null===w||void 0===w||null===(o=w.buttons)||void 0===o||null===(r=o.items)||void 0===r?void 0:r.length)>0&&(0,u.jsx)(_e.ZJ,{className:"pt-6",website:C,block:w,onEdit:function(e){D(e),A("Button style")},onTryPalette:H}),(0,u.jsx)(In,{className:"pt-6",block:w,setBlock:y,imagePlacement:!1,sliderOrientation:!1}),(0,u.jsx)(I.Z,{className:"pt-6",block:w,setBlock:y}),(0,u.jsx)(P.nR,{className:"py-6",value:null===w||void 0===w?void 0:w.cornerRadius,defaultValue:null===C||void 0===C?void 0:C.cornerRadius,onChange:function(e){return y((0,s.Z)((0,l.Z)({},w),{cornerRadius:e}))}}),(0,u.jsx)(E.ZP,{className:"pt-6",block:w,setBlock:y,horizontalAlign:!1,verticalAlign:!1,minHeight:!1}),(0,u.jsx)(Z.iy,{className:"pt-6",block:w,setBlock:y,website:C}),(0,u.jsx)(kn.Z,{className:"pt-6",block:w,setBlock:y})]}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(S.px,{website:C,block:w,setBlock:y,onTryPalette:H})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_e.AF,{website:C,button:null===(a=w.buttons)||void 0===a||null===(d=a.items)||void 0===d?void 0:d[R],onChange:U})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_e.jR,{switchable:!1,button:null===(p=w.buttons)||void 0===p||null===(g=p.items)||void 0===g?void 0:g[R],onChange:U,onValid:function(e){_(e),z(!e)}})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(Zn.Z,{item:M,onChange:function(e){var n=(0,h.p$)(w);n.pictures||(n.pictures=[]),void 0!==e.idx?n.pictures[e.idx]=e:n.pictures.push(e),y(n)}})})]}),(0,u.jsx)(q,{attention:!0})]})}var Vn=(0,Nn.JN)((function(e){var n=e.items,t=e.onSelect,i=e.onRemove;return(0,u.jsx)("ul",{className:"bg-white relative z-5",children:null===n||void 0===n?void 0:n.map((function(e,o){return(0,u.jsx)($n,{index:o,idx:o,item:e,last:o===n.length-1,onSelect:t,onRemove:i},"banner-carousel-item-".concat(o))}))})})),$n=(0,Nn.W8)((function(e){var n,t,i,o,l=e.idx,s=e.item,r=e.last,a=e.onSelect,c=e.onRemove;return(0,u.jsx)("li",{className:(0,h.AK)("relative z-100 bg-white",!r&&"after:absolute after:left-0 after:right-0 after:bottom-0 after:border-b after:border-gray-200 after:z-100"),children:(0,u.jsxs)("div",{className:"relative flex items-center gap-4 hover:bg-gray-50 py-3",children:[(0,u.jsx)("div",{className:"whitespace-nowrap text-sm font-medium text-gray-900 cursor-move flex items-center",children:(0,u.jsx)(Kn,{})}),(0,u.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[s.media?(0,u.jsx)("div",{className:"relative overflow-hidden w-10 h-10 rounded",children:(0,u.jsx)(M(),{unoptimized:!0,src:(null===(n=s.media)||void 0===n?void 0:n.preview)||(null===(t=s.media)||void 0===t?void 0:t.url),layout:"fill",objectFit:"cover",alt:s.altText||(null===(i=s.media)||void 0===i?void 0:i.alt)||(null===(o=s.media)||void 0===o?void 0:o.author),className:"w-full h-full object-center object-cover"})}):(0,u.jsx)("div",{className:"w-9 h-9 rounded bg-gray-200"}),(0,u.jsx)("div",{children:(0,u.jsx)("p",{className:"truncate max-w-[180px] text-sm font-medium text-gray-700 mb-1",children:s.altText})})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("button",{className:"link sm",onClick:function(){return a(l,s)},children:(0,u.jsx)(G.Z,{icon:"PencilIcon",className:"w-5 h-5"})}),(0,u.jsx)("button",{className:"link sm",onClick:function(){return c(l,s)},children:(0,u.jsx)(G.Z,{icon:"TrashIcon",className:"w-5 h-5 text-red-600"})})]})]})})})),Kn=(0,Nn.JV)((function(){return(0,u.jsx)(G.Z,{icon:"DragIcon",className:"w-5 h-5"})}));function qn(e){var n,t,o,r,a,d,p,g,x=e.open,b=e.setOpen,w=e.block,y=e.setBlock,j=e.rtl,k=e.setRtl,N=e.loading,C=e.website,_=e.onValid,T=(0,v.useState)(null),B=T[0],A=T[1],O=(0,v.useState)(null),R=O[0],D=O[1],W=(0,v.useState)(!1),F=W[0],z=W[1],L=(0,v.useState)(null),M=L[0],V=L[1],$=(0,te.Z)(),K=$.confirm,q=$.ConfirmDialog,H=function(){b(!1)},U=function(e){y((function(n){var t=n.buttons?(0,h.p$)(n.buttons):null;return t||(t={enabled:!0,items:[]}),t.items[R]=e,(0,s.Z)((0,l.Z)({},n),{buttons:t})}))},J=function(){var e=(0,i.Z)((function(e){var n,t,i;return(0,c.__generator)(this,(function(o){return n=e.oldIndex,t=e.newIndex,(i=(0,h.p$)(w)).pictures=(0,Cn.q)(i.pictures,n,t),i.pictures=i.pictures.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})})),y(i),[2]}))}));return function(n){return e.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(m.Z,{title:"Banner bento grid",open:x,rtl:j,setRtl:k,edit:B,setEdit:A,loading:N,hiddenTabs:["Colors","Button style","Button settings","Image"],onClose:H,invalid:F,onSelectItem:function(e,n){if("buttons"===n)D(e);else{var t,i=(null===w||void 0===w||null===(t=w.pictures)||void 0===t?void 0:t[e])||{};V((0,s.Z)((0,l.Z)({},i),{idx:e}))}},children:[(0,u.jsxs)(f.O.Panel,{className:"divide-y outline-none",unmount:!1,children:[(0,u.jsx)(An.Z,{className:"pb-6",block:w,setBlock:y,type:"banner"}),(0,u.jsxs)("div",{className:"py-6",children:[(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("p",{className:"mb-1 font-semibold",children:"Images"}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:"Select up to 3 images"})]}),(0,u.jsx)("div",{className:"relative",children:(0,u.jsx)(Un,{distance:10,useDragHandle:!0,helperClass:"border-t border-b after:hidden list-none",lockAxis:"y",items:null===w||void 0===w?void 0:w.pictures,onSortEnd:J,onSelect:function(e){var n,t=(null===w||void 0===w||null===(n=w.pictures)||void 0===n?void 0:n[e])||{};V((0,s.Z)((0,l.Z)({},t),{idx:e})),A("Image")},onRemove:function(e){K("Delete image?","Are you sure you want to delete this image?",(function(){var n=(0,h.p$)(w);n.pictures.splice(e,1),n.pictures=n.pictures.map((function(e,n){return(0,s.Z)((0,l.Z)({},e),{idx:n})})),y(n)}))}})}),(!(null===w||void 0===w?void 0:w.pictures)||(null===w||void 0===w||null===(n=w.pictures)||void 0===n?void 0:n.length)<3)&&(0,u.jsx)("div",{className:"pt-4 text-right",children:(0,u.jsxs)("button",{className:"link sm inline-flex items-center gap-2",onClick:function(){var e;V({idx:(null===w||void 0===w||null===(e=w.pictures)||void 0===e?void 0:e.length)||0}),A("Image")},children:[(0,u.jsx)("span",{className:"text-sm",children:"Add image"}),(0,u.jsx)(G.Z,{icon:"PlusIcon",className:"w-5 h-5"})]})})]}),(0,u.jsx)(jn.Z,{className:"pt-6",block:w,setBlock:y,onEdit:function(){return A("Button settings")},setSelected:D,text:"Add a button with a link to a page, phone number, email or section"})]}),(0,u.jsxs)(f.O.Panel,{className:"divide-y space-y-6 outline-none",unmount:!1,children:[(0,u.jsx)(S._u,{website:C,block:w,onEdit:function(){return A("Colors")}}),(null===w||void 0===w||null===(t=w.buttons)||void 0===t?void 0:t.enabled)&&(null===w||void 0===w||null===(o=w.buttons)||void 0===o||null===(r=o.items)||void 0===r?void 0:r.length)>0&&(0,u.jsx)(_e.ZJ,{className:"pt-6",website:C,block:w,onEdit:function(e){D(e),A("Button style")},onTryPalette:H}),(0,u.jsx)(I.Z,{className:"pt-6",block:w,setBlock:y}),(0,u.jsx)(P.nR,{className:"pt-6",value:null===w||void 0===w?void 0:w.cornerRadius,defaultValue:null===C||void 0===C?void 0:C.cornerRadius,onChange:function(e){return y((0,s.Z)((0,l.Z)({},w),{cornerRadius:e}))}}),(0,u.jsx)(E.ZP,{className:"pt-6",block:w,setBlock:y,horizontalAlign:!1,verticalAlign:!1,minHeight:!1}),(0,u.jsx)(Z.iy,{className:"pt-6",block:w,setBlock:y,website:C}),(0,u.jsx)(kn.Z,{className:"pt-6",block:w,setBlock:y})]}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(S.px,{website:C,block:w,setBlock:y,onTryPalette:H})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_e.AF,{website:C,button:null===(a=w.buttons)||void 0===a||null===(d=a.items)||void 0===d?void 0:d[R],onChange:U})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(_e.jR,{switchable:!1,button:null===(p=w.buttons)||void 0===p||null===(g=p.items)||void 0===g?void 0:g[R],onChange:U,onValid:function(e){_(e),z(!e)}})}),(0,u.jsx)(f.O.Panel,{unmount:!1,children:(0,u.jsx)(Zn.Z,{item:M,onChange:function(e){var n=(0,h.p$)(w);n.pictures||(n.pictures=[]),void 0!==e.idx?n.pictures[e.idx]=e:n.pictures.push(e),y(n)}})})]}),(0,u.jsx)(q,{attention:!0})]})}var Hn,Un=(0,Nn.JN)((function(e){var n=e.items,t=e.onSelect,i=e.onRemove;return(0,u.jsx)("ul",{className:"bg-white relative z-5",children:null===n||void 0===n?void 0:n.map((function(e,o){return(0,u.jsx)(Jn,{index:o,idx:o,item:e,last:o===n.length-1,onSelect:t,onRemove:i},"banner-carousel-item-".concat(o))}))})})),Jn=(0,Nn.W8)((function(e){var n,t,i,o,l=e.idx,s=e.item,r=e.last,a=e.onSelect,c=e.onRemove;return(0,u.jsx)("li",{className:(0,h.AK)("relative z-100 bg-white",!r&&"after:absolute after:left-0 after:right-0 after:bottom-0 after:border-b after:border-gray-200 after:z-100"),children:(0,u.jsxs)("div",{className:"relative flex items-center gap-4 hover:bg-gray-50 py-3",children:[(0,u.jsx)("div",{className:"whitespace-nowrap text-sm font-medium text-gray-900 cursor-move flex items-center",children:(0,u.jsx)(Yn,{})}),(0,u.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[s.media?(0,u.jsx)("div",{className:"relative overflow-hidden w-10 h-10 rounded",children:(0,u.jsx)(M(),{unoptimized:!0,src:(null===(n=s.media)||void 0===n?void 0:n.preview)||(null===(t=s.media)||void 0===t?void 0:t.url),layout:"fill",objectFit:"cover",alt:s.altText||(null===(i=s.media)||void 0===i?void 0:i.alt)||(null===(o=s.media)||void 0===o?void 0:o.author),className:"w-full h-full object-center object-cover"})}):(0,u.jsx)("div",{className:"w-9 h-9 rounded bg-gray-200"}),(0,u.jsx)("div",{children:(0,u.jsx)("p",{className:"truncate max-w-[180px] text-sm font-medium text-gray-700 mb-1",children:s.altText})})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("button",{className:"link sm",onClick:function(){return a(l,s)},children:(0,u.jsx)(G.Z,{icon:"PencilIcon",className:"w-5 h-5"})}),(0,u.jsx)("button",{className:"link sm",onClick:function(){return c(l,s)},children:(0,u.jsx)(G.Z,{icon:"TrashIcon",className:"w-5 h-5 text-red-600"})})]})]})})})),Yn=(0,Nn.JV)((function(){return(0,u.jsx)(G.Z,{icon:"DragIcon",className:"w-5 h-5"})})),Xn=dn()((function(){return t.e(7786).then(t.bind(t,67040))}),{loadableGenerated:{webpack:function(){return[67040]}},loading:function(){return""},ssr:!0}),Qn=dn()((function(){return t.e(4969).then(t.bind(t,54969))}),{loadableGenerated:{webpack:function(){return[54969]}},loading:function(){return""},ssr:!0}),et=dn()((function(){return t.e(2426).then(t.bind(t,42426))}),{loadableGenerated:{webpack:function(){return[42426]}},loading:function(){return""},ssr:!0}),nt=dn()((function(){return t.e(2659).then(t.bind(t,12659))}),{loadableGenerated:{webpack:function(){return[12659]}},loading:function(){return""},ssr:!0}),tt=dn()((function(){return Promise.all([t.e(6235),t.e(8622),t.e(3994),t.e(4513),t.e(1484)]).then(t.bind(t,91719))}),{loadableGenerated:{webpack:function(){return[91719]}},loading:function(){return""},ssr:!0}),it=dn()((function(){return t.e(1443).then(t.bind(t,31443))}),{loadableGenerated:{webpack:function(){return[31443]}},loading:function(){return""},ssr:!0}),ot=dn()((function(){return t.e(6388).then(t.bind(t,96388))}),{loadableGenerated:{webpack:function(){return[96388]}},loading:function(){return""},ssr:!0}),lt=dn()((function(){return Promise.all([t.e(6235),t.e(9455)]).then(t.bind(t,9455))}),{loadableGenerated:{webpack:function(){return[9455]}},loading:function(){return""},ssr:!0}),st=dn()((function(){return t.e(932).then(t.bind(t,90932))}),{loadableGenerated:{webpack:function(){return[90932]}},loading:function(){return""},ssr:!0}),rt=dn()((function(){return t.e(7647).then(t.bind(t,27647))}),{loadableGenerated:{webpack:function(){return[27647]}},loading:function(){return""},ssr:!0}),at=dn()((function(){return Promise.resolve().then(t.bind(t,4490))}),{loadableGenerated:{webpack:function(){return[4490]}},loading:function(){return""},ssr:!0}),ct=dn()((function(){return t.e(378).then(t.bind(t,90378))}),{loadableGenerated:{webpack:function(){return[90378]}},loading:function(){return""},ssr:!0}),ut=dn()((function(){return Promise.all([t.e(6235),t.e(9294)]).then(t.bind(t,59294))}),{loadableGenerated:{webpack:function(){return[59294]}},loading:function(){return""},ssr:!0}),dt=dn()((function(){return t.e(5965).then(t.bind(t,45965))}),{loadableGenerated:{webpack:function(){return[45965]}},loading:function(){return""},ssr:!0}),vt=dn()((function(){return Promise.all([t.e(6235),t.e(7894)]).then(t.bind(t,97894))}),{loadableGenerated:{webpack:function(){return[97894]}},loading:function(){return""},ssr:!0}),mt=dn()((function(){return Promise.all([t.e(6235),t.e(1025)]).then(t.bind(t,41025))}),{loadableGenerated:{webpack:function(){return[41025]}},loading:function(){return""},ssr:!0}),ft=dn()((function(){return Promise.all([t.e(696),t.e(1172),t.e(7687)]).then(t.bind(t,14387))}),{loadableGenerated:{webpack:function(){return[14387]}},loading:function(){return""},ssr:!0}),pt=dn()((function(){return Promise.all([t.e(696),t.e(4544),t.e(6074),t.e(4533)]).then(t.bind(t,4533))}),{loadableGenerated:{webpack:function(){return[4533]}},loading:function(){return""},ssr:!0}),ht=dn()((function(){return t.e(3143).then(t.bind(t,3143))}),{loadableGenerated:{webpack:function(){return[3143]}},loading:function(){return""},ssr:!0}),gt=dn()((function(){return t.e(3521).then(t.bind(t,13521))}),{loadableGenerated:{webpack:function(){return[13521]}},loading:function(){return""},ssr:!0}),xt=dn()((function(){return t.e(4417).then(t.bind(t,14417))}),{loadableGenerated:{webpack:function(){return[14417]}},loading:function(){return""},ssr:!0}),bt=dn()((function(){return t.e(6855).then(t.bind(t,66855))}),{loadableGenerated:{webpack:function(){return[66855]}},loading:function(){return""},ssr:!0}),wt=dn()((function(){return Promise.all([t.e(6235),t.e(5973)]).then(t.bind(t,85973))}),{loadableGenerated:{webpack:function(){return[85973]}},loading:function(){return""},ssr:!0}),yt=dn()((function(){return t.e(2825).then(t.bind(t,92825))}),{loadableGenerated:{webpack:function(){return[92825]}},loading:function(){return""},ssr:!0}),jt=dn()((function(){return Promise.all([t.e(6235),t.e(646)]).then(t.bind(t,40646))}),{loadableGenerated:{webpack:function(){return[40646]}},loading:function(){return""},ssr:!0}),kt=dn()((function(){return t.e(3755).then(t.bind(t,13755))}),{loadableGenerated:{webpack:function(){return[13755]}},loading:function(){return""},ssr:!0}),Nt=dn()((function(){return t.e(4216).then(t.bind(t,64216))}),{loadableGenerated:{webpack:function(){return[64216]}},loading:function(){return""},ssr:!0}),Zt=dn()((function(){return t.e(9164).then(t.bind(t,39164))}),{loadableGenerated:{webpack:function(){return[39164]}},loading:function(){return""},ssr:!0}),Ct=dn()((function(){return t.e(6492).then(t.bind(t,66492))}),{loadableGenerated:{webpack:function(){return[66492]}},loading:function(){return""},ssr:!0}),St=dn()((function(){return Promise.all([t.e(6235),t.e(431),t.e(6001),t.e(4679),t.e(4513),t.e(3900)]).then(t.bind(t,83900))}),{loadableGenerated:{webpack:function(){return[83900]}},loading:function(){return""},ssr:!0}),_t=dn()((function(){return t.e(1644).then(t.bind(t,11644))}),{loadableGenerated:{webpack:function(){return[11644]}},loading:function(){return""},ssr:!0}),Pt=dn()((function(){return t.e(2194).then(t.bind(t,32194))}),{loadableGenerated:{webpack:function(){return[32194]}},loading:function(){return""},ssr:!0}),Et=dn()((function(){return t.e(187).then(t.bind(t,10187))}),{loadableGenerated:{webpack:function(){return[10187]}},loading:function(){return""},ssr:!0}),It=dn()((function(){return t.e(4745).then(t.bind(t,24745))}),{loadableGenerated:{webpack:function(){return[24745]}},loading:function(){return""},ssr:!0}),Tt=dn()((function(){return t.e(1427).then(t.bind(t,61427))}),{loadableGenerated:{webpack:function(){return[61427]}},loading:function(){return""},ssr:!0}),Bt=!0;function At(){var e,n,t,m,f=function(e,n){n||(n=Ce.find((function(e){return e.id===xe.id})));var t=n&&(null===n||void 0===n?void 0:n.blocks)?(0,h.p$)(n.blocks):null;if(t){var o=t.shift(),l=t.pop();e.push((0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return[4,Oi("/website/save-header-and-footer-blocks",{idPage:n.id,header:o,footer:l,wipeCache:!1})];case 1:if(null===(e=t.sent())||void 0===e?void 0:e.status)return[2,!0];throw e.message}}))}))),e.push((0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return[4,Oi("/website/save-social",{social:q,wipeCache:!1})];case 1:if(null===(e=n.sent())||void 0===e?void 0:e.status)return[2,!0];throw e.message}}))})));var s=t;e.push((0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return[4,Oi("/website/save-blocks",{idPage:n.id,blocks:s,wipeCache:!1})];case 1:if(null===(e=t.sent())||void 0===e?void 0:e.status)return[2,!0];throw e.message}}))})))}return n},p=(0,v.useState)(!1),x=p[0],b=p[1],w=(0,v.useState)(!1),y=w[0],j=w[1],k=(0,v.useState)(!1),N=k[0],Z=k[1],C=(0,v.useState)(!1),_=C[0],P=C[1],E=(0,v.useState)((0,h.tl)("business.config")),I=E[0],T=E[1],B=(0,v.useState)(null),O=B[0],z=B[1],G=(0,v.useState)((0,h.tl)("pages")),L=G[0],M=G[1],K=(0,r.Z)((0,me.Z)("website-social",{}),2),q=K[0],oe=K[1],le=(0,v.useState)(!0),se=le[0],fe=le[1],he=(0,v.useState)(L?L[0]:null),xe=he[0],we=he[1],ke=(0,v.useState)("desktop"),Ne=(ke[0],ke[1]),Ze=(0,v.useState)([]),Ce=Ze[0],Se=Ze[1],_e=(0,v.useState)(null),Pe=_e[0],Ee=_e[1],Re=(0,v.useState)(!1),De=Re[0],We=Re[1],Fe=(0,v.useState)(!1),ze=Fe[0],Ge=Fe[1],Le=(0,v.useState)(!1),Me=Le[0],Ve=Le[1],$e=(0,v.useState)(!1),Je=$e[0],Ye=$e[1],Xe=(0,v.useState)(!1),Qe=Xe[0],en=Xe[1],nn=(0,v.useState)(!1),tn=nn[0],on=nn[1],sn=(0,v.useState)(!1),un=sn[0],dn=sn[1],vn=(0,v.useState)(!1),mn=vn[0],fn=vn[1],pn=(0,v.useState)(!1),hn=pn[0],xn=pn[1],jn=(0,v.useState)(!1),kn=(jn[0],jn[1]),Nn=(0,v.useState)(0),Zn=Nn[0],Cn=Nn[1],Sn=(0,r.Z)((0,me.Z)("websiteBuilder.paywall",""),2),_n=Sn[0],Pn=Sn[1],En=(0,v.useState)(!1),In=En[0],Tn=En[1],Bn=(0,v.useState)(!1),An=Bn[0],Rn=Bn[1],Dn=(0,v.useState)(!1),Wn=Dn[0],zn=Dn[1],Gn=(0,v.useState)(!1),Ln=(Gn[0],Gn[1]),Vn=(0,v.useState)(!1),$n=Vn[0],Kn=Vn[1],Un=(0,v.useState)(null),Jn=Un[0],Yn=Un[1],Bt=(0,v.useState)(!1),At=Bt[0],Ot=Bt[1],Rt=(0,v.useState)(!1),Dt=Rt[0],Wt=Rt[1],Ft=(0,v.useState)(!1),zt=Ft[0],Gt=Ft[1],Lt=(0,v.useState)(!1),Mt=Lt[0],Vt=Lt[1],$t=(0,v.useState)(null),Kt=$t[0],qt=$t[1],Ht=(0,v.useState)(0),Ut=Ht[0],Jt=Ht[1],Yt=(0,v.useState)(0),Xt=Yt[0],Qt=Yt[1],ei=(0,v.useState)(!1),ni=ei[0],ti=ei[1],ii=(0,v.useState)(!1),oi=ii[0],li=ii[1],si=(0,v.useState)(!1),ri=si[0],ai=si[1],ci=(0,v.useState)("Generating..."),ui=ci[0],di=ci[1],vi=(0,v.useState)([]),mi=vi[0],fi=vi[1],pi=(0,v.useState)(null),hi=pi[0],gi=pi[1],xi=(0,v.useState)([]),bi=xi[0],wi=xi[1],yi=(0,v.useState)(null),ji=yi[0],ki=yi[1],Ni=(0,v.useState)([]),Zi=Ni[0],Ci=Ni[1],Si=(0,V.useSession)().data,_i=(0,Ae.Z)(Kt),Pi=_i.generateBlock,Ei=_i.chooseTemplate,Ii=_i.generateLoadingLabel,Ti=(0,ne.useRouter)(),Bi=(0,g.Z)(),Ai=Bi.get,Oi=Bi.post,Ri=(Bi.remove,(0,cn.Z)().post),Di=(0,te.Z)(),Wi=Di.confirm,Fi=Di.ConfirmDialog,zi=(0,te.Z)(),Gi=zi.confirm,Li=zi.ConfirmDialog,Mi=(0,te.Z)(),Vi=Mi.confirm,$i=Mi.ConfirmDialog,Ki=(0,te.Z)(),qi=Ki.confirm,Hi=Ki.ConfirmDialog,Ui=(0,te.Z)(),Ji=Ui.confirm,Yi=Ui.ConfirmDialog,Xi=(0,Be.Z)(),Qi=Xi.confirm,eo=Xi.ConfirmDialog,no=(0,te.Z)(),to=no.confirm,io=no.ConfirmDialog,oo=(0,v.useRef)(null),lo=(0,v.useState)(""),so=lo[0],ro=lo[1],ao=(0,v.useState)(0),co=ao[0],uo=ao[1],vo=(0,v.useState)(!1),mo=vo[0],fo=vo[1],po=(0,v.useState)(!1),ho=po[0],go=po[1],xo=(0,v.useState)(!1),bo=xo[0],wo=xo[1],yo=(0,v.useState)(!1),jo=yo[0],ko=yo[1],No=(0,v.useState)(!1),Zo=No[0],Co=No[1],So=(0,v.useState)(null===(e=Ti.query)||void 0===e?void 0:e.routerAction),_o=So[0],Po=So[1],Eo=(0,v.useState)(!1),Io=Eo[0],To=Eo[1],Bo=(0,v.useState)({website:{},page:{},selectedPageId:null}),Ao=Bo[0],Oo=Bo[1],Ro=(0,r.Z)((0,me.Z)("month-posts-count",0),2),Do=Ro[0],Wo=Ro[1],Fo=(0,v.useState)(!1),zo=Fo[0],Go=Fo[1],Lo=(0,v.useState)(!1),Mo=Lo[0],Vo=Lo[1],$o=(0,ie.S)(),Ko=$o.openSupport,qo=$o.closeSupport,Ho=$o.isOpenSupport;!function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).shouldWarn;(0,v.useEffect)((function(){var n=function(n){if(e)return n.preventDefault(),(n||window.event).returnValue="Are you sure you want to leave?"};return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}}),[e])}({shouldWarn:y&&!_n});var Uo=(0,v.useState)([]),Jo=Uo[0],Yo=Uo[1],Xo=(0,v.useState)(null),Qo=Xo[0],el=Xo[1],nl=(0,v.useState)(!1),tl=nl[0],il=nl[1],ol=(0,v.useState)(!1),ll=ol[0],sl=ol[1],rl=(0,r.Z)((0,me.Z)("website:inline-edit",null,!1),2),al=(rl[0],rl[1]),cl=(0,r.Z)((0,me.Z)("support.modal",!1),2)[1],ul=(0,r.Z)((0,me.Z)("afterUpgrade"),2),dl=ul[0],vl=ul[1],ml=(0,v.useState)(0),fl=ml[0],pl=ml[1],hl=(0,v.useState)(null),gl=hl[0],xl=hl[1],bl=(0,v.useState)(!1),wl=bl[0],yl=bl[1],jl=(0,v.useState)(!1),kl=jl[0],Nl=jl[1],Zl=(0,v.useState)(!1),Cl=Zl[0],Sl=Zl[1],_l=(0,v.useState)(!1),Pl=_l[0],El=_l[1],Il=(0,v.useState)(null),Tl=(Il[0],Il[1],(0,v.useState)(!1)),Bl=Tl[0],Al=Tl[1],Ol="blog"===(null===xe||void 0===xe?void 0:xe.type),Rl=null===Ce||void 0===Ce?void 0:Ce.find((function(e){return e.id===(null===xe||void 0===xe?void 0:xe.id)})),Dl=(0,$.Z)().track,Wl=function(){var e=(0,i.Z)((function(e,n){return(0,c.__generator)(this,(function(t){return z(e),es(e),Ql({settings:null===e||void 0===e?void 0:e.socialSettings,items:Array.isArray(e.social)?e.social:[]}),ls(e.widgets),Xl((0,s.Z)((0,l.Z)({},n),{blocks:[e.header].concat((0,a.Z)(n.blocks),[e.footer])})),[2]}))}));return function(n,t){return e.apply(this,arguments)}}(),Fl=function(){var e=(0,i.Z)((function(e){var n;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return[4,Ai("/business/get-config")];case 1:return(n=t.sent())&&!0===n.status&&n.content&&((0,h.Fs)("business.config",n.content),T(n.content),e&&e(n.content)),e&&e(I),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),zl=function(){var e=(0,i.Z)((function(){var e,n,t,i,o,r,a,u,v,m,f,p,g,x,b;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return[4,Ai("/website/get",{populate:!0,withOfficeLocation:!0})];case 1:return(e=c.sent())&&!0===e.status&&e.content?(b=(0,s.Z)((0,l.Z)({},e.content),{business:{name:null===(n=e.content)||void 0===n||null===(t=n.Business)||void 0===t?void 0:t.name,vertical:(0,He.x)(null===(i=e.content)||void 0===i?void 0:i.Business),location:(0,Ue.P)({office:{address:null===(o=e.content)||void 0===o?void 0:o.completeLocation}}),description:null===(r=e.content)||void 0===r||null===(a=r.Business)||void 0===a||null===(u=a.settings)||void 0===u||null===(v=u.ai)||void 0===v?void 0:v.description,services:null===(m=e.content)||void 0===m||null===(f=m.Business)||void 0===f||null===(p=f.settings)||void 0===p||null===(g=p.ai)||void 0===g?void 0:g.services,language:(0,d.YJ)(null===(x=e.content)||void 0===x?void 0:x.Business)}}),qt((0,h.p$)(b)),"disabled"!==b.status?[3,3]:[4,Ti.push("/website/settings")]):[3,5];case 2:return c.sent(),[3,4];case 3:b&&!b.generatedAt&&b.generate&&(console.log("Website not generated yet. Generating..."),Ln(!0)),c.label=4;case 4:return(0,h.Fs)("website",b),z((0,h.p$)(b)),Oo((function(e){return(0,s.Z)((0,l.Z)({},e),{website:b})})),[2,b];case 5:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),Gl=function(){var e=(0,i.Z)((function(e){var n,t,i,o,l;return(0,c.__generator)(this,(function(s){switch(s.label){case 0:return b(!0),[4,Ai("/website/get-pages").catch(console.log)];case 1:return(n=s.sent())&&!0===n.status&&n.content?(t=n.content.map((function(e){return{id:e._id,Parent:e.Parent,name:e.label,slug:e.slug,showOnFooter:e.showOnFooter,showOnHeader:e.showOnHeader,type:e.type,hasPosts:e.hasPosts,fromTemplate:(null===e||void 0===e?void 0:e.fromTemplate)||null}})),(0,h.Fs)("pages",t),M(t),i=n.content.map((function(e){return{id:e._id,slug:e.slug,blocks:D(e.blocks),type:null===e.slug&&e.default?"home-page":e.type}})),Se(i),(o=n.content.find((function(e){return"blog"===e.type})))&&(0,h.Fs)("website.blog",{id:o._id,hasPosts:o.hasPosts,block:o.blocks.find((function(e){return"blog"===e.WebsiteBlock.type}))}),e?(we(t.find((function(n){return n.id===e}))),Yl(i.find((function(n){return n.id===e})))):((l=n.content.find((function(e){return e.default&&null===e.slug})))||(l=n.content.find((function(e){return"parent"!==e.type}))),we(t.find((function(e){return e.id===l._id}))),Yl(i.find((function(e){return e.id===l._id})))),b(!1),[2,{pagesMapped:i,pages:t}]):[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Ll=function(){var e=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ai("/website/count-blog-posts-this-month").catch(console.log)];case 1:return(e=n.sent())&&!0===e.status&&e.content&&Wo(e.content),[2]}}))}));return function(){return e.apply(this,arguments)}}(),Ml=function(){var e=(0,i.Z)((function(e){var n,t,i,o,l,s;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,Oi("/website/add-external-block",{block:e,websiteId:O._id})];case 1:return(n=r.sent())&&!0===(null===n||void 0===n?void 0:n.status)&&(null===n||void 0===n?void 0:n.content)&&((null===(t=n.content)||void 0===t?void 0:t.externalId)?(e.editorUrl=null===(i=n.content)||void 0===i?void 0:i.editorUrl,e.embedCode=null===(o=n.content)||void 0===o?void 0:o.embedCode,e.externalId=null===(l=n.content)||void 0===l?void 0:l.externalId,"common-ninja"===(null===(s=n.content)||void 0===s?void 0:s.source)&&(ko(!0),Ee(e))):h.Z9.error("Error while adding your block! Try again later.")),[2,e]}}))}));return function(n){return e.apply(this,arguments)}}(),Vl=function(){var e=(0,i.Z)((function(e){var n;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return di("Publishing your website"),ai(!0),e?[4,Oi("/website/toggle-status",{status:"public"})]:[3,2];case 1:if(!(null===(n=t.sent())||void 0===n?void 0:n.status))return h.Z9.error("Error while publishing your website! Try again later."),ai(!1),[2];t.label=2;case 2:return[4,zl()];case 3:return t.sent(),setTimeout((function(){ai(!1),dn(!0)}),2e3),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),$l=function(){var e,n,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&y?to("Save changes?","Save your changes to ".concat(o?"preview":"publish"," your website"),(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){switch(e.label){case 0:return[4,Hl()];case 1:return e.sent(),[4,(0,h._v)(1500)];case 2:return e.sent(),$l(!1,o),[2]}}))})),(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){return[2]}))}))):"free"===(null===Si||void 0===Si||null===(e=Si.user)||void 0===e||null===(n=e.plan)||void 0===n?void 0:n.priceId)?o?(Dl("website:previewed",{}),Go(o),Ge(!0)):(""===(null===O||void 0===O?void 0:O.customDomain)&&(null===O||void 0===O||O.externalDomain),Dl("account:paywall-click",{context:"publish_flow_top_nav"}),Pn("publish")):o?(Kl(),Dl("website:previewed",{})):""===(null===O||void 0===O?void 0:O.customDomain)&&""===(null===O||void 0===O?void 0:O.externalDomain)?El(!0):Vl(!0)},Kl=function(){if(O){var e,n,t,i="active"!==(null===Si||void 0===Si||null===(e=Si.user)||void 0===e?void 0:e.subscriptionStatus)||"private"===(null===O||void 0===O?void 0:O.status)?"?pt=".concat(as()):"",o=(0,h.lz)(O),l=o.includes(":7000")?"http://":"https://",s="".concat(l).concat("active"===(null===O||void 0===O||null===(n=O.cloudflare)||void 0===n||null===(t=n.ssl)||void 0===t?void 0:t.status)&&(null===O||void 0===O?void 0:O.domain)?O.domain:o),r=null===Ce||void 0===Ce?void 0:Ce.find((function(e){return e.id===xe.id})),a=(null===r||void 0===r?void 0:r.slug)?"/".concat(r.slug):"",c=(null===Jn||void 0===Jn?void 0:Jn.published)&&(null===Jn||void 0===Jn?void 0:Jn.slug)?"/".concat(Jn.slug):"";window.open("".concat(s).concat(a).concat(c).concat(i),"_blank")}},ql=(function(){var e=(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){switch(e.label){case 0:return[4,zl().then((function(e){"public"===(null===e||void 0===e?void 0:e.status)&&((null===e||void 0===e?void 0:e.externalDomain)||(null===e||void 0===e?void 0:e.customDomain))&&Wi("Website published!",(0,u.jsxs)(u.Fragment,{children:[(null===e||void 0===e?void 0:e.externalDomain)&&(0,u.jsxs)("div",{children:["Your custom domain name ",(0,u.jsx)("span",{className:"font-bold",children:null===e||void 0===e?void 0:e.externalDomain})," will be ready soon. This process usually takes around 15 minutes but can take up to a few hours."]}),(null===e||void 0===e?void 0:e.customDomain)&&(0,u.jsxs)("div",{children:["Your linked domain ",(0,u.jsx)("span",{className:"font-bold",children:null===e||void 0===e?void 0:e.customDomain})," will be ready soon. You'll need to change your DNS records with your registrar to complete this process. ",(0,u.jsx)(ye(),{href:"https://help.durable.co/en/articles/8482657-connect-an-existing-domain-with-entri",children:(0,u.jsx)("a",{className:"link",target:"_blank",children:"Learn more"})})]})]}))}))];case 1:return e.sent(),[2]}}))}))}(),function(){var e=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return f(e=[]),b(!0),[4,ql(e)];case 1:return n.sent()&&(h.Z9.success("Website is live!"),b(!1),j(!1),We(!1)),[2]}}))}))}(),function(){var e=(0,i.Z)((function(e){var n,t,i,o,l,s,r,a;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:n=!0,t=!1,i=void 0,c.label=1;case 1:c.trys.push([1,9,10,11]),o=e[Symbol.iterator](),c.label=2;case 2:if(n=(l=o.next()).done)return[3,8];s=l.value,c.label=3;case 3:return c.trys.push([3,6,,7]),[4,s()];case 4:return c.sent(),[4,(0,h._v)(250)];case 5:return c.sent(),[3,7];case 6:return r=c.sent(),h.Z9.error("Error while saving your website! Try again later.".concat(r)),b(!1),[2,!1];case 7:return n=!0,[3,2];case 8:return[3,11];case 9:return a=c.sent(),t=!0,i=a,[3,11];case 10:try{n||null==o.return||o.return()}finally{if(t)throw i}return[7];case 11:return[2,!0]}}))}));return function(n){return e.apply(this,arguments)}}()),Hl=function(){var e=(0,i.Z)((function(e){var n,t,o,l;return(0,c.__generator)(this,(function(s){switch(s.label){case 0:return e=f(o=[],e),l={favicon:O.favicon,fonts:O.fonts,button:O.button,idTemplate:null===e||void 0===e||null===(n=e.template)||void 0===n?void 0:n.id,idWebsite:null===e||void 0===e||null===(t=e.template)||void 0===t?void 0:t.idWebsite,widgets:O.widgets,animation:O.animation,cornerRadius:O.cornerRadius},O.noPaletteSupport||(l.buttons=O.buttons,l.palette=O.colorPalette),o.push((0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return[4,Oi("/website/save",l)];case 1:if(null===(e=n.sent())||void 0===e?void 0:e.status)return[2,!0];throw e.message}}))}))),b(!0),[4,ql(o)];case 1:return s.sent()&&("public"===O.status?h.Z9.success("Website is live!"):h.Z9.success("Website saved!"),delete e.addBlockPosition,delete e.clearGenerating,Ge(!1),b(!1),Ve(!1),wo(!1),We(!1),Oo({website:(0,h.p$)(O),page:(0,h.p$)(e),selectedPageId:null===e||void 0===e?void 0:e.id})),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),Ul=function(e){Ol?xs(Qo):y?qi("Discard changes and exit?","Are you sure you want to exit the editor without saving? Any unsaved changes will be discarded.",(0,i.Z)((function(){return(0,c.__generator)(this,(function(n){return Ti.push(e||"/website/dashboard"),[2]}))}))):Ti.push(e||"/website/dashboard")},Jl=function(e){P(!e)},Yl=function(){var e=(0,i.Z)((function(e){return(0,c.__generator)(this,(function(n){return window.websitePage=(0,h.p$)(e),window.dispatchEvent(new CustomEvent("website-builder-page-changed")),[2]}))}));return function(n){return e.apply(this,arguments)}}(),Xl=function(e){for(var n,t=new Date,i=0;i<(null===e||void 0===e||null===(n=e.blocks)||void 0===n?void 0:n.length);i++)e.blocks[i].idx=i;console.log("Change page 1",new Date-t,"ms");var o=(0,h.p$)(Ce),l=o.findIndex((function(n){return n.id===e.id}));console.log("Change page 2",new Date-t,"ms");var s=!0,r=!1,a=void 0;try{for(var c,u=o[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=c.value;d.blocks[0]=e.blocks[0],d.blocks[d.blocks.length-1]=e.blocks[e.blocks.length-1]}}catch(v){r=!0,a=v}finally{try{s||null==u.return||u.return()}finally{if(r)throw a}}console.log("Change page 3",new Date-t,"ms"),-1!==l&&(o[l]=(0,h.p$)(e),Se(o)),console.log("Change page 4",new Date-t,"ms"),Yl(e).catch(console.log),console.log("Change page took",new Date-t,"ms")},Ql=function(){var e=(0,i.Z)((function(e){return(0,c.__generator)(this,(function(n){return window.social=e.items,window.socialSettings=e.settings,z((function(n){return(0,s.Z)((0,l.Z)({},n),{social:e.items,socialSettings:e.settings})})),window.dispatchEvent(new CustomEvent("website-builder-social-changed")),[2]}))}));return function(n){return e.apply(this,arguments)}}(),es=function(){var e=(0,i.Z)((function(e){var n;return(0,c.__generator)(this,(function(t){return n={favicon:e.favicon,fonts:e.fonts,button:e.button,buttons:e.buttons,colorPalette:e.colorPalette,animation:e.animation,cornerRadius:e.cornerRadius},window.styles=n,e.migratePalette&&(n.noPaletteSupport=!1,n.migratePalette=!0),z((function(e){return(0,l.Z)({},e,n)})),window.dispatchEvent(new CustomEvent("website-builder-styles-changed")),[2]}))}));return function(n){return e.apply(this,arguments)}}(),ns=function(){var e=(0,i.Z)((function(e){return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return[4,Gl(e)];case 1:return n.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),ts=function(){var e=(0,i.Z)((function(e){var n;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return n=e.page,e.pageTemplate,[4,Gl(null===n||void 0===n?void 0:n._id)];case 1:return t.sent(),window.dispatchEvent(new CustomEvent("website-builder-changed")),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),is=function(){var e=(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return[4,Ai("/website/get-blocks").catch(console.log)];case 1:return(e=n.sent())&&!0===e.status&&e.content&&fi(e.content),[2]}}))}));return function(){return e.apply(this,arguments)}}(),os=function(){var e=(0,i.Z)((function(e,n){var t,i,o;return(0,c.__generator)(this,(function(l){switch(l.label){case 0:return Rn(!0),i=null!==n&&void 0!==n?n:co,fo(!1),void 0===(o=(0,h.p$)(window.websitePage)).blocks&&(o.blocks=[]),e={type:e.type,idx:i,WebsiteBlock:e,generating:"block"},o.blocks.splice(i,0,e),o.addBlockPosition=i,window.scrollToBlock=e.idx,window.dispatchEvent(new CustomEvent("website-builder-scroll-to-block")),"durable"!==(null===e||void 0===e||null===(t=e.WebsiteBlock)||void 0===t?void 0:t.source)?[3,2]:(Xl(o),[4,Pi(e,void 0,void 0,gl)]);case 1:return e=l.sent(),[3,4];case 2:return[4,Ml(e)];case 3:l.sent(),l.label=4;case 4:return delete e.generating,o.blocks[e.idx]=e,o.clearGenerating=!0,Xl(o),window.dispatchEvent(new CustomEvent("website-builder-scroll-to-block")),Rn(!1),(0,d.n2)(e)&&(Ee(e),We(!0)),[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),ls=function(){var e=(0,i.Z)((function(e){return(0,c.__generator)(this,(function(n){return window.updatedWidgets=e,window.dispatchEvent(new CustomEvent("handle-widgets-change")),[2]}))}));return function(n){return e.apply(this,arguments)}}(),ss=function(){var e=(0,i.Z)((function(e){var n;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return b(!0),go(!1),"durable"!==(null===(e={type:e.type,idx:co,WebsiteBlock:e,generating:"block"})||void 0===e||null===(n=e.WebsiteBlock)||void 0===n?void 0:n.source)?[3,2]:[4,Pi(e,void 0,void 0,gl)];case 1:return t.sent(),Vo(!0),Ee(e),Co(!0),[3,4];case 2:return[4,Ml(e)];case 3:t.sent(),z((function(n){var t=(null===n||void 0===n?void 0:n.widgets)?(0,a.Z)(n.widgets).concat([e]):[e];return ls(t),(0,s.Z)((0,l.Z)({},n),{widgets:t})})),t.label=4;case 4:return b(!1),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),rs=function(){var e=(0,i.Z)((function(e,n,t){var i,o,l;return(0,c.__generator)(this,(function(s){switch(s.label){case 0:return o=(0,h.p$)(window.websitePage),"durable"!==(null===e||void 0===e||null===(i=e.WebsiteBlock)||void 0===i?void 0:i.source)?[3,2]:[4,Pi(e,n,void 0,gl,t)];case 1:return e=s.sent(),[3,3];case 2:e=n,s.label=3;case 3:return l=o.blocks[e.idx],o.blocks[e.idx]=e,o.blocks[e.idx+1]=l,o.clearGenerating=!0,Xl(o),window.scrollToBlock=e.idx,window.dispatchEvent(new CustomEvent("website-builder-scroll-to-block")),[2,o]}}))}));return function(n,t,i){return e.apply(this,arguments)}}(),as=function(){var e=Y.ou.now().toSeconds(),n="".concat(null===O||void 0===O?void 0:O._id,":").concat(e,":preview");return(0,U.btoa)(n)},cs=function(){var e=(0,i.Z)((function(e){var n,t,i,o,r,a,u,v,m,f,p;return(0,c.__generator)(this,(function(g){switch(g.label){case 0:console.log("Generating page..."),window.marsUsedPictures=[],n=Ce.find((function(e){return null===e.slug&&"home-page"===e.type})),t=(0,h.p$)(window.websitePage),Xl(t),i=1,Qt(e.blocks.length),o=!0,r=!1,a=void 0,g.label=1;case 1:g.trys.push([1,6,7,8]),u=function(){var o,r,a,u;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return o=m.value,Jt(i),r={type:o.type,WebsiteBlock:mi.find((function(e){var n;return e.type===(null===(n=o.WebsiteBlock)||void 0===n?void 0:n.type)})),idx:i},a=(0,d.cq)(n,o,e.type),[4,Ii(r)];case 1:return di.apply(void 0,[c.sent()]),u=null,"service"===e.type&&(u=e.label),[4,rs(r,(0,s.Z)((0,l.Z)({},o),{pageType:e.type,serviceName:u}),a)];case 2:return t=c.sent(),i++,[2]}}))},v=e.blocks[Symbol.iterator](),g.label=2;case 2:return(o=(m=v.next()).done)?[3,5]:[5,(0,c.__values)(u())];case 3:g.sent(),g.label=4;case 4:return o=!0,[3,2];case 5:return[3,8];case 6:return f=g.sent(),r=!0,a=f,[3,8];case 7:try{o||null==v.return||v.return()}finally{if(r)throw a}return[7];case 8:return ti(!0),Qt(0),Jt(0),[4,Hl(t)];case 9:return g.sent(),[4,Gl(t.id)];case 10:return p=g.sent().pagesMapped,Ss(t.id,p),[4,Ti.replace("/website/builder",null,{shallow:!1})];case 11:return g.sent(),di(null),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),us=function(){var e=(0,i.Z)((function(){var e,n,t,i,o,l,s,r,a,u,d,v,m,f,p,g,x;return(0,c.__generator)(this,(function(b){switch(b.label){case 0:return console.log("Regenerating page..."),li(!0),ai(!0),window.marsUsedPictures=[],e=(0,h.p$)(window.websitePage),n=null,e.slug?((n={}).blocks=e.blocks.filter((function(e){return null===e||void 0===e?void 0:e.type})),[3,3]):[3,1];case 1:return l=!(null===O||void 0===O||null===(t=O.template)||void 0===t?void 0:t.WebsiteTemplate)&&(null===O||void 0===O||null===(i=O.template)||void 0===i?void 0:i.Website)?null===O||void 0===O||null===(o=O.template)||void 0===o?void 0:o.Website:null,[4,Ei(l)];case 2:n=b.sent(),b.label=3;case 3:return s=e.blocks[0],r=e.blocks[e.blocks.length-1],e.slug?[3,6]:[4,Pi(s,n.header,void 0,gl)];case 4:return s=b.sent(),[4,Pi(r,n.footer,void 0,gl)];case 5:r=b.sent(),(s.socialSettings||r.socialSettings)&&Ql({items:null===O||void 0===O?void 0:O.social,settings:s.socialSettings||r.socialSettings}),b.label=6;case 6:e.blocks=[s,r],Xl(e),a=1,Qt(n.blocks.length),u=!0,d=!1,v=void 0,b.label=7;case 7:b.trys.push([7,12,13,14]),m=function(){var n,t,i;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:return n=p.value,Jt(a-1),i={type:n.type,WebsiteBlock:null!==(t=mi.find((function(e){return e.type===n.WebsiteBlock.type})))&&void 0!==t?t:n.WebsiteBlock,idx:a},di(Ii(i)),[4,rs(i,n)];case 1:return e=o.sent(),a++,[2]}}))},f=n.blocks[Symbol.iterator](),b.label=8;case 8:return(u=(p=f.next()).done)?[3,11]:[5,(0,c.__values)(m())];case 9:b.sent(),b.label=10;case 10:return u=!0,[3,8];case 11:return[3,14];case 12:return g=b.sent(),d=!0,v=g,[3,14];case 13:try{u||null==f.return||f.return()}finally{if(d)throw v}return[7];case 14:return ti(!0),Qt(0),Jt(0),Kt&&!Kt.generatedAt&&Kt.generate?[4,Hl(e)]:[3,17];case 15:return b.sent(),[4,Gl(e.id)];case 16:x=b.sent().pagesMapped,Ss(e.id,x),yl(!0),b.label=17;case 17:return li(!1),setTimeout((function(){window.dispatchEvent(new CustomEvent("website-builder-scroll-to-block"))}),500),Dl("website:page-regenerated",{slug:e.slug,id:e._id}),[2]}}))}));return function(){return e.apply(this,arguments)}}(),ds=function(){go(!1),Co(!1),Ge(!1),Ve(!1),wo(!1),We(!1),Ye(!1),on(!1),fo(!1),en(!1),Vo(!1),Nl(!1),window.closeAllPanels=void 0},vs=function(e){},ms=function(e){var n,t,i,o,l,s,r=(null===Si||void 0===Si||null===(n=Si.user)||void 0===n||null===(t=n.plan)||void 0===t||null===(i=t.limits)||void 0===i?void 0:i.blogPosts)>=0?null===Si||void 0===Si||null===(o=Si.user)||void 0===o||null===(l=o.plan)||void 0===l||null===(s=l.limits)||void 0===s?void 0:s.blogPosts:-1;-1!==r&&Do>=r?Pn("manage_posts"):bs(e)},fs=function(e,n){ds(),Ye(e),n&&(!function(){var e,n,t,i,o,l,s,r=(null===Si||void 0===Si||null===(e=Si.user)||void 0===e||null===(n=e.plan)||void 0===n||null===(t=n.limits)||void 0===t?void 0:t.pages)>=0?null===Si||void 0===Si||null===(i=Si.user)||void 0===i||null===(o=i.plan)||void 0===o||null===(l=o.limits)||void 0===l?void 0:l.pages:-1,a=(null===(s=null===L||void 0===L?void 0:L.filter((function(e){return"blog"!==e.type&&"parent"!==e.type})))||void 0===s?void 0:s.length)||0;return-1===r||a<r}()?Pn("manage_pages"):on(n))},ps=function(){var e=(0,i.Z)((function(){var e,n;return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return Ci((0,a.Z)(Zi).concat([ji])),bi.length>0?(n=(e=bi).pop(),wi(e),setTimeout((0,i.Z)((function(){return(0,c.__generator)(this,(function(e){return ki(n),[2]}))})),1e3),[3,3]):[3,1];case 1:return[4,Oi("/ai-workflows/mark-pages-as-created",{createdPages:(0,a.Z)(Zi).concat([ji])})];case 2:t.sent(),ki(null),t.label=3;case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),hs=function(){var e=(0,i.Z)((function(){var e,n,t,i,o,l,s;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return i=null===I||void 0===I?void 0:I.business,[4,Ri("/ai/generate",{body:{prompt:"website-post-subjects",data:{vertical:(0,He.x)(i),quantity:5},output_language:null!==(o=null===I||void 0===I||null===(e=I.business)||void 0===e||null===(n=e.settings)||void 0===n||null===(t=n.ai)||void 0===t?void 0:t.language)&&void 0!==o?o:"en",stream:!1}})];case 1:return(l=r.sent())&&!0===(null===l||void 0===l?void 0:l.status)&&(null===l||void 0===l?void 0:l.content)&&(s=l.content[Math.floor(Math.random()*l.content.length)],setTimeout((function(){window.dispatchEvent(new CustomEvent("website-builder-post-create",{detail:{subject:s}}))}),500)),[2]}}))}));return function(){return e.apply(this,arguments)}}(),gs=function(){var e=(0,i.Z)((function(e){var n,t,i;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:return n=e.page,t=e.websitePage,"open-only"!==(i=e.pageTemplate)?[3,4]:(Xl(t),we(n),"blog"!==ji?[3,2]:[4,hs()]);case 1:o.sent(),o.label=2;case 2:return[4,ps()];case 3:return o.sent(),[2];case 4:return n&&i?(on(!1),[4,ns(null===n||void 0===n?void 0:n._id)]):[3,10];case 5:return o.sent(),[4,cs(i)];case 6:return o.sent(),we(n),"blog"!==ji?[3,8]:[4,hs()];case 7:o.sent(),o.label=8;case 8:return[4,ps()];case 9:o.sent(),o.label=10;case 10:return[2]}}))}));return function(n){return e.apply(this,arguments)}}(),xs=function(){var e=(0,i.Z)((function(e,n){var t,i;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:return"blog"!==(null===xe||void 0===xe?void 0:xe.type)&&el(null===xe||void 0===xe?void 0:xe.id),e?[3,3]:(t=null===Ce||void 0===Ce?void 0:Ce.find((function(e){return null===e.slug})),we(t),Xl(t),(null===t||void 0===t?void 0:t.id)?[4,Gl(null===t||void 0===t?void 0:t.id)]:[3,2]);case 1:o.sent(),o.label=2;case 2:return[3,4];case 3:i=null===L||void 0===L?void 0:L.find((function(n){return n.id===e})),we(i),Xl(null===Ce||void 0===Ce?void 0:Ce.find((function(n){return n.id===e}))),n||Ye(!1),"blog"!==(null===i||void 0===i?void 0:i.type)&&(Yn(null),Wt(!1)),o.label=4;case 4:return[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),bs=function(){var e=(0,i.Z)((function(e){var n,t,i,o,l=arguments;return(0,c.__generator)(this,(function(s){switch(s.label){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:null,Ol?[3,6]:(t=null===(n=n||Ce)||void 0===n?void 0:n.find((function(e){return"blog"===e.type})))?(we(t),Xl(null===n||void 0===n?void 0:n.find((function(e){return e.id===(null===t||void 0===t?void 0:t.id)}))),[3,6]):[3,1];case 1:return b(!0),[4,Oi("/website/create-page",{slug:"blog",label:"Blog",showOnHeader:!0,type:"blog",seo:{title:"Blog"}}).catch(console.log)];case 2:return(i=s.sent())&&!0===i.status&&i.content?(o=i.content._id,[4,Gl(o)]):[3,4];case 3:return s.sent(),window.dispatchEvent(new CustomEvent("website-builder-page-created")),[3,5];case 4:h.Z9.error("Error creating the blog page, please try again. ".concat(i.message)),s.label=5;case 5:b(!1),s.label=6;case 6:return setTimeout((function(){window.dispatchEvent(new CustomEvent("website-builder-post-create",{detail:{subject:e}}))}),500),Dl("website:blog-started"),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),ws=function(){var e=(0,i.Z)((function(e){var n;return(0,c.__generator)(this,(function(t){if("common-ninja"===(null===e||void 0===e||null===(n=e.WebsiteBlock)||void 0===n?void 0:n.source))Ee(e),ko(!0);return[2]}))}));return function(n){return e.apply(this,arguments)}}(),ys=function(){Gt(!0)},js=function(){Vt(!0)},ks=function(){To(!0),Ve(!0)},Ns=function(){var e=setInterval((function(){(null===window||void 0===window?void 0:window.websitePage)&&(clearInterval(e),ro("social"),window.editBlock("header"))}),300)},Zs=function(){_||(De&&We(!1),Me&&Ve(!1),bo&&wo(!1),At&&Ot(!1),kl&&Nl(!1),ho&&go(!1),mo&&fo(!1),tn&&on(!1))},Cs=function(e,n,t){switch(ds(),n){case"style":Ve(!0),wo(!1),pl(t);break;case"widget":var i;Ve(!1),(null===O||void 0===O?void 0:O.widgets)&&0!==(null===O||void 0===O||null===(i=O.widgets)||void 0===i?void 0:i.length)?(wo(!0),Co(!1)):go(!0);break;case"blocks":Nl(!0),Ve(!1)}},Ss=function(e,n){var t=n.find((function(n){return n.id===e}));if(t){(0,h.$K)(t.type)||delete t.type;for(var i=0;i<t.blocks.length;i++)t.blocks[i].idx=i;Oo((function(n){return(0,s.Z)((0,l.Z)({},n),{page:(0,h.p$)(t),selectedPageId:e})}))}},_s=function(){Vl(!0).catch((function(){}))};(0,v.useEffect)((function(){"openPublishFlow"===dl&&(El(!0),vl(null))}),[dl]),(0,v.useEffect)((function(){var e,n,t,i;!0===(null===Si||void 0===Si||null===(e=Si.user)||void 0===e||null===(n=e.onboarding)||void 0===n||null===(t=n.tourGuide)||void 0===t?void 0:t.displayTour)&&!x&&wl&&(il(!0),sl(!0)),!O||x||wl||(0,He.x)(null===O||void 0===O?void 0:O.Business)||!(0,rn.np)(null===Si||void 0===Si||null===(i=Si.user)||void 0===i?void 0:i.experiments,"signup-first","variant")||Ti.push("/website/onboarding")}),[Si,x,wl]),(0,v.useEffect)((function(){var e;Yo((e={},(0,o.Z)(e,F.In.IN_EDITOR_WEBSITE_PAGE_REGENERATE,[function(){Qi("Regenerate page?","Are you sure you want to regenerate this page?","All content, styles, and details for this page will be lost.","to regenerate",(function(){return us(),!0}))}]),(0,o.Z)(e,F.In.IN_EDITOR_BLOG_POST_CREATE,[function(){var e=(0,i.Z)((function(e,n){return(0,c.__generator)(this,(function(e){return ms(null===n||void 0===n?void 0:n.blogPostTitle),[2]}))}));return function(n,t){return e.apply(this,arguments)}}(),{dirty:y,save:Hl}]),(0,o.Z)(e,F.In.IN_EDITOR_CREATE_NEW_PAGE,[function(e,n){var t=n.createPageInformation,i=n.createPageType;i&&["about","contact","services"].includes(i)?(t&&xl(t),ki(i)):fs(!0,!0)},{dirty:y,save:Hl}]),(0,o.Z)(e,F.In.IN_EDITOR_PUBLISH_WEBSITE,[function(){!function(){var e;"active"!==(null===Si||void 0===Si||null===(e=Si.user)||void 0===e?void 0:e.subscriptionStatus)&&Pn("publish")}()}]),(0,o.Z)(e,F.In.IN_EDITOR_EDIT_SOCIAL_LINKS,[Ns]),(0,o.Z)(e,F.In.IN_EDITOR_EDIT_FONT_PAIRINGS,[function(e){ro(e),Ve(!0)},"fonts"]),(0,o.Z)(e,F.In.IN_EDITOR_EDIT_BUTTON_STYLE,[function(e){ro(e),Ve(!0)},"button_style"]),(0,o.Z)(e,F.In.IN_EDITOR_EDIT_FAVICON,[function(e){ro(e),Ve(!0)},"favicon"]),(0,o.Z)(e,F.In.IN_EDITOR_EDIT_THEME,[function(e){ro(e),Ve(!0)},null]),(0,o.Z)(e,F.In.IN_EDITOR_EDIT_COLOR_PALETTE,[function(e){ro(e),Ve(!0)},null]),(0,o.Z)(e,F.In.IN_EDITOR_EDIT_ANIMATION,[function(e){ro(e),Ve(!0)},null]),(0,o.Z)(e,F.In.IN_EDITOR_EDIT_ROUNDED_CORNERS,[function(e){ro(e),Ve(!0)},null]),(0,o.Z)(e,F.In.IN_EDITOR_ADD_GLOBAL_WIDGET,[function(){Cs(0,"widget")}]),(0,o.Z)(e,F.In.IN_EDITOR_EDIT_HEADER_LOGO,[function(){ro("logo"),window.editBlock("header")}]),(0,o.Z)(e,F.In.IN_EDITOR_VIEW_WEBSITE_MOBILE,[function(){Ne("mobile")}]),(0,o.Z)(e,F.In.IN_EDITOR_VIEW_WEBSITE_TABLET,[function(){Ne("tablet")}]),e))}),[Kt,Ce]),(0,v.useEffect)((function(){Ho?(Ko(),$n&&Kn(!1)):qo()}),[Ho]),(0,v.useEffect)((function(){$n&&Ho&&qo()}),[$n]),(0,v.useEffect)((function(){0!==Xt&&Ut<Xt?ai(!0):0===Xt&&ai(!1)}),[Ut,Xt]),(0,v.useEffect)((function(){if(clearTimeout(Hn),Pe)return Hn=setTimeout((function(){var e;if("section"===(null===Pe||void 0===Pe||null===(e=Pe.WebsiteBlock)||void 0===e?void 0:e.category)){var n,t=window.websitePage;"header"===Pe.WebsiteBlock.type?t.blocks[0]=Pe:"footer"===Pe.WebsiteBlock.type?t.blocks[t.blocks.length-1]=Pe:t.blocks[Pe.idx]=Pe,Xl(t);["blog","scheduler"].includes(null===Pe||void 0===Pe||null===(n=Pe.WebsiteBlock)||void 0===n?void 0:n.type)||(window.scrollToBlock=Pe.idx,window.dispatchEvent(new CustomEvent("website-builder-scroll-to-block")))}else if("widget"===Pe.WebsiteBlock.category&&"durable"===Pe.WebsiteBlock.source){var i,o=!1,r=null===(i=O.widgets)||void 0===i?void 0:i.map((function(e){return e.type===Pe.type?(o=!0,Pe):e}));o||(r=r?(0,a.Z)(r).concat([Pe]):[Pe]),z((function(e){return(0,s.Z)((0,l.Z)({},e),{widgets:r})})),ls(r)}}),200),function(){clearTimeout(Hn)}}),[Pe]),(0,v.useEffect)((function(){if(clearTimeout(Hn),Jn)return Hn=setTimeout((function(){window.dispatchEvent(new CustomEvent("website-builder-post-changed",{detail:{post:Jn}}))}),200),function(){clearTimeout(undefined)}}),[Jn]),(0,v.useEffect)((function(){return window.click=function(){Zs()},window.scrolled=function(e){kn(e)},window.scrolledDistance=function(e){Cn(e)},window.changePage=function(e){Xl(e)},window.reloadPages=function(){Gl(null===xe||void 0===xe?void 0:xe.id)},window.activeBlock=function(e){window.dispatchEvent(new CustomEvent("website-builder-active-block-changed",{detail:{active:e}}))},window.addBlock=function(e){uo(e),fo(!0)},window.editBlock=function(e,n,t){if(window.websitePage){if("header"===e){var i=window.websitePage.blocks.find((function(e){return"header"===e.WebsiteBlock.type}));Ee(i)}else if("footer"===e){var o=window.websitePage.blocks.find((function(e){return"footer"===e.WebsiteBlock.type}));Ee(o)}else if("blog"===e){var l=window.websitePage.blocks.find((function(e){return"blog"===e.WebsiteBlock.type}));Ee(l)}else{var s=window.websitePage.blocks[e];s.idx=e,Ee(s)}We(!n||{item:n,itemIdx:t}),Ve(!1),Co(!1),wo(!1),fo(!1)}},window.closeBlock=function(){We(!1)},window.deleteBlock=function(e){Vi("Delete section?","Are you sure you want to delete this section?",(0,i.Z)((function(){var n;return(0,c.__generator)(this,(function(t){return(n=window.websitePage).blocks.splice(e,1),Xl(n),[2]}))})))},window.duplicateBlock=function(e){var n=window.websitePage,t=(0,h.p$)(n.blocks[e]);t._id=R()().toString(),n.blocks.splice(e,0,t),Xl(n)},window.moveBlock=function(){var e=(0,i.Z)((function(e,n){var t,i;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:return t=window.websitePage,i=(0,h.p$)(t.blocks[e]),t.blocks.splice(e,1),t.blocks.splice(e+n,0,i),[4,Xl(t)];case 1:return o.sent(),window.scrollToBlock=e+n,window.dispatchEvent(new CustomEvent("website-builder-scroll-to-block")),[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),window.regenerateBlock=function(){var e=(0,i.Z)((function(e,n){var t,i,o,l;return(0,c.__generator)(this,(function(s){switch(s.label){case 0:return o=(0,h.p$)(e),l=(0,h.p$)(window.websitePage),[4,Pi(e,null,n,gl)];case 1:return e=s.sent(),l.blocks[e.idx]=e,l.clearGenerating=!0,Xl(l),"header"!==e.WebsiteBlock.type&&"footer"!==e.WebsiteBlock.type||!e.socialSettings||Ql({items:null===O||void 0===O?void 0:O.social,settings:e.socialSettings}),(null===e||void 0===e||null===(t=e.spacing)||void 0===t?void 0:t.minHeight)!==(null===o||void 0===o||null===(i=o.spacing)||void 0===i?void 0:i.minHeight)&&(window.scrollToBlock=e.idx,window.dispatchEvent(new CustomEvent("website-builder-scroll-to-block"))),Dl("website:block-regenerated",{type:e.WebsiteBlock.type}),[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),window.createPost=function(){ms()},window.changePost=function(e){Yn(e)},window.editPost=function(e){Yn(e),Wt(!!e)},window.settingsPost=function(){Ot(!0)},window.deletePost=function(e){Vi("Delete blog post?",(0,u.jsxs)(u.Fragment,{children:["Are you sure you want to delete the blog post ",(0,u.jsxs)("span",{className:"font-medium",children:['"',e.title,'"']}),"?"]}),(function(){window.dispatchEvent(new CustomEvent("website-builder-post-delete",{detail:{idPost:e._id}}))}))},window.dirtyPost=function(e){Z(e)},window.loadingPost=function(e){b(e)},window.generatingPost=function(e){zn(e)},window.regeneratePost=function(e){Gi("Regenerate blog post?",(0,u.jsxs)(u.Fragment,{children:["Are you sure you want to regenerate the blog post ",(0,u.jsxs)("span",{className:"font-medium",children:['"',e.title,'"']}),"? The current blog post will be deleted and all content and media will be lost."]}),(function(){window.dispatchEvent(new CustomEvent("website-builder-post-regenerate"))}))},window.openPaywall=function(e){Pn(e)},function(){window.click=void 0,window.scrolled=void 0,window.changePage=void 0,window.reloadPages=void 0,window.activeBlock=void 0,window.addBlock=void 0,window.editBlock=void 0,window.deleteBlock=void 0,window.duplicateBlock=void 0,window.moveBlock=void 0,window.regenerateBlock=void 0,window.createPost=void 0,window.changePost=void 0,window.editPost=void 0,window.settingsPost=void 0,window.deletePost=void 0,window.dirtyPost=void 0,window.loadingPost=void 0,window.generatingPost=void 0,window.regeneratePost=void 0,window.openPaywall=void 0,window.closeBlock=void 0,window.scrolledDistance=void 0}}),[Xl]),(0,v.useEffect)((function(){var e,n;O&&(oe({settings:null===O||void 0===O?void 0:O.socialSettings,items:Array.isArray(O.social)?O.social:[]}),"public"===(null===O||void 0===O?void 0:O.status)||(null===O||void 0===O?void 0:O.customDomain)&&(null===O||void 0===O?void 0:O.externalDomain)||fn(!0),"public"!==(null===O||void 0===O?void 0:O.status)||(null===O||void 0===O?void 0:O.customDomain)&&(null===O||void 0===O?void 0:O.externalDomain)||xn(!0),!1===(null===O||void 0===O?void 0:O.onboardingSurveyCompleted)&&(null===O||void 0===O||null===(e=O.Business)||void 0===e?void 0:e._id)&&(n=O.Business._id,"object"===typeof localStorage&&localStorage.setItem("".concat(n,"-").concat(W),"yes")));yl(!(!O||O&&!O.generatedAt&&O.generate))}),[O]),(0,v.useEffect)((function(){window.dispatchEvent(new CustomEvent("website-builder-page-changed"))}),[L]),(0,v.useEffect)((function(){var e,n,t,i,o,l,s,r,a,c,u,d,v=!1;if("publish"===(null===Ti||void 0===Ti||null===(e=Ti.query)||void 0===e?void 0:e.open)&&O)v=!0;else if("view"===(null===Ti||void 0===Ti||null===(n=Ti.query)||void 0===n?void 0:n.open))$l(),v=!0;else if("settings"===(null===Ti||void 0===Ti||null===(t=Ti.query)||void 0===t?void 0:t.open)&&O)Ve(!0),v=!0;else if("page"===(null===Ti||void 0===Ti||null===(i=Ti.query)||void 0===i?void 0:i.open)&&(null===Ti||void 0===Ti||null===(o=Ti.query)||void 0===o?void 0:o.id)&&L&&(null===Ce||void 0===Ce?void 0:Ce.length)>0){var m;xs(null===Ti||void 0===Ti||null===(m=Ti.query)||void 0===m?void 0:m.id),v=!0}else if("page"===(null===Ti||void 0===Ti||null===(l=Ti.query)||void 0===l?void 0:l.create))fs(!0,!0),v=!0;else if("folder"===(null===Ti||void 0===Ti||null===(s=Ti.query)||void 0===s?void 0:s.create))fs(!0,"folder"),v=!0;else if("page"===(null===Ti||void 0===Ti||null===(r=Ti.query)||void 0===r?void 0:r.edit)&&(null===Ti||void 0===Ti||null===(a=Ti.query)||void 0===a?void 0:a.id)&&L&&(null===Ce||void 0===Ce?void 0:Ce.length)>0&&!Je)Ye(!0);else if(null===Ti||void 0===Ti||null===(c=Ti.query)||void 0===c?void 0:c.blog){var f;gi(null===Ti||void 0===Ti||null===(f=Ti.query)||void 0===f?void 0:f.blog),v=!0}else(null===Ti||void 0===Ti||null===(u=Ti.query)||void 0===u?void 0:u.createPages)?(setTimeout((function(){var e,n=null===Ti||void 0===Ti||null===(e=Ti.query)||void 0===e?void 0:e.createPages.split(","),t=n.pop();wi(n),ki(t)}),2e3),v=!0):(null===Ti||void 0===Ti||null===(d=Ti.query)||void 0===d?void 0:d.editHeaderLogo)&&(v=!0);v&&Ti.replace("/website/builder",null,{shallow:!1})}),[Ti,Si,O,L,Ce]),(0,v.useEffect)((function(){fn(!An&&!y&&!ze&&"public"!==(null===O||void 0===O?void 0:O.status)&&(!(null===O||void 0===O?void 0:O.customDomain)||!(null===O||void 0===O?void 0:O.externalDomain))),xn(!An&&!y&&"public"===(null===O||void 0===O?void 0:O.status)&&(!(null===O||void 0===O?void 0:O.customDomain)||!(null===O||void 0===O?void 0:O.externalDomain))),ze||setTimeout((function(){Go(!1)}),300)}),[An,y,ze,O]),(0,v.useEffect)((function(){y?(fn(!1),xn(!1)):("public"===(null===O||void 0===O?void 0:O.status)||(null===O||void 0===O?void 0:O.customDomain)&&(null===O||void 0===O?void 0:O.externalDomain)||fn(!0),"public"!==(null===O||void 0===O?void 0:O.status)||(null===O||void 0===O?void 0:O.customDomain)&&(null===O||void 0===O?void 0:O.externalDomain)||xn(!0))}),[y]),(0,v.useEffect)((function(){var e=window.websitePage;e&&xe&&null==e.slug&&Kt&&!Kt.generatedAt&&Kt.generate&&e.blocks.length<=2&&(null===Kt||void 0===Kt?void 0:Kt.business)&&!ni&&!oi&&(null===mi||void 0===mi?void 0:mi.length)>0&&O&&(ai(!0),ti(!0),setTimeout((function(){us()}),2e3))}),[window.websitePage,xe,Kt,mi,O]),(0,v.useEffect)((function(){(0,i.Z)((function(){var e;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return _o?((e={createBlogPost:function(){return ms()},addSocialLinks:Ns})[_o]&&e[_o](),Po(null),[4,Ti.push("/website/builder",null,{shallow:!0})]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))()}),[_o,window.websitePage]),(0,v.useEffect)((function(){var e=De||At||Me||bo;window.dispatchEvent(new CustomEvent("website-builder-manage-toggle",{detail:{open:e}})),e||al(null),Io&&!Me&&To(!1)}),[De,At,Me,bo]),(0,v.useEffect)((function(){var e=zt||Mt;window.dispatchEvent(new CustomEvent("website-builder-post-media-manage-toggle",{detail:{open:e}}))}),[zt,Mt]),(0,v.useEffect)((function(){(null===Ce||void 0===Ce?void 0:Ce.length)>0&&xe&&(null===Ao||void 0===Ao?void 0:Ao.selectedPageId)!==(null===xe||void 0===xe?void 0:xe.id)&&Ss(xe.id,Ce)}),[Ce,xe,Ao]),(0,v.useEffect)((function(){if(O&&(null===Ce||void 0===Ce?void 0:Ce.length)>0&&xe&&(null===Ao||void 0===Ao?void 0:Ao.selectedPageId)===(null===xe||void 0===xe?void 0:xe.id)&&(null===Ao||void 0===Ao?void 0:Ao.website)&&(null===Ao||void 0===Ao?void 0:Ao.page)){var e=Ce.find((function(e){return e.id===xe.id})),n={website:O,page:e,selectedPageId:xe.id};JSON.stringify(Ao)===JSON.stringify(n)?j(!1):j(!0)}}),[O,Ce,xe,Ao]),(0,v.useEffect)((function(){return Gl(),Fl(),zl(),is(),Ll(),window.addEventListener("openManagePostImage",ys),window.addEventListener("openManagePostVideo",js),window.addEventListener("tryPalette",ks),function(){window.removeEventListener("openManagePostImage",ys),window.removeEventListener("openManagePostVideo",js),window.removeEventListener("tryPalette",ks),oo.current&&clearTimeout(oo.current),window.websitePage=void 0,window.updatedWidgets=void 0}}),[]),(0,v.useEffect)((function(){return window.addEventListener("keyup",vs),function(){window.removeEventListener("keyup",vs)}}),[_n]),(0,v.useEffect)((function(){setTimeout((0,i.Z)((function(){var e,n,t,i;return(0,c.__generator)(this,(function(o){switch(o.label){case 0:return Ce.length>0&&hi?(n=null===(e=null===L||void 0===L?void 0:L.find((function(e){return"blog"===e.type})))||void 0===e?void 0:e.id)?[4,xs(n)]:[3,3]:[3,4];case 1:return o.sent(),[4,Ai("/website/get-post-by-id",{id:hi})];case 2:!0===(null===(t=o.sent())||void 0===t?void 0:t.status)&&(null===t||void 0===t?void 0:t.content)&&((i=t.content).publishedAt=i.publishedAt?Y.ou.fromISO(i.publishedAt).toJSDate():null,i.createdAt=i.createdAt?Y.ou.fromISO(i.createdAt).toJSDate():Y.ou.now().toJSDate(),window.dispatchEvent(new CustomEvent("website-builder-post-changed",{detail:{post:i}}))),o.label=3;case 3:gi(null),o.label=4;case 4:return[2]}}))})),1e3)}),[Ce]),(0,v.useEffect)((function(){return window.addEventListener("entri-finished-setup",_s),function(){window.removeEventListener("entri-finished-setup",_s)}}),[]),(0,v.useEffect)((function(){Cl&&ds()}),[Cl]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(ve.Z,{context:_n,open:!!_n&&["premium_widgets","manage_pages","manage_posts","premium_sections","made_with_durable","domain","publish","preview","page_counter","domain_alert","external_domain"].includes(_n),setOpen:function(){return Pn("")},canClose:!0,onBuy:(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){return[2,Hl()]}))}))}),Mo&&(0,u.jsx)(Q.u,{open:Mo,title:"Cookie notice added",buttons:(0,u.jsxs)("div",{className:"flex gap-3",children:[(0,u.jsx)("button",{className:"secondary",onClick:function(){return Vo(!1)},children:"Close"}),(0,u.jsx)("a",{className:"button primary",href:"https://help.durable.co/en/articles/8561007-learn-about-cookies-notice-bar",rel:"noreferrer",target:"_blank",children:"Learn more"})]}),setOpen:Vo,contentClassName:"max-w-[420px]",footerHasMarginTop:!1,children:(0,u.jsx)(J.U,{text:"A cookie notice may be sufficient for you, but every business is unique. Make sure you understand the requirements that apply to your website.",variant:"info"})}),(0,u.jsxs)(be(),{children:[(0,u.jsx)("title",{children:"Website builder - Durable"}),(0,u.jsx)("meta",{name:"description",content:"Durable for your business"}),(0,u.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/apple-touch-icon.png"}),(0,u.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32x32.png"}),(0,u.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16x16.png"}),(0,u.jsx)("link",{rel:"manifest",href:"/site.webmanifest"}),(0,u.jsx)("link",{rel:"icon",href:"/favicon.ico",sizes:"any"}),(0,u.jsx)("link",{rel:"icon",href:"/favicon.svg",type:"image/svg+xml"})]}),(0,u.jsxs)("div",{id:"main-builder",className:"bg-white flex flex-col min-h-dyn lg:min-h-full justify-start no-scrollbar",onClick:Zs,children:[(0,u.jsx)(Te.Z,{track:Dl,website:O,loading:x,disabled:_,generating:An,generatingPost:Wn,dirty:Dt?N:y,blogMode:Ol,postMode:Dt,pages:L,selectedPage:xe,selectedBlock:Pe,selectedPost:Jn,openManage:De,handleOpenManage:Cs,openManageWidgets:bo,handleOpenPostAssistant:ms,handleViewWebsite:$l,openAssistant:$n,setOpenAssistant:Kn,openSupport:function(){return cl(!0)},handleOpenManagePage:fs,openManagePages:Je,openManagePost:At,setDevice:Ne,onExit:function(e){return Ul(e)},onDiscard:function(){Ji("Discard changes?","Are you sure you want to close without saving? Any unsaved changes will be discarded.",(0,i.Z)((function(){var e,n;return(0,c.__generator)(this,(function(t){return e=(0,h.p$)(Ao.website),n=(0,h.p$)(Ao.page),z(e),Xl(n),es(e),Ql({settings:null===e||void 0===e?void 0:e.socialSettings,items:Array.isArray(e.social)?e.social:[]}),ls(e.widgets),Ve(!1),wo(!1),We(!1),Co(!1),[2]}))})))},onSave:function(){return Hl()},setOpenChangeTemplate:Sl,openChangeTemplate:Cl,setOpenRegenerate:Tn,onSelectPage:xs}),(0,u.jsx)(ln,{track:Dl,generatingPost:Wn,setOpenChangeTemplate:Sl,openChangeTemplate:Cl,website:O,page:Rl,onApply:Wl}),x&&(0,u.jsx)(ue.Z,{}),(0,u.jsx)(ce.Z,{track:Dl,website:O,dirty:y,pages:L,selectedPage:xe,selectedPost:Jn,loading:x,blogMode:Ol,postMode:Dt,generating:An||Wn,openAssistant:$n,setOpenAssistant:Kn,openSupport:function(){return cl(!0)},isOpenSupport:Ho,handleOpenManage:Cs,handleOpenManagePage:fs,openManageWidgets:bo,onView:$l,setOpenChangeTemplate:Sl,openChangeTemplate:Cl,setOpenRegenerate:Tn,onSelectPage:xs,onExit:function(e){return Ul(e)}})]}),De&&Pe&&function(){var e;if("durable"!==(null===Pe||void 0===Pe||null===(e=Pe.WebsiteBlock)||void 0===e?void 0:e.source)){var n;if("common-ninja"===(null===Pe||void 0===Pe||null===(n=Pe.WebsiteBlock)||void 0===n?void 0:n.source))return(0,u.jsx)(nt,{open:De,setOpen:We,block:Pe,setBlock:Ee,rtl:se,setRtl:fe,loading:x,website:O,editWidget:ws})}else{var t={open:De,setOpen:We,block:Pe,setBlock:Ee,rtl:se,setRtl:fe,website:O,loading:x};switch(Pe.WebsiteBlock.type){case"header":return(0,u.jsx)(ct,(0,s.Z)((0,l.Z)({},t),{updateSocial:Ql,scrollToLocation:so,setScrollToLocation:ro,onValid:Jl,onChangeIcon:function(e){return es((0,s.Z)((0,l.Z)({},O),{favicon:e}))},onRedirect:Ul}));case"banner":return(0,u.jsx)(Xn,(0,s.Z)((0,l.Z)({},t),{onValid:Jl}));case"banner-carousel":return(0,u.jsx)(Pt,(0,s.Z)((0,l.Z)({},t),{onValid:Jl}));case"banner-slider-carousel":return(0,u.jsx)(On,(0,s.Z)((0,l.Z)({},t),{onValid:Jl}));case"banner-double-slider-carousel":return(0,u.jsx)(Fn,(0,s.Z)((0,l.Z)({},t),{onValid:Jl}));case"banner-progress-bar-carousel":return(0,u.jsx)(Mn,(0,s.Z)((0,l.Z)({},t),{onValid:Jl}));case"banner-grid-cards":return(0,u.jsx)(qn,(0,s.Z)((0,l.Z)({},t),{onValid:Jl}));case"banner-grid":return(0,u.jsx)(Et,(0,s.Z)((0,l.Z)({},t),{onValid:Jl}));case"hero":return(0,u.jsx)(ut,(0,s.Z)((0,l.Z)({},t),{onValid:Jl}));case"quote":return(0,u.jsx)(bt,(0,s.Z)((0,l.Z)({},t),{onValid:Jl}));case"gallery":case"image-grid":case"image-carousel":return(0,u.jsx)(rt,(0,l.Z)({},t));case"video":return(0,u.jsx)(yt,(0,s.Z)((0,l.Z)({},t),{onValid:Jl}));case"list":case"service-list":case"team-list":return(0,u.jsx)(vt,(0,s.Z)((0,l.Z)({},t),{onValid:Jl}));case"pricing-table":return(0,u.jsx)(xt,(0,s.Z)((0,l.Z)({},t),{onValid:Jl}));case"business-hours":return(0,u.jsx)(Nt,(0,l.Z)({},t));case"text":return(0,u.jsx)(wt,(0,s.Z)((0,l.Z)({},t),{onValid:Jl}));case"plain-text":return(0,u.jsx)(It,(0,s.Z)((0,l.Z)({},t),{onValid:Jl}));case"location":case"map":return(0,u.jsx)(mt,(0,l.Z)({},t));case"contact":return(0,u.jsx)(tt,(0,l.Z)({},t));case"embed":return(0,u.jsx)(ot,(0,l.Z)({},t));case"image":return(0,u.jsx)(dt,(0,l.Z)({},t));case"footer":return(0,u.jsx)(st,(0,s.Z)((0,l.Z)({},t),{updateSocial:Ql,onValid:Jl,onPaywall:Pn,onRedirect:Ul}));case"calendly-scheduling":return(0,u.jsx)(et,(0,s.Z)((0,l.Z)({},t),{onValid:Jl}));case"instagram":return(0,d.n2)(Pe)?(0,u.jsx)(A,(0,s.Z)((0,l.Z)({},t),{businessConfig:I,getBusinessConfig:Fl})):(0,u.jsx)(_t,(0,l.Z)({},t));case"blog":return(0,u.jsx)(Qn,(0,l.Z)({},t));case"faq":return(0,u.jsx)(lt,(0,l.Z)({},t));case"google-reviews":return(0,u.jsx)(at,(0,l.Z)({},t));case"scheduler":return(0,u.jsx)(St,(0,s.Z)((0,l.Z)({},t),{exitConfirm:y?qi:null}));case"cta":return(0,u.jsx)(it,(0,s.Z)((0,l.Z)({},t),{onValid:Jl}));case"logo-showcase":return(0,u.jsx)(Zt,(0,s.Z)((0,l.Z)({},t),{onValid:Jl}));case"recent-posts":return(0,u.jsx)(Ct,(0,l.Z)({},t))}}}(),At&&Jn&&(0,u.jsx)(pt,{open:At,setOpen:Ot,post:Jn,setPost:Yn,rtl:se,setRtl:fe,website:O,onValid:Jl}),(0,u.jsx)(Fi,{confirmText:"Got it"}),(0,u.jsx)(Li,{confirmText:"Regenerate"}),(0,u.jsx)($i,{attention:!0}),(0,u.jsx)(Hi,{confirmText:"Discard and exit",attention:!0}),(0,u.jsx)(Yi,{confirmText:"Discard",attention:!0}),(0,u.jsx)(eo,{attention:!0,confirmText:"Regenerate"}),(0,u.jsx)(io,{confirmText:"Save",cancelText:"Cancel"}),ri&&(0,u.jsx)(ue.Z,{text:ui}),(0,u.jsx)(ee.P,{status:null===O||void 0===O?void 0:O.status,preview:zo,previewToken:as(),open:ze,setOpen:Ge,setOpenPaywall:Pn,loading:x,setLoading:b,onPreview:(0,i.Z)((function(){return(0,c.__generator)(this,(function(e){return[2,Kl()]}))})),onPublish:function(){return Vl()}}),!(null===Si||void 0===Si||null===(n=Si.user)||void 0===n?void 0:n.customPlan)&&(0,u.jsx)(je,{open:!Cl&&!tl&&mn&&!Dt&&""===_n&&!ze,scrolledDistance:Zn,onClose:function(){return fn(!1)},onPublish:function(){var e,n;"free"!==(null===Si||void 0===Si||null===(e=Si.user)||void 0===e||null===(n=e.plan)||void 0===n?void 0:n.priceId)?Vl(!0):(Dl("account:paywall-click",{context:"publish_flow_banner"}),Pn("publish"))}},"publish-alert-key-".concat(tl?"-0":"-1")),(0,u.jsx)(Oe.Z,{open:un,setOpen:dn,website:O}),"free"===(null===Si||void 0===Si||null===(t=Si.user)||void 0===t||null===(m=t.plan)||void 0===m?void 0:m.priceId)&&"public"===(null===O||void 0===O?void 0:O.status)&&(0,u.jsx)(ge,{open:!tl&&hn&&!Dt&&""===_n,scrolledDistance:Zn,onClose:function(){return xn(!1)},onAction:function(){return Pn("domain_alert")}},"custom-domain-alert-key-".concat(tl?"-0":"-1")),(0,u.jsx)(Ie,{website:O,open:Me,setOpen:Ve,tryPalette:Io,onChange:es,onPreviewMigration:function(e){var n=(0,h.p$)(window.websitePage),t=!0,i=!1,o=void 0;try{for(var r,a=n.blocks[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var c=r.value;if(e){if(!c.layers||"footer"===c.WebsiteBlock.type&&!c.layers.palette){var u=(0,S.SH)(c,O);c.layers=(0,l.Z)({},c.layers,u),c.layers.image=(0,X.Dn)(c),c.migratedFromOld=!0}var d;if("header"===c.WebsiteBlock.type?c.layers.palette="color1":"footer"===c.WebsiteBlock.type||"banner"===c.WebsiteBlock.type?c.layers.palette="color2":c.layers.palette=(0,h.kd)(["color3","color4"]),c.button||c.showButton||"contact"===c.WebsiteBlock.type)c.button=(0,s.Z)((0,l.Z)({},c.button),{style:(0,s.Z)((0,l.Z)({},null===(d=c.button)||void 0===d?void 0:d.style),{name:"style1"})})}else{var v;if(c.migratedFromOld?delete c.layers:c.layers.palette="custom",c.button||c.showButton||"contact"===c.WebsiteBlock.type)c.button=(0,s.Z)((0,l.Z)({},c.button),{style:(0,s.Z)((0,l.Z)({},null===(v=c.button)||void 0===v?void 0:v.style),{name:"custom"})})}}}catch(m){i=!0,o=m}finally{try{t||null==a.return||a.return()}finally{if(i)throw o}}Xl(n),window.dispatchEvent(new CustomEvent("website-builder-changed",{detail:{previewMigration:e}}))},rtl:se,setRtl:fe,scrollToLocation:so,setScrollToLocation:ro,initialTab:fl}),Je&&!tn&&(0,u.jsx)(ft,{open:Je,setOpen:Ye,currentPage:xe,isOpenCreatePage:tn,setIsOpenCreatePage:on,isOpenManagePage:Qe,setIsOpenManagePage:en,postsCount:Do,setOpenPaywall:Pn,onSortEnd:Gl,onSelectPage:xs,onCreatePage:gs,onDuplicatePage:Gl,onUpdatePage:ts,onCreatePost:bs}),(0,u.jsx)(pe,{website:Kt,pages:Ce,open:tn,setOpen:on,aiCreatePageType:ji,websitePages:Ce,onCreatePage:gs,onCreatePost:ms,closeManagePagesModal:function(){return Ye(!1)}}),(0,u.jsx)(ae.Z,{open:$n,setOpen:Kn,contextualAiFunctions:Jo}),(0,u.jsx)(H,{open:mo,setOpen:fo,setOpenPaywall:Pn,onSelect:os}),(0,u.jsx)(Tt,{open:kl,setOpen:Nl,rtl:se,setRtl:fe,websiteToRegenerate:Kt,onChangePage:function(e){return Xl(e)}}),zt&&(0,u.jsx)(ht,{open:zt,setOpen:Gt,rtl:se,setRtl:fe,website:O}),Mt&&(0,u.jsx)(gt,{open:Mt,setOpen:Vt,rtl:se,setRtl:fe,website:O}),ko&&(0,u.jsx)(de,{open:jo,setOpen:ko,block:Pe,refreshWidget:function(e){e&&window.dispatchEvent(new CustomEvent("widget-reload",{detail:e}))}}),Zo&&(0,u.jsx)(jt,{open:Zo,setOpen:Co,block:Pe,setBlock:Ee,rtl:se,setRtl:fe,loading:x,website:O,onClose:function(){return wo(!0)}}),ho&&(0,u.jsx)(re,{open:ho,setOpen:go,widgets:null===O||void 0===O?void 0:O.widgets,onSelect:ss,setOpenPaywall:Pn}),bo&&(0,u.jsx)(kt,{sortWidgets:function(e){z((function(n){return(0,s.Z)((0,l.Z)({},n),{widgets:e})})),ls(e)},open:bo,setOpen:wo,rtl:se,setRtl:fe,widgets:null===O||void 0===O?void 0:O.widgets,addWidget:function(){return go(!0)},editWidget:function(e){Ee(e),"common-ninja"===(null===e||void 0===e?void 0:e.WebsiteBlock.source)?ko(!0):(Co(!0),wo(!1))},deleteWidget:function(e){z((function(n){var t=(null===n||void 0===n?void 0:n.widgets)?n.widgets.filter((function(n){return n.type!==e})):[];return ls(t),(0,s.Z)((0,l.Z)({},n),{widgets:t})}))}}),!Cl&&tl&&ll&&(0,u.jsx)(Ke,{showOnboarding:!1,onClose:function(){il(!1)},onOpenAI:function(){Kn(!0)},websitePublished:"public"===(null===O||void 0===O?void 0:O.status)}),(0,u.jsx)(qe.Z,{onlyExchangeToken:!0}),(0,u.jsx)(an.Z,{}),Pl&&(0,u.jsx)(bn,{open:Pl,setOpen:El,status:null===O||void 0===O?void 0:O.status,website:O,showAlert:mn,onPublish:Vl,setOpenPaywall:Pn,onOpenLinkDomain:function(){Al(!0),El(!1)}}),Bl&&(0,u.jsx)(gn.Z,{open:Bl,setOpen:Al,fromBuilder:!0,refreshWebsite:function(){},afterComplete:function(){Al(!1),Vl(!0).catch((function(){}))},onClose:function(){Al(!1),El(!1)},onBack:function(){Al(!1),El(!0)}}),In&&(0,u.jsx)(yn.Z,{open:In,setOpen:Tn}),(0,u.jsx)(wn.Z,{})]})}At.auth=!0,At.layout=!1}},function(e){e.O(0,[8802,7040,6440,1033,361,9177,780,3443,1520,4768,6329,1566,3056,9435,7286,2734,1125,2295,6882,1273,1960,7870,6748,4487,7865,9024,1337,9774,2888,179],(function(){return n=64938,e(e.s=n);var n}));var n=e.O();_N_E=n}]);