(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1641],{58657:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/business-selector",function(){return n(441)}])},76078:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var s=n(26042),i=n(69396),l=n(10253),a=n(85893),r=n(67294),o=n(46440),c=n(72510),u=n(2740),d=n(11355),m=n(69737),p=n(3732),f=n(66261),v=n(66605),x=function(e,t){var n=(0,r.useState)(t),s=n[0],i=n[1];return(0,r.useEffect)((function(){var t,n=function(t){var n=Array.isArray(e)?e:[e],s=!0;n.forEach((function(e){null!==e.current&&e.current.contains(t.target)&&(s=!1)})),s&&i(!1)};s&&(window.addEventListener("click",n),window.top.addEventListener("click",n),null===(t=window.preview)||void 0===t||t.addEventListener("click",n));return function(){var e;window.removeEventListener("click",n),window.top.removeEventListener("click",n),null===(e=window.preview)||void 0===e||e.removeEventListener("click",n)}}),[s,e]),[s,i]};function h(e){var t=e.className,n=e.icon,h=e.iconClassName,g=e.button,b=e.buttonClassName,y=e.openClassName,j=e.iconOpenClassName,w=e.children,N=e.inline,I=e.itemsContainerClass,k=e.mobileContent,C=e.mobileTitle,S=e.tooltip,R=e.disabled,Z=e.placementAlign,T=void 0===Z?"end":Z,P=e.onOpen,E=e.onButtonClick,F=e.closeOnSelect,_=e.show,M=void 0===_||_,A=e.portal,D=void 0===A||A,z=e.dataTour,B=e.onClose,O=e.showCloseButton,L=void 0===O||O,K=(0,p.ac)("(min-width: 1024px)"),V=(0,r.useState)(null),Q=V[0],U=V[1],Y=(0,r.useState)(null),G=Y[0],X=Y[1],$=(0,r.useRef)(null),q=(0,r.useRef)(null),J=(0,l.Z)(x($,!1),2),H=J[0],W=J[1],ee=(0,o.D)(Q,G,{placement:"bottom-".concat(T),modifiers:[{name:"flip",options:{allowedAutoPlacements:["top-start","bottom-start","top-end","bottom-end"]}},{name:"offset",options:{offset:[0,8]}}]}),te=ee.styles,ne=ee.attributes,se=function(e){e.stopPropagation(),W(!H);var t=new Event("click",{bubbles:!0});document.dispatchEvent(t),"function"===typeof E&&E(e)},ie=function(){H&&(W(!1),"function"===typeof B&&B())},le=function(){return(0,a.jsx)(c.v.Button,{ref:U,className:(0,p.AK)(b,H?y:"","z-5"),disabled:R,onClick:se,children:g||(0,a.jsx)(f.Z,{icon:n||"DotsVerticalIcon",className:(0,p.AK)(h,"h-5 w-5",H?j||"text-indigo-500":!h&&"text-gray-500")})})};(0,r.useEffect)((function(){return"function"===typeof P&&P(H),window.top.addEventListener("dropdown-open",ie),window.top.addEventListener("close-dropdown",ie),function(){window.top.removeEventListener("dropdown-open",ie),window.top.removeEventListener("close-dropdown",ie)}}),[H]);var ae=D?u.h:r.Fragment;return(0,r.useEffect)((function(){!1===H&&"function"===typeof B&&B()}),[H]),(0,a.jsx)(c.v,{"data-tour":z,ref:$,as:"div",className:(0,p.AK)("relative inline-block text-left",t),onClick:function(e){return e.stopPropagation()},children:function(e){e.open;return(0,a.jsxs)(a.Fragment,{children:[S?(0,a.jsx)(v.Z,{alt:S,disabled:R,children:le()}):le(),(0,a.jsx)(ae,{children:K?(0,a.jsx)("div",(0,i.Z)((0,s.Z)({className:(0,p.AK)("z-100 transition-opacity",M?"opacity-100":"opacity-0"),ref:q,style:te.popper},ne.popper),{children:(0,a.jsx)(d.u,{show:H,as:r.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",beforeEnter:function(){return X(q.current)},afterLeave:function(){return X(null)},children:(0,a.jsx)(c.v.Items,{static:!0,className:(0,p.AK)(N?"static":"absolute","origin-top-right z-10 right-0 mt-1 w-full min-w-50 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none overflow-hidden",I),onClick:function(){return F&&W(!1)},children:w})})})):(0,a.jsx)(d.u.Root,{show:H,as:r.Fragment,children:(0,a.jsx)(m.V,{as:"div",className:"fixed z-100 inset-0 overflow-y-auto",onClose:function(){return W(!1)},children:(0,a.jsxs)("div",{className:"flex items-end justify-center h-full text-center",children:[(0,a.jsx)(d.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity",onClick:function(){return W(!1)}})}),(0,a.jsx)(d.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4",enterTo:"opacity-100 translate-y-0",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-4",children:(0,a.jsxs)("div",{className:(0,p.AK)("w-full bg-white pt-2 text-left overflow-hidden shadow-xl transform transition-all",k?"flex flex-col h-full":"block rounded-t-lg",!L&&"pb-6"),children:[k&&(0,a.jsx)("div",{className:"flex-1 flex justify-center items-center p-10",children:k}),C&&(0,a.jsxs)("div",{className:"flex md:hidden items-center justify-between gap-3 pl-4 pr-2 pt-1 pb-2 border-b",children:[(0,a.jsx)("p",{className:"font-semibold py-2",children:C}),(0,a.jsx)("button",{className:"light icon transparent",onClick:function(){return W(!1)},children:(0,a.jsx)(f.Z,{icon:"XIcon",className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:(0,p.AK)("flex flex-col overflow-hidden",I),children:(0,a.jsx)(c.v.Items,{onClick:function(){return F&&W(!1)},children:w})}),L&&(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("button",{className:"light lg w-full",onClick:function(){return W(!1)},children:"Close"})})]})})]})})})})]})}})}},92265:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var s=n(47568),i=n(10253),l=n(97582),a=n(3732),r=n(11215),o=n(4519),c=n(61437),u=n(67294),d=n(33299);function m(){var e=(0,i.Z)((0,c.Z)("business.settings.ai",null),3),t=e[0],n=e[1],m=e[2],p=(0,i.Z)((0,c.Z)("business.loadingAiSettings",!1),3),f=p[0],v=p[1],x=p[2],h=(0,i.Z)((0,c.Z)("business.settings.ai.businessId",null),3),g=h[1],b=h[2],y=(0,r.Z)(),j=y.current,w=y.reloadBusinesses,N=(0,d.useSession)().data,I=!!(null===N||void 0===N?void 0:N.user),k=(0,o.Z)(),C=k.get,S=k.post,R=function(){var e=(0,s.Z)((function(){var e,t;return(0,l.__generator)(this,(function(s){switch(s.label){case 0:return g(null===j||void 0===j?void 0:j._id),v(!0),[4,C("/business/get-settings")];case 1:return(e=s.sent())&&!0===e.status&&e.content&&(t=e.content.ai||{model:"better",language:"en"},(0,a.Fs)("business.settings.ai",t),n(t)),v(!1),[2,e]}}))}));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=(0,s.Z)((function(){var e,n,s=arguments;return(0,l.__generator)(this,(function(i){switch(i.label){case 0:return e=!(s.length>0&&void 0!==s[0])||s[0],[4,S("/business/save-settings",{path:"ai",value:t})];case 1:return(n=i.sent())&&!0===n.status&&(w(),e&&a.Z9.success("Settings saved!")),[2,n]}}))}));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){I&&(null===j||void 0===j?void 0:j._id)&&(!m.current&&!x.current||b.current!==(null===j||void 0===j?void 0:j._id))&&R()}),[j,I]),{aiSettings:t,setAiSettings:n,loadingAiSettings:f,getAiSettings:R,saveAiSettings:Z,aiSettingsRef:m}}},441:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var s=n(47568),i=n(97582),l=n(85893),a=n(67294),r=n(11163),o=n(66261),c=n(9008),u=n.n(c),d=n(25675),m=n.n(d),p=n(52077),f=n(29834),v=n(41664),x=n.n(v),h=n(51121),g=n(16494),b=n(76078),y=n(72510),j=n(62202),w=n(66605),N=(n(30120),n(13466)),I=n(11215),k=n(30818),C=n(26688),S=n(53371),R=n(47914),Z=n(11355),T=n(69737),P=n(3732),E=n(43714),F=function(e){var t=e.open,n=e.onClose,s=e.onDeleteBusiness,i=e.onRegenerate,r=(0,E.Z)().track,c=function(){"function"===typeof n&&n()},u=[{id:"card-regen-website",title:"Regenerate website",subtitle:"Start over with your site, optionally with new business details",action:function(){r("app:business-selector-delete-regenerate"),"function"===typeof i&&i(),c()}},{id:"card-delete-business",title:"Delete business",subtitle:"Delete this business, including website, domain, contacts, etc.",action:function(){c(),"function"===typeof s&&s()}}];return(0,l.jsx)(Z.u,{show:t,as:a.Fragment,children:(0,l.jsxs)(T.V,{as:"div",className:"relative z-100",onClose:function(){},children:[(0,l.jsx)(Z.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,l.jsx)(T.V.Overlay,{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity"})}),(0,l.jsx)(Z.u.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",enterTo:"opacity-100 translate-y-0 md:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 md:scale-100",leaveTo:"opacity-0 translate-y-4 md:translate-y-0 md:scale-95",children:(0,l.jsxs)("div",{className:(0,P.AK)("fixed bottom-0 left-0 bg-white w-full","md:bottom-[unset] shadow-lg ","rounded-t-md md:left-1/2 md:top-1/2 md:-translate-y-1/2 md:-translate-x-1/2","max-w-120 md:max-h-[80vh] md:min-h-[auto] md:rounded-md"),children:[(0,l.jsx)("div",{className:"sticky top-0 z-20 block w-full bg-white border-b border-gray-200 py-5 px-6 rounded-t-md",children:(0,l.jsx)(T.V.Title,{className:"text-gray-900 font-semibold",children:"Delete business, or regenerate website?"})}),(0,l.jsxs)("div",{className:(0,P.AK)("p-6 w-full overflow-y-auto","max-h-[calc(90vh-60px)] md:max-h-[calc(80vh-80px)]"),children:[(0,l.jsx)("p",{className:"text-gray-900 font-normal text-left mb-6",children:"Instead of deleting this business, you can regenerate its website."}),(0,l.jsx)("div",{className:"space-y-4",children:u.map((function(e){return(0,l.jsxs)("div",{className:(0,P.AK)("flex flex-row items-center gap-4 border border-gray-300","p-4 rounded-md shadow-sm cursor-pointer","hover:bg-indigo-50 transition-all duration-200"),onClick:e.action,children:[(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsx)("p",{className:"font-medium mb-2",children:e.title}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:e.subtitle})]}),(0,l.jsx)(o.Z,{icon:"ChevronRightIcon",className:"flex-shrink-0 h-6 w-6 text-gray-500"})]},e.id)}))})]}),(0,l.jsx)("div",{className:"flex justify-end px-6 py-4 border-t border-gray-200",children:(0,l.jsx)("button",{className:"light",onClick:c,children:"Cancel"})})]})})]})})},_=n(22295);function M(){var e,t,n,c,d,v,Z,T=(0,a.useState)(!1),E=T[0],M=T[1],A=(0,a.useState)(""),D=A[0],z=A[1],B=(0,a.useState)(!1),O=B[0],L=B[1],K=(0,a.useState)(!1),V=K[0],Q=K[1],U=(0,a.useState)(!1),Y=U[0],G=U[1],X=(0,a.useState)(null),$=X[0],q=X[1],J=(0,a.useState)(!1),H=J[0],W=J[1],ee=(0,C.Z)(),te=ee.confirm,ne=ee.ConfirmDialog,se=(0,I.Z)({query:D}),ie=se.data,le=se.set,ae=(se.unset,se.isChangingBusiness),re=se.isCreatingBusiness,oe=se.changePicture,ce=se.deleteBusiness,ue=se.session,de=se.invitations,me=se.acceptInvitation,pe=se.declineInvitation,fe=se.isProcessingInvitation,ve=(0,r.useRouter)(),xe=function(e){switch(e.stripeDetails.subscriptionStatus){case"active":var t;switch(null===(t=e.plan)||void 0===t?void 0:t.name){case"Startup":return(0,l.jsx)("div",{className:"z-5 bg-blue-100 rounded-full px-2 py-1 text-blue-800 text-label-sm font-medium ml-auto",children:"Startup"});case"Pro":return(0,l.jsx)("div",{className:"z-5 bg-green-100 rounded-full px-2 py-1 text-green-800 text-label-sm font-medium ml-auto",children:"Pro"});default:var n;return(0,l.jsx)("div",{className:"z-5 bg-gray-100 rounded-full px-2 py-1 text-gray-800 text-label-sm font-medium ml-auto",children:(null===(n=e.plan)||void 0===n?void 0:n.name)||"Durable plan"})}case"past_due":return(0,l.jsx)("div",{className:"z-5 bg-red-100 rounded-full px-2 py-1 text-red-800 text-label-sm font-medium ml-auto",children:"Past due"});case"canceled":return(0,l.jsx)("div",{className:"z-5 bg-red-100 rounded-full px-2 py-1 text-red-800 text-label-sm font-medium ml-auto",children:"Canceled"});default:return(0,l.jsx)("div",{className:"z-5 bg-yellow-100 rounded-full px-2 py-1 text-yellow-800 text-label-sm font-medium ml-auto",children:"No plan"})}},he=function(){return(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4 p-6 w-full bg-gray-100",children:[(0,l.jsx)("p",{className:"text-label text-gray-500",children:D?"No business found":"There are no businesses"}),!D&&(0,l.jsx)(ge,{})]})},ge=function(){return(0,l.jsx)(p.Z,{className:"primary",onClick:function(){var e,t,n;!(null===ue||void 0===ue||null===(e=ue.user)||void 0===e?void 0:e.customPlan)&&(null===ie||void 0===ie?void 0:ie.length)>0?Q(!0):(null===ie||void 0===ie?void 0:ie.length)>=(null===ue||void 0===ue||null===(t=ue.user)||void 0===t||null===(n=t.customPlan)||void 0===n?void 0:n.businessesLimit)?P.Z9.info("You have reached the limit of businesses for your plan. Please get in touch to create more businesses."):L(!0)},loading:re,children:"Create new business"})};return(0,a.useEffect)((function(){var e;(null===ve||void 0===ve||null===(e=ve.query)||void 0===e?void 0:e.create)&&(L(!0),ve.push("/business-selector",void 0,{shallow:!0}))}),[ve]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(S.Z,{context:"create_business",checkManager:!1,open:V,setOpen:Q,onViewPlans:function(){var e=null===ie||void 0===ie?void 0:ie.find((function(e){return e.isManager}));e&&le(e,!0,"/upgrade"),Q(!1)}}),(0,l.jsxs)(u(),{children:[(0,l.jsx)("title",{children:"Select your Business - Durable"}),(0,l.jsx)("meta",{name:"description",content:"Durable for your business"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico",sizes:"any"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.svg",type:"image/svg+xml"}),(0,l.jsx)("style",{children:" body { padding-left: 0 !important; }"})]}),(0,l.jsxs)("main",{className:"flex flex-col h-dyn",children:[ae&&(0,l.jsx)(k.X,{text:"Loading business..."}),fe&&(0,l.jsx)(k.X,{text:"Processing invitation..."}),(0,l.jsx)(f.Z,{title:(null===ie||void 0===ie?void 0:ie.length)>1?"My businesses":"My business",tabs:null}),(0,l.jsxs)("div",{className:"flex flex-col items-center justify-start h-full overflow-x-hidden main-scrollbar",children:[ie&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-full flex-col relative flex items-center justify-between gap-3 ",children:0!==(null===ie||void 0===ie?void 0:ie.length)||0!==de.length||D?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"w-full relative flex items-center justify-between gap-3 mb-4 lg:mb-6",children:[(0,l.jsx)("div",{className:(0,P.AK)("flex-col md:flex-row gap-3 w-full md:w-auto justify-center md:justify-start",E?"flex":"hidden md:flex"),children:(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"flex-1 relative",children:[(0,l.jsx)("span",{className:"absolute top-1/2 z-10 pl-2.5 -translate-y-1/2",children:(0,l.jsx)(o.Z,{icon:"SearchIcon",className:"w-5 h-5"})}),(0,l.jsx)(h.Z,{className:"flex-1 w-full md:w-auto",inputClassName:"!pl-9",value:D,onChange:function(e){return z(e)},placeholder:"Search"})]}),(0,l.jsx)("div",{className:"flex-shrink-0 md:hidden",children:(0,l.jsx)("button",{className:"round secondary",onClick:function(){return M(!1)},children:(0,l.jsx)(o.Z,{icon:"XIcon",className:"w-4 h-4 text-gray-700"})})})]})})}),(0,l.jsx)("div",{className:(0,P.AK)(E?"hidden":"md:hidden"),style:{marginBottom:"1.5px",marginTop:"1.5px"},children:(0,l.jsx)("button",{className:"round light",onClick:function(){return M(!0)},children:(0,l.jsx)(o.Z,{icon:"SearchIcon",className:"w-5 h-5"})})}),(0,l.jsx)("div",{className:(0,P.AK)("items-center gap-3",E?"hidden md:flex":"flex"),children:(0,l.jsx)(ge,{})})]})}):(0,l.jsx)("div",{className:"w-full pb-8 mx-auto",children:(0,l.jsx)(he,{})})}),(null===ue||void 0===ue||null===(e=ue.user)||void 0===e?void 0:e.customPlan)&&"active"===(null===ue||void 0===ue||null===(t=ue.user)||void 0===t||null===(n=t.customPlan)||void 0===n?void 0:n.status)&&(0,l.jsx)("div",{className:"w-full md:w-auto self-start mb-4 lg:mb-6",children:(0,l.jsxs)("div",{className:" flex gap-2 border border-blue-200 items-center bg-blue-100 text-blue-800 rounded-md p-2",children:[(0,l.jsx)(o.Z,{icon:"InformationCircleIcon",className:"w-4 h-4 text-blue-800 flex-shrink-0"}),(0,l.jsxs)("p",{className:"",children:["You have ",ie.length," of  ",null===ue||void 0===ue||null===(c=ue.user)||void 0===c||null===(d=c.customPlan)||void 0===d?void 0:d.businessesLimit," Businesses"]})]})})]}),!ie&&(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-6 gap-10 lg:gap-8 xl:gap-10 w-full",children:[(0,l.jsx)(g.Z,{variant:"card",className:"!max-w-full"}),(0,l.jsx)(g.Z,{variant:"card",className:"!max-w-full"}),(0,l.jsx)(g.Z,{variant:"card",className:"!max-w-full"}),(0,l.jsx)(g.Z,{variant:"card",className:"!max-w-full"}),(0,l.jsx)(g.Z,{variant:"card",className:"!max-w-full"}),(0,l.jsx)(g.Z,{variant:"card",className:"!max-w-full"})]}),((null===ie||void 0===ie?void 0:ie.length)>0||de.length>0)&&(0,l.jsxs)("ul",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-6 gap-10 lg:gap-8 xl:gap-10 w-full",children:[de&&de.length>0&&(null===de||void 0===de?void 0:de.map((function(e){var t,n,s,i,a,r,c,u;return(0,l.jsxs)("li",{className:"bg-white shadow rounded-lg flex flex-col overflow-hidden",children:[(0,l.jsxs)("div",{className:(0,P.AK)((null===e||void 0===e||null===(t=e.Business)||void 0===t||null===(n=t.picture)||void 0===n?void 0:n.url)?"bg-white":"bg-gray-300","h-56 w-full relative p-6 flex items-end"),children:[(0,l.jsx)("div",{className:(0,P.AK)("flex justify-center items-center absolute inset-0 z-0 opacity-40",(null===e||void 0===e||null===(s=e.Business)||void 0===s||null===(i=s.picture)||void 0===i?void 0:i.url)?"bg-transparent":"bg-indigo-600"),children:(null===e||void 0===e||null===(a=e.Business)||void 0===a||null===(r=a.picture)||void 0===r?void 0:r.url)?(0,l.jsx)(m(),{unoptimized:!0,src:null===e||void 0===e||null===(c=e.Business)||void 0===c||null===(u=c.picture)||void 0===u?void 0:u.url,layout:"fill",objectFit:"cover",alt:"Business picture"}):(0,l.jsx)(m(),{unoptimized:!0,src:(0,P.sd)("durable-icon.svg"),className:"brightness-0 invert",width:90,height:90,alt:"Business picture"})}),xe(null===e||void 0===e?void 0:e.Business)]}),(0,l.jsxs)("div",{className:"flex flex-col py-6",children:[(0,l.jsx)("h4",{className:"text-gray-900 font-bold text-h4 px-6 truncate",children:null===e||void 0===e?void 0:e.Business.name}),(0,l.jsx)("p",{className:"text-gray-900 text-sm px-6",children:"You have a pending invite to this business"}),(0,l.jsxs)("div",{className:"mt-4 flex flex-col divide-y px-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 text-green-700 py-3 hover:text-green-900 cursor-pointer",onClick:function(){return me(e._id)},children:[(0,l.jsx)(o.Z,{icon:"CheckCircleSolidIcon",className:"w-5 h-5"}),(0,l.jsx)("span",{className:"text-label font-medium",children:"Accept invite"}),(0,l.jsx)(o.Z,{icon:"ChevronRightIcon",className:"h-5 w-5 ml-auto"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3 text-red-700 py-3 hover:text-red-900 cursor-pointer",onClick:function(){return pe(e._id)},children:[(0,l.jsx)(o.Z,{icon:"NoSymbolIcon",className:"w-5 h-5"}),(0,l.jsx)("span",{className:"text-label font-medium",children:"Decline invite"})]})]})]})]},"invitations-".concat(e._id))}))),null===ie||void 0===ie?void 0:ie.map((function(e){var t,n,a,r,c,u;return(0,l.jsxs)("li",{className:"bg-white shadow rounded-lg flex flex-col overflow-hidden",children:[(0,l.jsxs)("div",{className:(0,P.AK)((null===e||void 0===e||null===(t=e.picture)||void 0===t?void 0:t.url)?"bg-black":"bg-gray-300","h-56 w-full relative group p-6 flex items-end cursor-pointer"),children:[(0,l.jsx)("div",{className:(0,P.AK)("flex justify-center items-center absolute inset-0  group-hover:opacity-80 transition-opacity z-0",(null===e||void 0===e||null===(n=e.picture)||void 0===n?void 0:n.url)?"bg-transparent":"bg-indigo-600"),onClick:function(){return le(e,!0)},children:(null===e||void 0===e||null===(a=e.picture)||void 0===a?void 0:a.url)?(0,l.jsx)(m(),{unoptimized:!0,src:null===e||void 0===e||null===(r=e.picture)||void 0===r?void 0:r.url,layout:"fill",objectFit:"cover",alt:"Business picture"}):(0,l.jsx)(m(),{unoptimized:!0,src:(0,P.sd)("durable-icon.svg"),className:"brightness-0 invert",width:90,height:90,alt:"Business picture"})}),(0,l.jsx)(j.Z,{suggestions:!0,gettyImages:!0,unsplash:!0,upload:!0,library:!0,allowDeletion:!1,idBusiness:e._id,pictures:e.picture,content:(0,l.jsx)(w.Z,{title:"Change image",children:(0,l.jsx)("div",{className:"z-5 bg-black lg:bg-opacity-50 hover:bg-opacity-70 text-white group-hover:opacity-100 lg:opacity-0 transition-opacity w-9 h-9 rounded-full flex items-center justify-center",children:(0,l.jsx)(o.Z,{icon:"PhotoIcon",className:"h-5 w-5"})})}),onChange:function(){var t=(0,s.Z)((function(t){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return(null===t||void 0===t?void 0:t.length)?[4,oe(e._id,t[0])]:[3,2];case 1:n.sent()||P.Z9.error("There was a problem while saving your new business image."),n.label=2;case 2:return[2]}}))}));return function(e){return t.apply(this,arguments)}}()}),xe(e)]}),(0,l.jsxs)("div",{className:"flex flex-col py-6",children:[(0,l.jsx)("h4",{className:"text-gray-900 font-bold text-h4 px-6 truncate",children:e.name}),(0,l.jsxs)("div",{className:"mt-2 flex flex-col divide-y px-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 text-gray-700 py-3 hover:text-gray-900 cursor-pointer",onClick:function(){return le(e,!0)},children:[(0,l.jsx)(o.Z,{icon:"StarSolidIcon",className:"h-5 w-5"}),(0,l.jsx)("span",{className:"text-label font-medium",children:"Go to business"}),(0,l.jsx)(o.Z,{icon:"ChevronRightIcon",className:"h-5 w-5 ml-auto"})]}),e.domain&&"public"===e.websiteStatus&&(0,l.jsx)(x(),{href:e.domain,children:(0,l.jsxs)("a",{className:"flex items-center gap-3 text-gray-700 py-3 hover:text-gray-900 cursor-pointer",target:"_blank",children:[(0,l.jsx)(o.Z,{icon:"EyeSolidIcon",className:"h-5 w-5"}),(0,l.jsx)("p",{className:"text-label font-medium",children:"View website"}),(0,l.jsx)(o.Z,{icon:"ExternalLinkIcon",className:"h-5 w-5 ml-auto"})]})}),e.domain&&"private"===e.websiteStatus&&(0,l.jsxs)("div",{className:"flex items-center gap-3 text-gray-700 py-3 hover:text-gray-900 cursor-pointer",onClick:function(){le(e,!0,"/website/settings")},children:[(0,l.jsx)(o.Z,{icon:"GlobeIcon",className:"h-5 w-5"}),(0,l.jsx)("p",{className:"text-label font-medium",children:"Make your website public"}),(0,l.jsx)(o.Z,{icon:"ChevronRightIcon",className:"h-5 w-5 ml-auto"})]}),e.isManager&&(0,l.jsx)("div",{className:"flex items-center gap-3 text-gray-700 py-3 hover:text-gray-900 cursor-pointer",children:(0,l.jsxs)(b.Z,{closeOnSelect:!0,placementAlign:"end",buttonClassName:"flex gap-3 items-center flex-1 min-w-60",button:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Z,{icon:"EllipsisVerticalIcon",className:"h-5 w-5"}),(0,l.jsx)("span",{className:"text-label font-medium flex-1 text-left",children:"More"})]}),mobileContent:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"rounded-full bg-gray-300 h-16 w-16 mb-2 relative",children:(null===e||void 0===e||null===(c=e.picture)||void 0===c?void 0:c.url)&&(0,l.jsx)(m(),{unoptimized:!0,src:null===e||void 0===e||null===(u=e.picture)||void 0===u?void 0:u.url,layout:"fill",objectFit:"cover",alt:"Business image"})}),(0,l.jsx)("h4",{className:"text-gray-900 font-semibold text-h4 px-6 truncate",children:e.name})]}),children:[(0,l.jsxs)(y.v.Item,{as:"div",className:"flex items-center gap-3 px-4 py-2.5 text-gray-600 transition-all cursor-pointer hover:bg-gray-100",onClick:function(t){t.stopPropagation(),le(e,!0,"/my-business/users")},children:[(0,l.jsx)(o.Z,{icon:"UsersSolidIcon",className:"h-5 w-5"}),(0,l.jsx)("span",{children:"Manage users"})]}),(0,l.jsxs)(y.v.Item,{as:"div",className:"flex items-center gap-3 px-4 py-2.5 text-red-600 transition-all cursor-pointer hover:bg-red-50",onClick:function(){return function(e){q(e),G(!0)}(e)},children:[(0,l.jsx)(o.Z,{icon:"TrashSolidIcon",className:"h-5 w-5"}),(0,l.jsx)("span",{children:"Delete business"})]})]})})]})]})]},"business-".concat(e._id))}))]}),0===(null===ie||void 0===ie?void 0:ie.length)&&D&&(0,l.jsx)("div",{className:"w-full pb-8 mx-auto",children:(0,l.jsx)(he,{})})]}),(0,l.jsx)(ne,{attention:!0,cancelText:"Back to safety"}),(0,l.jsx)(R.Z,{}),O&&(0,l.jsx)(N.M,{open:O,setOpen:L,language:null!==(Z=null===(v=navigator.language)||void 0===v?void 0:v.substring(0,2))&&void 0!==Z?Z:"en"}),Y&&(0,l.jsx)(F,{open:Y,onDeleteBusiness:function(){var e,t=$,n=!ue.user.customPlan&&t.stripeDetails.subscriptionId&&"active"===t.stripeDetails.subscriptionStatus,a=n?"Delete business and cancel plan?":"Delete business?",r=n?(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("p",{children:"The associated Starter plan will end immediately."}),(0,l.jsx)("p",{children:"All the contents of this business including its website, domains, contacts, etc. will be deleted."})]}):"All the contents of this business including its website, domains, contacts, etc. will be deleted.",o=n?"delete business and cancel plan":"delete business";te(a,(0,l.jsxs)(l.Fragment,{children:["Are you sure you want to permanently delete ",(0,l.jsx)("span",{className:"font-medium",children:t.name}),n?(0,l.jsxs)("span",{children:[" and cancel its ",(0,l.jsx)("span",{className:"font-medium",children:"".concat((null===(e=t.plan)||void 0===e?void 0:e.name)||"Durable"," plan")})]}):"","?"]}),r,"to proceed",(0,s.Z)((function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,ce(t._id)];case 1:return e.sent()?P.Z9.success("Business deleted!"):P.Z9.error("Error while deleting the business"),[2]}}))})),(function(){}),o)},businessTarget:$,onClose:function(){return G(!1)},onRegenerate:function(){return W(!0)}}),H&&(0,l.jsx)(_.Z,{open:H,setOpen:W,businessTarget:$})]})]})}M.auth=!0,M.layout=!1},72510:function(e,t,n){"use strict";n.d(t,{v:function(){return O}});var s,i,l=n(67294),a=n(32984),r=n(12351),o=n(9362),c=n(94192),u=n(16723),d=n(23784),m=n(19946),p=n(61363),f=n(11497),v=n(64103),x=n(84575),h=n(39650),g=n(31591),b=n(16567),y=n(14157),j=n(51074),w=n(73781),N=n(40476),I=n(55918),k=((i=k||{})[i.Open=0]="Open",i[i.Closed=1]="Closed",i),C=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(C||{}),S=((s=S||{})[s.OpenMenu=0]="OpenMenu",s[s.CloseMenu=1]="CloseMenu",s[s.GoToItem=2]="GoToItem",s[s.Search=3]="Search",s[s.ClearSearch=4]="ClearSearch",s[s.RegisterItem=5]="RegisterItem",s[s.UnregisterItem=6]="UnregisterItem",s);function R(e,t=(e=>e)){let n=null!==e.activeItemIndex?e.items[e.activeItemIndex]:null,s=(0,x.z2)(t(e.items.slice()),(e=>e.dataRef.current.domRef.current)),i=n?s.indexOf(n):null;return-1===i&&(i=null),{items:s,activeItemIndex:i}}let Z={1:e=>1===e.menuState?e:{...e,activeItemIndex:null,menuState:1},0:e=>0===e.menuState?e:{...e,__demoMode:!1,menuState:0},2:(e,t)=>{var n;let s=R(e),i=(0,f.d)(t,{resolveItems:()=>s.items,resolveActiveIndex:()=>s.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...e,...s,searchQuery:"",activeItemIndex:i,activationTrigger:null!=(n=t.trigger)?n:1}},3:(e,t)=>{let n=""!==e.searchQuery?0:1,s=e.searchQuery+t.value.toLowerCase(),i=(null!==e.activeItemIndex?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find((e=>{var t;return(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(s))&&!e.dataRef.current.disabled})),l=i?e.items.indexOf(i):-1;return-1===l||l===e.activeItemIndex?{...e,searchQuery:s}:{...e,searchQuery:s,activeItemIndex:l,activationTrigger:1}},4:e=>""===e.searchQuery?e:{...e,searchQuery:"",searchActiveItemIndex:null},5:(e,t)=>{let n=R(e,(e=>[...e,{id:t.id,dataRef:t.dataRef}]));return{...e,...n}},6:(e,t)=>{let n=R(e,(e=>{let n=e.findIndex((e=>e.id===t.id));return-1!==n&&e.splice(n,1),e}));return{...e,...n,activationTrigger:1}}},T=(0,l.createContext)(null);function P(e){let t=(0,l.useContext)(T);if(null===t){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,P),t}return t}function E(e,t){return(0,a.E)(t.type,Z,e,t)}T.displayName="MenuContext";let F=l.Fragment;let _=r.AN.RenderStrategy|r.AN.Static;let M=l.Fragment;let A=(0,r.yV)((function(e,t){let{__demoMode:n=!1,...s}=e,i=(0,l.useReducer)(E,{__demoMode:n,menuState:n?0:1,buttonRef:(0,l.createRef)(),itemsRef:(0,l.createRef)(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:o,itemsRef:c,buttonRef:u},m]=i,p=(0,d.T)(t);(0,h.O)([u,c],((e,t)=>{var n;m({type:1}),(0,x.sP)(t,x.tJ.Loose)||(e.preventDefault(),null==(n=u.current)||n.focus())}),0===o);let f=(0,w.z)((()=>{m({type:1})})),v=(0,l.useMemo)((()=>({open:0===o,close:f})),[o,f]),g={ref:p};return l.createElement(T.Provider,{value:i},l.createElement(b.up,{value:(0,a.E)(o,{0:b.ZM.Open,1:b.ZM.Closed})},(0,r.sY)({ourProps:g,theirProps:s,slot:v,defaultTag:F,name:"Menu"})))})),D=(0,r.yV)((function(e,t){var n;let s=(0,m.M)(),{id:i=`headlessui-menu-button-${s}`,...a}=e,[o,u]=P("Menu.Button"),x=(0,d.T)(o.buttonRef,t),h=(0,c.G)(),g=(0,w.z)((e=>{switch(e.key){case p.R.Space:case p.R.Enter:case p.R.ArrowDown:e.preventDefault(),e.stopPropagation(),u({type:0}),h.nextFrame((()=>u({type:2,focus:f.T.First})));break;case p.R.ArrowUp:e.preventDefault(),e.stopPropagation(),u({type:0}),h.nextFrame((()=>u({type:2,focus:f.T.Last})))}})),b=(0,w.z)((e=>{if(e.key===p.R.Space)e.preventDefault()})),j=(0,w.z)((t=>{if((0,v.P)(t.currentTarget))return t.preventDefault();e.disabled||(0===o.menuState?(u({type:1}),h.nextFrame((()=>{var e;return null==(e=o.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(t.preventDefault(),u({type:0})))})),N=(0,l.useMemo)((()=>({open:0===o.menuState})),[o]),I={ref:x,id:i,type:(0,y.f)(e,o.buttonRef),"aria-haspopup":"menu","aria-controls":null==(n=o.itemsRef.current)?void 0:n.id,"aria-expanded":0===o.menuState,onKeyDown:g,onKeyUp:b,onClick:j};return(0,r.sY)({ourProps:I,theirProps:a,slot:N,defaultTag:"button",name:"Menu.Button"})})),z=(0,r.yV)((function(e,t){var n,s;let i=(0,m.M)(),{id:a=`headlessui-menu-items-${i}`,...u}=e,[v,h]=P("Menu.Items"),y=(0,d.T)(v.itemsRef,t),N=(0,j.i)(v.itemsRef),I=(0,c.G)(),k=(0,b.oJ)(),C=null!==k?(k&b.ZM.Open)===b.ZM.Open:0===v.menuState;(0,l.useEffect)((()=>{let e=v.itemsRef.current;e&&0===v.menuState&&e!==(null==N?void 0:N.activeElement)&&e.focus({preventScroll:!0})}),[v.menuState,v.itemsRef,N]),(0,g.B)({container:v.itemsRef.current,enabled:0===v.menuState,accept:e=>"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let S=(0,w.z)((e=>{var t,n;switch(I.dispose(),e.key){case p.R.Space:if(""!==v.searchQuery)return e.preventDefault(),e.stopPropagation(),h({type:3,value:e.key});case p.R.Enter:if(e.preventDefault(),e.stopPropagation(),h({type:1}),null!==v.activeItemIndex){let{dataRef:e}=v.items[v.activeItemIndex];null==(n=null==(t=e.current)?void 0:t.domRef.current)||n.click()}(0,x.wI)(v.buttonRef.current);break;case p.R.ArrowDown:return e.preventDefault(),e.stopPropagation(),h({type:2,focus:f.T.Next});case p.R.ArrowUp:return e.preventDefault(),e.stopPropagation(),h({type:2,focus:f.T.Previous});case p.R.Home:case p.R.PageUp:return e.preventDefault(),e.stopPropagation(),h({type:2,focus:f.T.First});case p.R.End:case p.R.PageDown:return e.preventDefault(),e.stopPropagation(),h({type:2,focus:f.T.Last});case p.R.Escape:e.preventDefault(),e.stopPropagation(),h({type:1}),(0,o.k)().nextFrame((()=>{var e;return null==(e=v.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));break;case p.R.Tab:e.preventDefault(),e.stopPropagation(),h({type:1}),(0,o.k)().nextFrame((()=>{(0,x.EO)(v.buttonRef.current,e.shiftKey?x.TO.Previous:x.TO.Next)}));break;default:1===e.key.length&&(h({type:3,value:e.key}),I.setTimeout((()=>h({type:4})),350))}})),R=(0,w.z)((e=>{if(e.key===p.R.Space)e.preventDefault()})),Z=(0,l.useMemo)((()=>({open:0===v.menuState})),[v]),T={"aria-activedescendant":null===v.activeItemIndex||null==(n=v.items[v.activeItemIndex])?void 0:n.id,"aria-labelledby":null==(s=v.buttonRef.current)?void 0:s.id,id:a,onKeyDown:S,onKeyUp:R,role:"menu",tabIndex:0,ref:y};return(0,r.sY)({ourProps:T,theirProps:u,slot:Z,defaultTag:"div",features:_,visible:C,name:"Menu.Items"})})),B=(0,r.yV)((function(e,t){let n=(0,m.M)(),{id:s=`headlessui-menu-item-${n}`,disabled:i=!1,...a}=e,[c,p]=P("Menu.Item"),v=null!==c.activeItemIndex&&c.items[c.activeItemIndex].id===s,h=(0,l.useRef)(null),g=(0,d.T)(t,h);(0,u.e)((()=>{if(c.__demoMode||0!==c.menuState||!v||0===c.activationTrigger)return;let e=(0,o.k)();return e.requestAnimationFrame((()=>{var e,t;null==(t=null==(e=h.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}),[c.__demoMode,h,v,c.menuState,c.activationTrigger,c.activeItemIndex]);let b=(0,I.x)(h),y=(0,l.useRef)({disabled:i,domRef:h,get textValue(){return b()}});(0,u.e)((()=>{y.current.disabled=i}),[y,i]),(0,u.e)((()=>(p({type:5,id:s,dataRef:y}),()=>p({type:6,id:s}))),[y,s]);let j=(0,w.z)((()=>{p({type:1})})),k=(0,w.z)((e=>{if(i)return e.preventDefault();p({type:1}),(0,x.wI)(c.buttonRef.current)})),C=(0,w.z)((()=>{if(i)return p({type:2,focus:f.T.Nothing});p({type:2,focus:f.T.Specific,id:s})})),S=(0,N.g)(),R=(0,w.z)((e=>S.update(e))),Z=(0,w.z)((e=>{S.wasMoved(e)&&(i||v||p({type:2,focus:f.T.Specific,id:s,trigger:0}))})),T=(0,w.z)((e=>{S.wasMoved(e)&&(i||v&&p({type:2,focus:f.T.Nothing}))})),E=(0,l.useMemo)((()=>({active:v,disabled:i,close:j})),[v,i,j]);return(0,r.sY)({ourProps:{id:s,ref:g,role:"menuitem",tabIndex:!0===i?void 0:-1,"aria-disabled":!0===i||void 0,disabled:void 0,onClick:k,onFocus:C,onPointerEnter:R,onMouseEnter:R,onPointerMove:Z,onMouseMove:Z,onPointerLeave:T,onMouseLeave:T},theirProps:a,slot:E,defaultTag:M,name:"Menu.Item"})})),O=Object.assign(A,{Button:D,Items:z,Item:B})}},function(e){e.O(0,[6440,2295,9774,2888,179],(function(){return t=58657,e(e.s=t);var t}));var t=e.O();_N_E=t}]);