(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4065],{45549:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/website/dashboard",function(){return n(35749)}])},79454:function(e,t,n){"use strict";var i=n(85893),s=n(16494),o=n(67294),r=n(3732),a=n(38462);t.Z=function(e){var t=e.text,n=e.variant,l=(0,a.$G)("mars").t,c=(0,o.useState)(""),d=c[0],u=c[1],p=(0,o.useState)(l("buildingLoader")),h=p[0],f=p[1],v=(0,o.useState)(!1),m=v[0],b=v[1];return(0,o.useEffect)((function(){if(t){u(h),f(t),b(!0);var e=setTimeout((function(){u(t),b(!1)}),500);return function(){return clearTimeout(e)}}}),[t]),"old"===n?(0,i.jsx)("div",{className:"fixed inset-0 bg-black backdrop-blur-xs z-100 font-sans bg-opacity-20 flex flex-col items-center justify-center p-6",children:(0,i.jsx)("div",{className:"py-6 px-8 bg-white bg-opacity-95 rounded-lg shadow-lg",children:(0,i.jsx)(s.Z,{text:t})})}):(0,i.jsx)("div",{className:"fixed inset-0 z-110 bg-gray-900 bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-6",children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 md:gap-6",children:[(0,i.jsx)(s.Z,{variant:"full-logo"}),(0,i.jsxs)("ul",{className:"font-sans text-2xl leading-9 text-white text-center h-16 md:h-9 overflow-hidden",children:[(0,i.jsx)("li",{className:(0,r.AK)("flex items-center justify-center w-full h-16 md:h-9 translate-y-0 transition-transform duration-[0ms] delay-100",m&&"!duration-500 !-translate-y-full"),children:d}),(0,i.jsx)("li",{className:(0,r.AK)("flex items-center justify-center w-full h-16 md:h-9 translate-y-0 transition-transform duration-[0ms] delay-100",m&&"!duration-500 !-translate-y-full"),children:h})]})]})})}},7319:function(e,t,n){"use strict";var i=n(85893),s=n(25675),o=n.n(s),r=n(66261),a=n(3732);t.Z=function(e){var t=e.imageSrc,n=e.title,s=e.imgTitle,l=e.desc,c=e.finished,d=e.actionLabel,u=e.action,p=e.success,h=e.primary,f=e.disabled;return(0,i.jsxs)("div",{className:"rounded-lg shadow-md overflow-hidden",children:[(0,i.jsx)("div",{className:"relative w-full flex flex-row justify-center items-center min-h-30",children:(0,i.jsx)(o(),{src:t,alt:"Setup Card",title:s,width:295,height:120})}),(0,i.jsxs)("div",{className:"p-4 bg-white",children:[(0,i.jsx)("p",{className:"text-gray-900 font-semibold mb-1",children:n}),(0,i.jsx)("p",{className:"text-gray-500 text-sm mb-3",children:l}),c?(0,i.jsxs)("div",{className:"flex items-center gap-2 min-h-[38px]",children:[(0,i.jsx)(r.Z,{icon:"CheckSolidIcon",className:"w-5 h-5 bg-green-500 text-white rounded-full p-1"}),(0,i.jsx)("span",{className:"text-green-500 text-xs font-medium",children:p})]}):(0,i.jsx)("button",{onClick:u,className:(0,a.AK)("button",h?"primary":"light"),disabled:f,children:d})]})]})}},35749:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var i=n(26042),s=n(69396),o=n(85893),r=n(47568),a=n(97582),l=n(67294),c=n(7319),d=n(70804),u=n(66261),p=n(11355),h=n(3732),f=n(79454),v=n(11653),m=n(4519),b=n(11163),g=n(43714),x=n(53371),w=n(33299),y=function(e){var t=e.website,n=e.refreshWebsite,y=e.onPrimaryChange,j=(0,m.Z)(),S=j.post,N=j.get,E=(0,g.Z)().track,M=(0,b.useRouter)(),T=(0,l.useState)(!0),k=T[0],L=T[1],_=(0,l.useState)(!1),P=_[0],Z=_[1],C=(0,l.useState)([]),D=C[0],A=C[1],z=(0,l.useState)([]),O=z[0],X=z[1],Y=(0,l.useState)([]),U=Y[0],R=Y[1],B=(0,l.useState)(!1),K=B[0],W=B[1],F=(0,l.useState)(!1),G=F[0],I=F[1],q=(0,l.useState)(!1),H=q[0],$=q[1],V=(0,w.useSession)().data,J=!(!t||t&&!t.generatedAt&&t.generate),Q=function(){var e,t,i;(null===V||void 0===V||null===(e=V.user)||void 0===e||null===(t=e.plan)||void 0===t||null===(i=t.features)||void 0===i?void 0:i.includes("publish-website"))?(W(!0),S("/website/toggle-status",{status:"public"}).then((function(e){e.status?(W(!1),n(),I(!0),E("app:publish-onboarding-card")):h.Z9.error("Error while publishing your website! Try again later.")}))):(E("account:paywall-click",{context:"publish_website_overview",page:null===M||void 0===M?void 0:M.pathname}),$(!0))},ee=function(){E("app:blog-onboarding-card"),M.push({pathname:"/website/builder",query:{routerAction:"createBlogPost"}})},te=function(){E("app:website-onboarding-card"),M.push("/website/builder")},ne=function(){E("app:social-onboarding-card"),M.push({pathname:"/website/builder",query:{routerAction:"addSocialLinks"}})};return(0,l.useEffect)((function(){D.length>0&&function(){var e=D.filter((function(e){return!0!==(null===e||void 0===e?void 0:e.finished)})),t=D.filter((function(e){return!0===(null===e||void 0===e?void 0:e.finished)}));e.length>0?(Z(!0),X(e),R(t),y(!1)):y(!0)}()}),[D]),(0,l.useEffect)((function(){var e=function(){var e=(0,r.Z)((function(){var e,n,i,s,r,l,c,d,u,p,f,v;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,N("/onboarding/has-custom-domain",{businessId:null===t||void 0===t||null===(e=t.Business)||void 0===e?void 0:e._id,identifier:"existing-domain"})];case 1:return u=a.sent(),p=!0===(null===u||void 0===u||null===(n=u.content)||void 0===n?void 0:n.hasCustomDomain),[4,N("/website/get-posts",{})];case 2:return f=a.sent(),v=(null===f||void 0===f||null===(i=f.content)||void 0===i?void 0:i.total)>0,A([{id:"card-generate",imageSrc:(0,h.sd)("dashboard/setup/cards/card-generate.svg"),title:"Generate",imgTitle:"Generate",desc:"Create a website in 30 seconds",actionLabel:"Generate website",action:te,finished:J,success:"Generated"},{id:"card-domain",imageSrc:(0,h.sd)("dashboard/setup/cards/card-domain.svg"),title:"Domain",imgTitle:"Domain",desc:"Enhances credibility and brand identity",actionLabel:p?"Link Domain":"Customize domain",action:function(){!function(e){E("app:".concat(e?"link":"customize","-domain-onboarding-card")),M.push("/website/domain")}(p)},finished:!!(null===t||void 0===t||null===(s=t.domain)||void 0===s?void 0:s.length),success:(null===t||void 0===t?void 0:t.externalDomain)&&(null===t||void 0===t?void 0:t.externalDomain)===(null===t||void 0===t?void 0:t.domain)?"Linked":"Customized",disabled:!J},{id:"card-publish",imageSrc:(0,h.sd)("dashboard/setup/cards/card-publish.svg"),title:(0,o.jsxs)("span",{className:"flex items-center",children:["Publish ",!(null===V||void 0===V||null===(r=V.user)||void 0===r||null===(l=r.plan)||void 0===l||null===(c=l.features)||void 0===c?void 0:c.includes("publish-website"))&&(0,o.jsx)("span",{className:"ml-auto px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"PRO"})]}),imgTitle:"Publish",desc:"Make your site accessible to everyone",actionLabel:"Publish website",action:Q,finished:"public"===(null===t||void 0===t?void 0:t.status),success:"Published",disabled:!J},{id:"card-social-media",imageSrc:(0,h.sd)("dashboard/setup/cards/card-social-media.svg"),title:"Social Media",imgTitle:"Social Media",desc:"Expand reach and boost engagement",actionLabel:"Add social channels",action:ne,finished:!!(null===t||void 0===t||null===(d=t.social)||void 0===d?void 0:d.length),success:"Added",disabled:!J},{id:"card-blog",imageSrc:(0,h.sd)("dashboard/setup/cards/card-blog.svg"),title:"Blog",imgTitle:"Blog",desc:"Attract and engage your visitors",actionLabel:"Create blog post",action:ee,finished:v,success:"Added",disabled:!J}]),[2]}}))}));return function(){return e.apply(this,arguments)}}();t&&e().finally((function(){L(!1)}))}),[t]),k?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(x.Z,{context:"publish_website",open:H,setOpen:$}),(0,o.jsx)(p.u,{show:P,as:l.Fragment,leave:"transition-all duration-500 ease-linear",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 -translate-y-80",children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex justify-between items-start mb-5",children:[(0,o.jsx)("h2",{className:"md:max-w-150 text-h4 md:text-h2 text-gray-900 font-bold",children:"Inform, engage, and convert your visitors"}),(0,o.jsx)("button",{className:"light icon transparent",onClick:function(){Z(!1),y(!0)},children:(0,o.jsx)(u.Z,{icon:"XIcon",className:"w-6 h-6"})})]}),(0,o.jsxs)(d.Z,{vertical:!1,className:"flex gap-5 -mx-9 px-9 md:-mr-9 md:-ml-12 md:pl-12 overflow-x-auto no-scrollbar",hideScrollbars:!1,children:[O.map((function(e,t){return(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"w-73.5 mb-6",children:(0,o.jsx)(c.Z,(0,s.Z)((0,i.Z)({},e),{primary:0===t}))})},e.id)})),U.map((function(e){return(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"w-73.5 mb-6",children:(0,o.jsx)(c.Z,(0,i.Z)({},e))})},e.id)}))]})]})}),K&&(0,o.jsx)(f.Z,{text:"Generating..."}),(0,o.jsx)(v.Z,{open:G,setOpen:I,website:t})]})},j=n(16494),S=n(41664),N=n.n(S),E=function(e){var t=e.website,n=(0,w.useSession)().data,i=(0,l.useState)(!1),s=i[0],r=i[1],a=(0,l.useState)(!0),c=a[0],d=a[1],u=!(!t||t&&!t.generatedAt&&t.generate);return(0,l.useEffect)((function(){r("public"===(null===t||void 0===t?void 0:t.status))}),[n,t]),u?(0,o.jsx)(o.Fragment,{children:t&&(0,o.jsxs)("div",{className:"rounded-lg bg-white shadow-md",children:[(0,o.jsx)("div",{className:"p-6",children:(0,o.jsx)("p",{className:"font-bold truncate",children:t.domain||(0,h.lz)(t)})}),(0,o.jsxs)("div",{className:(0,h.AK)("relative z-5 w-full h-90 bg-gray-200",c?"hidden":"block"),children:[(0,o.jsx)("div",{className:"absolute inset-0 opacity-0 z-20"}),(0,o.jsx)("div",{className:"overflow-hidden w-full h-90 relative z-10",children:(0,o.jsx)("iframe",{src:"/website/preview",frameBorder:"0",className:"h-200",style:{width:"calc(100% + 16px)"},onLoad:function(){d(!1)}})})]}),c&&(0,o.jsx)("div",{children:(0,o.jsx)(j.Z,{variant:"box"})}),(0,o.jsxs)("div",{className:"flex flex-row flex-nowrap justify-between items-center w-full p-6",children:[(0,o.jsxs)("div",{className:"flex gap-2 items-center text-sm",children:[(0,o.jsx)("span",{className:(0,h.AK)("w-4 h-4 rounded-full",s?"bg-green-500":"bg-yellow-400")}),s&&(0,o.jsx)("span",{children:"Your website is published"}),!s&&(0,o.jsxs)("span",{children:["Website is ",(0,o.jsx)(N(),{href:"/website/settings",children:(0,o.jsx)("a",{className:"text-blue-600",children:"unpublished"})})]})]}),s?(0,o.jsx)(N(),{href:function(){var e,n;return"https://".concat("active"===(null===t||void 0===t||null===(e=t.cloudflare)||void 0===e||null===(n=e.ssl)||void 0===n?void 0:n.status)&&(null===t||void 0===t?void 0:t.domain)?t.domain:(0,h.lz)(t))}(),children:(0,o.jsx)("a",{target:"_blank",className:"flex-shrink-0 button light",children:"View"})}):(0,o.jsx)(N(),{href:"/website/builder",children:(0,o.jsx)("a",{className:"flex-shrink-0 button light",children:"Preview"})})]})]})}):null},M=n(61437),T=function(){(0,M.Z)("layout.title","Website",!0);var e=(0,l.useState)(),t=e[0],n=e[1],r=(0,l.useState)((0,h.tl)("website")),a=r[0],c=r[1],d=!(!a||a&&!a.generatedAt&&a.generate),u=(0,m.Z)().get,p=function(){u("/website/get",{populate:!0}).then((function(e){if(e&&!0===e.status&&e.content){var t=(0,s.Z)((0,i.Z)({},e.content),{subdomain:(0,h.nv)(e.content.subdomain,e.content.durableDomain)});(0,h.Fs)("website",t),c(t)}}))};return(0,l.useEffect)((function(){p()}),[]),(0,o.jsxs)(o.Fragment,{children:[d&&(0,o.jsx)("div",{className:"w-full flex flex-row flex-wrap justify-end items-center",children:(0,h.$K)(t)&&(0,o.jsx)(N(),{href:"/website/builder",children:(0,o.jsx)("a",{className:(0,h.AK)("button",t?"primary":"secondary"),children:"Edit website"})})}),(0,o.jsx)("div",{className:"mt-6",children:(0,o.jsx)(y,{onPrimaryChange:function(e){n(e)},website:a,refreshWebsite:p})}),(0,o.jsx)(E,{website:a})]})};T.auth=!0,T.layout=!0;var k=T},70804:function(e,t,n){"use strict";var i,s,o=n(67294),r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},a=(s=i={path:void 0,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&i.path)}},i.exports,function(){var e={}.hasOwnProperty;function t(){for(var n=[],i=0;i<arguments.length;i++){var s=arguments[i];if(s){var o=typeof s;if("string"===o||"number"===o)n.push(s);else if(Array.isArray(s)&&s.length){var r=t.apply(null,s);r&&n.push(r)}else if("object"===o)for(var a in s)e.call(s,a)&&s[a]&&n.push(a)}}return n.join(" ")}s.exports?(t.default=t,s.exports=t):window.classNames=t}(),i.exports);function l(e,t,n){var i,s,o,r,a;function l(){var c=Date.now()-r;c<t&&c>=0?i=setTimeout(l,t-c):(i=null,n||(a=e.apply(o,s),o=s=null))}null==t&&(t=100);var c=function(){o=this,s=arguments,r=Date.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(a=e.apply(o,s),o=s=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=e.apply(o,s),o=s=null,clearTimeout(i),i=null)},c}l.debounce=l;var c=l;!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===n&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}(".indiana-scroll-container {\n  overflow: auto; }\n  .indiana-scroll-container--dragging {\n    scroll-behavior: auto !important; }\n    .indiana-scroll-container--dragging > * {\n      pointer-events: none;\n      cursor: -webkit-grab;\n      cursor: grab; }\n  .indiana-scroll-container--hide-scrollbars {\n    overflow: hidden;\n    overflow: -moz-scrollbars-none;\n    -ms-overflow-style: none;\n    scrollbar-width: none; }\n    .indiana-scroll-container--hide-scrollbars::-webkit-scrollbar {\n      display: none !important;\n      height: 0 !important;\n      width: 0 !important;\n      background: transparent !important;\n      -webkit-appearance: none !important; }\n  .indiana-scroll-container--native-scroll {\n    overflow: auto; }\n\n.indiana-dragging {\n  cursor: -webkit-grab;\n  cursor: grab; }\n");var d,u=(d="indiana-scroll-container",function(e,t){if(!e)return d;var n;"string"==typeof e?n=e:t=e;var i=d;return n&&(i+="__"+n),i+(t?Object.keys(t).reduce((function(e,n){var s=t[n];return s&&(e+=" "+("boolean"==typeof s?i+"--"+n:i+"--"+n+"_"+s)),e}),""):"")}),p=function(e){function t(t){var n=e.call(this,t)||this;return n.onEndScroll=function(){n.scrolling=!1,!n.pressed&&n.started&&n.processEnd()},n.onScroll=function(e){var t=n.container.current;t.scrollLeft===n.scrollLeft&&t.scrollTop===n.scrollTop||(n.scrolling=!0,n.processScroll(e),n.onEndScroll())},n.onTouchStart=function(e){var t=n.props.nativeMobileScroll;if(n.isDraggable(e.target))if(n.internal=!0,t&&n.scrolling)n.pressed=!0;else{var i=e.touches[0];n.processClick(e,i.clientX,i.clientY),!t&&n.props.stopPropagation&&e.stopPropagation()}},n.onTouchEnd=function(e){var t=n.props.nativeMobileScroll;n.pressed&&(!n.started||n.scrolling&&t?n.pressed=!1:n.processEnd(),n.forceUpdate())},n.onTouchMove=function(e){var t=n.props.nativeMobileScroll;if(n.pressed&&(!t||!n.isMobile)){var i=e.touches[0];i&&n.processMove(e,i.clientX,i.clientY),e.preventDefault(),n.props.stopPropagation&&e.stopPropagation()}},n.onMouseDown=function(e){n.isDraggable(e.target)&&n.isScrollable()&&(n.internal=!0,-1!==n.props.buttons.indexOf(e.button)&&(n.processClick(e,e.clientX,e.clientY),e.preventDefault(),n.props.stopPropagation&&e.stopPropagation()))},n.onMouseMove=function(e){n.pressed&&(n.processMove(e,e.clientX,e.clientY),e.preventDefault(),n.props.stopPropagation&&e.stopPropagation())},n.onMouseUp=function(e){n.pressed&&(n.started?n.processEnd():(n.internal=!1,n.pressed=!1,n.forceUpdate(),n.props.onClick&&n.props.onClick(e)),e.preventDefault(),n.props.stopPropagation&&e.stopPropagation())},n.container=o.createRef(),n.onEndScroll=c(n.onEndScroll,300),n.scrolling=!1,n.started=!1,n.pressed=!1,n.internal=!1,n.getRef=n.getRef.bind(n),n}return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.componentDidMount=function(){var e=this.props.nativeMobileScroll,t=this.container.current;window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd),t.addEventListener("touchstart",this.onTouchStart,{passive:!1}),t.addEventListener("mousedown",this.onMouseDown,{passive:!1}),e&&(this.isMobile=this.isMobileDevice(),this.isMobile&&this.forceUpdate())},t.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},t.prototype.getElement=function(){return this.container.current},t.prototype.isMobileDevice=function(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")},t.prototype.isDraggable=function(e){var t=this.props.ignoreElements;if(t){var n=e.closest(t);return null===n||n.contains(this.getElement())}return!0},t.prototype.isScrollable=function(){var e=this.container.current;return e&&(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight)},t.prototype.processClick=function(e,t,n){var i=this.container.current;this.scrollLeft=i.scrollLeft,this.scrollTop=i.scrollTop,this.clientX=t,this.clientY=n,this.pressed=!0},t.prototype.processStart=function(e){void 0===e&&(e=!0);var t=this.props.onStartScroll;this.started=!0,e&&document.body.classList.add("indiana-dragging"),t&&t({external:!this.internal}),this.forceUpdate()},t.prototype.processScroll=function(e){if(this.started){var t=this.props.onScroll;t&&t({external:!this.internal})}else this.processStart(!1)},t.prototype.processMove=function(e,t,n){var i=this.props,s=i.horizontal,o=i.vertical,r=i.activationDistance,a=i.onScroll,l=this.container.current;this.started?(s&&(l.scrollLeft-=t-this.clientX),o&&(l.scrollTop-=n-this.clientY),a&&a({external:!this.internal}),this.clientX=t,this.clientY=n,this.scrollLeft=l.scrollLeft,this.scrollTop=l.scrollTop):(s&&Math.abs(t-this.clientX)>r||o&&Math.abs(n-this.clientY)>r)&&(this.clientX=t,this.clientY=n,this.processStart())},t.prototype.processEnd=function(){var e=this.props.onEndScroll;this.container.current&&e&&e({external:!this.internal}),this.pressed=!1,this.started=!1,this.scrolling=!1,this.internal=!1,document.body.classList.remove("indiana-dragging"),this.forceUpdate()},t.prototype.getRef=function(e){[this.container,this.props.innerRef].forEach((function(t){t&&("function"==typeof t?t(e):t.current=e)}))},t.prototype.render=function(){var e=this.props,t=e.children,n=e.draggingClassName,i=e.className,s=e.style,r=e.hideScrollbars,l=e.component;return o.createElement(l,{className:a(i,this.pressed&&n,u({dragging:this.pressed,"hide-scrollbars":r,"native-scroll":this.isMobile})),style:s,ref:this.getRef,onScroll:this.onScroll},t)},t.defaultProps={nativeMobileScroll:!0,hideScrollbars:!0,activationDistance:10,vertical:!0,horizontal:!0,stopPropagation:!1,style:{},component:"div",buttons:[0]},t}(o.PureComponent);t.Z=p}},function(e){e.O(0,[9774,2888,179],(function(){return t=45549,e(e.s=t);var t}));var t=e.O();_N_E=t}]);